(()=>{var e={8518:(e,t,n)=>{"use strict";function r(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function o(){return"npm"}n.d(t,{S:()=>o,n:()=>r})},1422:(e,t,n)=>{"use strict";n.d(t,{l$:()=>s,KV:()=>o});var r=n(8518);function o(){return!(0,r.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function s(e,t){return e.require(t)}e=n.hmd(e)},1170:(e,t,n)=>{"use strict";n.d(t,{yW:()=>u,ph:()=>h});var r=n(1422),o=n(1235);e=n.hmd(e);const s=(0,o.Rf)(),i={nowSeconds:()=>Date.now()/1e3},a=(0,r.KV)()?function(){try{return(0,r.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=s;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?i:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=i.nowSeconds.bind(i),h=c.nowSeconds.bind(c);let d;(()=>{const{performance:e}=s;if(!e||!e.now)return void(d="none");const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+n-r):t;i||c<t?o<=c?(d="timeOrigin",e.timeOrigin):d="navigationStart":d="dateNow"})()},1235:(e,t,n)=>{"use strict";function r(e){return e&&e.Math==Math?e:void 0}n.d(t,{n2:()=>o,Rf:()=>s,YO:()=>i});const o="object"==typeof globalThis&&r(globalThis)||"object"==typeof window&&r(window)||"object"==typeof self&&r(self)||"object"==typeof n.g&&r(n.g)||function(){return this}()||{};function s(){return o}function i(e,t,n){const r=n||o,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}},8442:(e,t,n)=>{const r=n(9488);function o(e,t,n){const r=e[t]+e[n];let o=e[t+1]+e[n+1];r>=4294967296&&o++,e[t]=r,e[t+1]=o}function s(e,t,n,r){let o=e[t]+n;n<0&&(o+=4294967296);let s=e[t+1]+r;o>=4294967296&&s++,e[t]=o,e[t+1]=s}function i(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,n,r,i,a){const c=d[i],u=d[i+1],l=d[a],f=d[a+1];o(h,e,t),s(h,e,c,u);let p=h[r]^h[e],g=h[r+1]^h[e+1];h[r]=g,h[r+1]=p,o(h,n,r),p=h[t]^h[n],g=h[t+1]^h[n+1],h[t]=p>>>24^g<<8,h[t+1]=g>>>24^p<<8,o(h,e,t),s(h,e,l,f),p=h[r]^h[e],g=h[r+1]^h[e+1],h[r]=p>>>16^g<<16,h[r+1]=g>>>16^p<<16,o(h,n,r),p=h[t]^h[n],g=h[t+1]^h[n+1],h[t]=g>>>31^p<<1,h[t+1]=p>>>31^g<<1}const c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),h=new Uint32Array(32),d=new Uint32Array(32);function l(e,t){let n=0;for(n=0;n<16;n++)h[n]=e.h[n],h[n+16]=c[n];for(h[24]=h[24]^e.t,h[25]=h[25]^e.t/4294967296,t&&(h[28]=~h[28],h[29]=~h[29]),n=0;n<32;n++)d[n]=i(e.b,4*n);for(n=0;n<12;n++)a(0,8,16,24,u[16*n+0],u[16*n+1]),a(2,10,18,26,u[16*n+2],u[16*n+3]),a(4,12,20,28,u[16*n+4],u[16*n+5]),a(6,14,22,30,u[16*n+6],u[16*n+7]),a(0,10,20,30,u[16*n+8],u[16*n+9]),a(2,12,22,24,u[16*n+10],u[16*n+11]),a(4,14,16,26,u[16*n+12],u[16*n+13]),a(6,8,18,28,u[16*n+14],u[16*n+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^h[n]^h[n+16]}const f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function p(e,t,n,r){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&16!==n.length)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&16!==r.length)throw new Error("Illegal personal, expected Uint8Array with length is 16");const o={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};f.fill(0),f[0]=e,t&&(f[1]=t.length),f[2]=1,f[3]=1,n&&f.set(n,32),r&&f.set(r,48);for(let e=0;e<16;e++)o.h[e]=c[e]^i(f,4*e);return t&&(g(o,t),o.c=128),o}function g(e,t){for(let n=0;n<t.length;n++)128===e.c&&(e.t+=e.c,l(e,!1),e.c=0),e.b[e.c++]=t[n]}function y(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;l(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n);return t}function b(e,t,n,o,s){n=n||64,e=r.normalizeInput(e),o&&(o=r.normalizeInput(o)),s&&(s=r.normalizeInput(s));const i=p(n,t,o,s);return g(i,e),y(i)}e.exports={blake2b:b,blake2bHex:function(e,t,n,o,s){const i=b(e,t,n,o,s);return r.toHex(i)},blake2bInit:p,blake2bUpdate:g,blake2bFinal:y}},5297:(e,t,n)=>{const r=n(9488);function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function s(e,t,n,r,o,s){u[e]=u[e]+u[t]+o,u[r]=i(u[r]^u[e],16),u[n]=u[n]+u[r],u[t]=i(u[t]^u[n],12),u[e]=u[e]+u[t]+s,u[r]=i(u[r]^u[e],8),u[n]=u[n]+u[r],u[t]=i(u[t]^u[n],7)}function i(e,t){return e>>>t^e<<32-t}const a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),u=new Uint32Array(16),h=new Uint32Array(16);function d(e,t){let n=0;for(n=0;n<8;n++)u[n]=e.h[n],u[n+8]=a[n];for(u[12]^=e.t,u[13]^=e.t/4294967296,t&&(u[14]=~u[14]),n=0;n<16;n++)h[n]=o(e.b,4*n);for(n=0;n<10;n++)s(0,4,8,12,h[c[16*n+0]],h[c[16*n+1]]),s(1,5,9,13,h[c[16*n+2]],h[c[16*n+3]]),s(2,6,10,14,h[c[16*n+4]],h[c[16*n+5]]),s(3,7,11,15,h[c[16*n+6]],h[c[16*n+7]]),s(0,5,10,15,h[c[16*n+8]],h[c[16*n+9]]),s(1,6,11,12,h[c[16*n+10]],h[c[16*n+11]]),s(2,7,8,13,h[c[16*n+12]],h[c[16*n+13]]),s(3,4,9,14,h[c[16*n+14]],h[c[16*n+15]]);for(n=0;n<8;n++)e.h[n]^=u[n]^u[n+8]}function l(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(a),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(f(r,t),r.c=64),r}function f(e,t){for(let n=0;n<t.length;n++)64===e.c&&(e.t+=e.c,d(e,!1),e.c=0),e.b[e.c++]=t[n]}function p(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;d(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n)&255;return t}function g(e,t,n){n=n||32,e=r.normalizeInput(e);const o=l(n,t);return f(o,e),p(o)}e.exports={blake2s:g,blake2sHex:function(e,t,n){const o=g(e,t,n);return r.toHex(o)},blake2sInit:l,blake2sUpdate:f,blake2sFinal:p}},1191:(e,t,n)=>{const r=n(8442),o=n(5297);e.exports={blake2b:r.blake2b,blake2bHex:r.blake2bHex,blake2bInit:r.blake2bInit,blake2bUpdate:r.blake2bUpdate,blake2bFinal:r.blake2bFinal,blake2s:o.blake2s,blake2sHex:o.blake2sHex,blake2sInit:o.blake2sInit,blake2sUpdate:o.blake2sUpdate,blake2sFinal:o.blake2sFinal}},9488:e=>{function t(e){return(4294967296+e).toString(16).substring(1)}e.exports={normalizeInput:function(e){let t;if(e instanceof Uint8Array)t=e;else{if("string"!=typeof e)throw new Error("Input must be an string, Buffer or Uint8Array");t=(new TextEncoder).encode(e)}return t},toHex:function(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")},debugPrint:function(e,n,r){let o="\n"+e+" = ";for(let s=0;s<n.length;s+=2){if(32===r)o+=t(n[s]).toUpperCase(),o+=" ",o+=t(n[s+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);o+=t(n[s+1]).toUpperCase(),o+=t(n[s]).toUpperCase()}s%6==4?o+="\n"+new Array(e.length+4).join(" "):s<n.length-2&&(o+=" ")}console.log(o)},testSpeed:function(e,t,n){let r=(new Date).getTime();const o=new Uint8Array(t);for(let e=0;e<t;e++)o[e]=e%256;const s=(new Date).getTime();console.log("Generated random input in "+(s-r)+"ms"),r=s;for(let s=0;s<n;s++){const n=e(o),s=(new Date).getTime(),i=s-r;r=s,console.log("Hashed in "+i+"ms: "+n.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(i/1e3)*100)/100+" MB PER SECOND")}}}},6154:e=>{"use strict";e.exports=async function*(e,t={}){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&n.cancel(),n.releaseLock()}}},1227:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(2447)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,n)=>{e.exports=function(e){function t(e){let n,o,s,i=null;function a(...e){if(!a.enabled)return;const r=a,o=Number(new Date),s=o-(n||o);r.diff=s,r.prev=n,r.curr=o,n=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,o)=>{if("%%"===n)return"%";i++;const s=t.formatters[o];if("function"==typeof s){const t=e[i];n=s.call(r,t),e.splice(i,1),i--}return n})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==t.namespaces&&(o=t.namespaces,s=t.enabled(e)),s),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},2114:e=>{"use strict";function t(e,t){for(const n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e}e.exports=function(e,n,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof n&&(r=n,n=""),n&&(r.code=n);try{return t(e,r)}catch(n){r.message=e.message,r.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),t(new o,r)}}},1476:e=>{"use strict";const t="[a-fA-F\\d:]",n=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",s=`\n(?:\n(?:${o}:){7}(?:${o}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${o}:){6}(?:${r}|:${o}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${o}:){5}(?::${r}|(?::${o}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${o}:){4}(?:(?::${o}){0,1}:${r}|(?::${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${o}:){3}(?:(?::${o}){0,2}:${r}|(?::${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${o}:){2}(?:(?::${o}){0,3}:${r}|(?::${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${o}:){1}(?:(?::${o}){0,4}:${r}|(?::${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${o}){0,5}:${r}|(?::${o}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp(`(?:^${r}$)|(?:^${s}$)`),a=new RegExp(`^${r}$`),c=new RegExp(`^${s}$`),u=e=>e&&e.exact?i:new RegExp(`(?:${n(e)}${r}${n(e)})|(?:${n(e)}${s}${n(e)})`,"g");u.v4=e=>e&&e.exact?a:new RegExp(`${n(e)}${r}${n(e)}`,"g"),u.v6=e=>e&&e.exact?c:new RegExp(`${n(e)}${s}${n(e)}`,"g"),e.exports=u},5003:(e,t,n)=>{"use strict";const r=n(1476),o=e=>r({exact:!0}).test(e);o.v4=e=>r.v4({exact:!0}).test(e),o.v6=e=>r.v6({exact:!0}).test(e),o.version=e=>o(e)?o.v4(e)?4:6:void 0,e.exports=o},4981:(e,t,n)=>{"use strict";const{base58btc:r}=n(9086),{base32:o}=n(2817),s=n(8924),{Multiaddr:i}=n(6584),a=n(9175),{CID:c}=n(1362),{URL:u}=n(7745),{toString:h}=n(2263),d=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,l=/^\/(ip[fn]s)\/([^/?#]+)/,f=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,p=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function g(e){try{return"string"==typeof e?Boolean(c.parse(e)):e instanceof Uint8Array?Boolean(c.decode(e)):Boolean(c.asCID(e))}catch(e){return!1}}function y(e){if(!e)return!1;if(i.isMultiaddr(e))return!0;try{return new i(e),!0}catch(e){return!1}}function b(e,t,n=1,r=2){const o=v(e);if(!o)return!1;const s=o.match(t);if(!s)return!1;if("ipfs"!==s[n])return!1;let i=s[r];return i&&t===f&&(i=i.toLowerCase()),g(i)}function m(e,t,n=1,r=2){const o=v(e);if(!o)return!1;const s=o.match(t);if(!s)return!1;if("ipns"!==s[n])return!1;let i=s[r];if(i&&t===f){if(i=i.toLowerCase(),g(i))return!0;try{!i.includes(".")&&i.includes("-")&&(i=i.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:e}=new u(`http://${i}`);return p.test(e)}catch(e){return!1}}return!0}function w(e){return"string"==typeof e}function v(e){return e instanceof Uint8Array?h(e,"base58btc"):!!w(e)&&e}const _=e=>b(e,f,2,1),E=e=>m(e,f,2,1),x=e=>_(e)||E(e),k=e=>b(e,d)||_(e),S=e=>m(e,d)||E(e),C=e=>k(e)||S(e)||x(e),T=e=>b(e,l)||m(e,l);e.exports={multihash:function(e){const t=v(e);try{s.decode(r.decode("z"+t))}catch{return!1}return!0},multiaddr:y,peerMultiaddr:function(e){return y(e)&&a.P2P.matches(e)},cid:g,base32cid:e=>function(e){try{o.decode(e)}catch{return!1}return!0}(e)&&g(e),ipfsSubdomain:_,ipnsSubdomain:E,subdomain:x,subdomainGatewayPattern:f,ipfsUrl:k,ipnsUrl:S,url:C,pathGatewayPattern:d,ipfsPath:e=>b(e,l),ipnsPath:e=>m(e,l),path:T,pathPattern:l,urlOrPath:e=>C(e)||T(e),cidPath:e=>w(e)&&!g(e)&&b(`/ipfs/${e}`,l)}},7745:(e,t,n)=>{"use strict";const{URLWithLegacySupport:r,format:o,URLSearchParams:s,defaultBase:i}=n(2049),a=n(5939);e.exports={URL:r,URLSearchParams:s,format:o,relative:a,defaultBase:i}},5939:(e,t,n)=>{"use strict";const{URLWithLegacySupport:r,format:o}=n(2049);e.exports=(e,t={},n={},s)=>{let i,a=t.protocol?t.protocol.replace(":",""):"http";a=(n[a]||s||a)+":";try{i=new r(e)}catch(e){i={}}const c=Object.assign({},t,{protocol:a||i.protocol,host:t.host||i.host});return new r(e,o(c)).toString()}},2049:e=>{"use strict";const t="undefined"!=typeof navigator&&"ReactNative"===navigator.product,n=self.URL,r=t?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"";e.exports={URLWithLegacySupport:class{constructor(e="",t=r){this.super=new n(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return n.createObjectURL(e)}static revokeObjectURL(e){n.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:r,format:function(e){if("string"==typeof e)return new n(e).toString();if(!(e instanceof n)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",n=e.auth?e.auth+"@":"",r=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"";return`${o}${t||n}${s||i+r}${e.path||u+a}${c}`}}}},9175:(e,t,n)=>{"use strict";const{Multiaddr:r}=n(6584),o=B("dns4"),s=B("dns6"),i=B("dnsaddr"),a=I(B("dns"),i,o,s),c=I(B("ip4"),B("ip6")),u=I(A(c,B("tcp")),A(a,B("tcp"))),h=A(c,B("udp")),d=A(h,B("utp")),l=A(h,B("quic")),f=I(A(u,B("ws")),A(a,B("ws"))),p=I(A(u,B("wss")),A(a,B("wss"))),g=I(A(u,B("http")),A(c,B("http")),A(a,B("http"))),y=I(A(u,B("https")),A(c,B("https")),A(a,B("https"))),b=I(A(f,B("p2p-webrtc-star"),B("p2p")),A(p,B("p2p-webrtc-star"),B("p2p")),A(f,B("p2p-webrtc-star")),A(p,B("p2p-webrtc-star"))),m=I(A(f,B("p2p-websocket-star"),B("p2p")),A(p,B("p2p-websocket-star"),B("p2p")),A(f,B("p2p-websocket-star")),A(p,B("p2p-websocket-star"))),w=I(A(g,B("p2p-webrtc-direct"),B("p2p")),A(y,B("p2p-webrtc-direct"),B("p2p")),A(g,B("p2p-webrtc-direct")),A(y,B("p2p-webrtc-direct"))),v=I(f,p,g,y,b,w,u,d,l,a),_=I(A(v,B("p2p-stardust"),B("p2p")),A(v,B("p2p-stardust"))),E=I(A(v,B("p2p")),b,w,B("p2p")),x=I(A(E,B("p2p-circuit"),E),A(E,B("p2p-circuit")),A(B("p2p-circuit"),E),A(v,B("p2p-circuit")),A(B("p2p-circuit"),v),B("p2p-circuit")),k=()=>I(A(x,k),x),S=k(),C=I(A(S,E,S),A(E,S),A(S,E),S,E);function T(e){return function(t){if(!r.isMultiaddr(t))try{t=new r(t)}catch(e){return!1}const n=e(t.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function A(...e){function t(t){if(t.length<e.length)return null;let n=t;return e.some((e=>(n="function"==typeof e?e().partialMatch(t):e.partialMatch(t),Array.isArray(n)&&(t=n),null===n))),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:T(t),partialMatch:t}}function I(...e){function t(t){let n=null;return e.some((e=>{const r="function"==typeof e?e().partialMatch(t):e.partialMatch(t);return!!r&&(n=r,!0)})),n}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:T(t),partialMatch:t}}function B(e){const t=e;return{toString:function(){return t},matches:function(e){let n;if("string"==typeof e||e instanceof Uint8Array)try{n=new r(e)}catch(e){return!1}else n=e;const o=n.protoNames();return 1===o.length&&o[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}e.exports={DNS:a,DNS4:o,DNS6:s,DNSADDR:i,IP:c,TCP:u,UDP:h,QUIC:l,UTP:d,HTTP:g,HTTPS:y,WebSockets:f,WebSocketsSecure:p,WebSocketStar:m,WebRTCStar:b,WebRTCDirect:w,Reliable:v,Stardust:_,Circuit:S,P2P:C,IPFS:C}},7824:e=>{var t=1e3,n=60*t,r=60*n,o=24*r;function s(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}e.exports=function(e,i){i=i||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*n;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===u&&isFinite(e))return i.long?(a=e,(c=Math.abs(a))>=o?s(a,c,o,"day"):c>=r?s(a,c,r,"hour"):c>=n?s(a,c,n,"minute"):c>=t?s(a,c,t,"second"):a+" ms"):function(e){var s=Math.abs(e);return s>=o?Math.round(e/o)+"d":s>=r?Math.round(e/r)+"h":s>=n?Math.round(e/n)+"m":s>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8190:(e,t,n)=>{"use strict";const r=n(9918),o=n(9768),s=n(4676),{concat:i}=n(605),{toString:a}=n(2263);function c(e){const t=[],n=e.split("/").slice(1);if(1===n.length&&""===n[0])return[];for(let r=0;r<n.length;r++){const s=n[r],i=o(s);if(0!==i.size){if(r++,r>=n.length)throw w("invalid address: "+e);if(i.path){t.push([s,m(n.slice(r).join("/"))]);break}t.push([s,n[r]])}else t.push([s])}return t}function u(e){const t=[];return e.map((e=>{const n=v(e);return t.push(n.name),e.length>1&&t.push(e[1]),null})),m(t.join("/"))}function h(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=v(e);return e.length>1?[t.code,r.toBytes(t.code,e[1])]:[t.code]}))}function d(e){return e.map((e=>{const t=v(e);return e[1]?[t.code,r.toString(t.code,e[1])]:[t.code]}))}function l(e){return y(i(e.map((e=>{const t=v(e);let n=Uint8Array.from(s.encode(t.code));return e.length>1&&(n=i([n,e[1]])),n}))))}function f(e,t){return e.size>0?e.size/8:0===e.size?0:s.decode(t)+s.decode.bytes}function p(e){const t=[];let n=0;for(;n<e.length;){const r=s.decode(e,n),i=s.decode.bytes,c=f(o(r),e.slice(n+i));if(0===c){t.push([r]),n+=i;continue}const u=e.slice(n+i,n+i+c);if(n+=c+i,n>e.length)throw w("Invalid address Uint8Array: "+a(e,"base16"));t.push([r,u])}return t}function g(e){return l(h(c(e=m(e))))}function y(e){const t=b(e);if(t)throw t;return Uint8Array.from(e)}function b(e){try{p(e)}catch(e){return e}}function m(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function w(e){return new Error("Error parsing address: "+e)}function v(e){return o(e[0])}e.exports={stringToStringTuples:c,stringTuplesToString:u,tuplesToStringTuples:d,stringTuplesToTuples:h,bytesToTuples:p,tuplesToBytes:l,bytesToString:function(e){return u(d(p(e)))},stringToBytes:g,fromString:function(e){return g(e)},fromBytes:y,validateBytes:b,isValidBytes:function(e){return void 0===b(e)},cleanPath:m,ParseError:w,protoFromTuple:v,sizeForAddr:f}},9918:(e,t,n)=>{"use strict";const r=n(3692),o=n(9768),{CID:s}=n(1362),{base32:i}=n(2817),{base58btc:a}=n(9086),c=n(8924),u=n(4676),{toString:h}=n(2263),{fromString:d}=n(2217),{concat:l}=n(605);function f(e,t){return t instanceof Uint8Array?f.toString(e,t):f.toBytes(e,t)}function p(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function g(e){return new DataView(e.buffer).getUint16(e.byteOffset)}e.exports=f,f.toString=function(e,t){switch(o(e).code){case 4:case 41:return function(e){const t=r.toString(e);if(!t||!r.isIP(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return g(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(e){const t=u.decode(e);if((e=e.slice(u.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return h(e)}(t);case 421:return function(e){const t=u.decode(e),n=e.slice(u.decode.bytes);if(n.length!==t)throw new Error("inconsistent lengths");return h(n,"base58btc")}(t);case 444:case 445:return function(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2);return h(t,"base32")+":"+g(n)}(t);default:return h(t,"base16")}},f.toBytes=function(e,t){switch(o(e).code){case 4:case 41:return function(e){if(!r.isIP(e))throw new Error("invalid ip address");return r.toBytes(e)}(t);case 6:case 273:case 33:case 132:return p(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(e){const t=d(e),n=Uint8Array.from(u.encode(t.length));return l([n,t],n.length+t.length)}(t);case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?c.decode(a.decode(`z${e}`)).bytes:s.parse(e).multihash.bytes;const n=Uint8Array.from(u.encode(t.length));return l([n,t],n.length+t.length)}(t);case 444:return function(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(16!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion address.");const n=i.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=p(r);return l([n,o],n.length+o.length)}(t);case 445:return function(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(56!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion3 address.");const n=i.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=p(r);return l([n,o],n.length+o.length)}(t);default:return d(t,"base16")}}},6584:(e,t,n)=>{"use strict";const r=n(8190),o=n(9768),s=n(4676),{CID:i}=n(1362),{base58btc:a}=n(9086),c=n(2114),u=Symbol.for("nodejs.util.inspect.custom"),{toString:h}=n(2263),{equals:d}=n(9588),l=new Map,f=Symbol.for("@multiformats/js-multiaddr/multiaddr");class p{constructor(e){if(null==e&&(e=""),Object.defineProperty(this,f,{value:!0}),e instanceof Uint8Array)this.bytes=r.fromBytes(e);else if("string"==typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=r.fromString(e)}else{if(!p.isMultiaddr(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.fromBytes(e.bytes)}}toString(){return r.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const e={},t=this.toString().split("/");return e.family="ip4"===t[1]?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map((e=>Object.assign({},o(e))))}protoCodes(){const e=[],t=this.bytes;let n=0;for(;n<t.length;){const i=s.decode(t,n),a=s.decode.bytes,c=o(i);n+=r.sizeForAddr(c,t.slice(n+a))+a,e.push(i)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return r.bytesToTuples(this.bytes)}stringTuples(){const e=r.bytesToTuples(this.bytes);return r.tuplesToStringTuples(e)}encapsulate(e){return e=new p(e),new p(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new p(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new p(r.tuplesToBytes(t.slice(0,n)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===o.names.ipfs.code)),t=e.pop();if(t&&t[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?h(a.decode(`z${e}`),"base58btc"):h(i.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>!!o(e[0]).path))[0][1],e||(e=null)}catch(t){e=null}return e}equals(e){return d(this.bytes,e.bytes)}async resolve(){const e=this.protos().find((e=>e.resolvable));if(!e)return[this];const t=l.get(e.name);if(!t)throw c(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map((e=>new p(e)))}nodeAddress(){const e=this.protoCodes(),t=this.protoNames(),n=this.toString().split("/").slice(1);if(n.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==e[0]&&41!==e[0]&&54!==e[0]&&55!==e[0])throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==n[2]&&"udp"!==n[2])throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===e[0]||55===e[0]?6:4,address:n[1],port:parseInt(n[3])}}isThinWaistAddress(e){const t=(e||this).protos();return!(2!==t.length||4!==t[0].code&&41!==t[0].code||6!==t[1].code&&273!==t[1].code)}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let n;switch(e.family){case 4:n="ip4";break;case 6:n="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new p("/"+[n,e.address,t,e.port].join("/"))}static isName(e){return!!p.isMultiaddr(e)&&e.protos().some((e=>e.resolvable))}static isMultiaddr(e){return e instanceof p||Boolean(e&&e[f])}[u](){return"<Multiaddr "+h(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+h(this.bytes,"base16")+" - "+r.bytesToString(this.bytes)+">"}}p.protocols=o,p.resolvers=l,e.exports={Multiaddr:p,multiaddr:function(e){return new p(e)},protocols:o,resolvers:l}},3692:(e,t,n)=>{"use strict";const r=n(5003),{toString:o}=n(2263),s=r,i=r.v4,a=r.v6,c=function(e,t,n){let r;if(n=~~n,i(e))r=t||new Uint8Array(n+4),e.split(/\./g).map((function(e){r[n++]=255&parseInt(e,10)}));else if(a(e)){const s=e.split(":",8);let a;for(a=0;a<s.length;a++){let e;i(s[a])&&(e=c(s[a]),s[a]=o(e.slice(0,2),"base16")),e&&++a<8&&s.splice(a,0,o(e.slice(2,4),"base16"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(a=0;a<s.length&&""!==s[a];a++);const e=[a,"1"];for(a=9-s.length;a>0;a--)e.push("0");s.splice.apply(s,e)}for(r=t||new Uint8Array(n+16),a=0;a<s.length;a++){const e=parseInt(s[a],16);r[n++]=e>>8&255,r[n++]=255&e}}if(!r)throw Error("Invalid ip address: "+e);return r};e.exports={isIP:s,isV4:i,isV6:a,toBytes:c,toString:function(e,t,n){t=~~t,n=n||e.length-t;const r=[];let o;const s=new DataView(e.buffer);if(4===n){for(let o=0;o<n;o++)r.push(e[t+o]);o=r.join(".")}else if(16===n){for(let e=0;e<n;e+=2)r.push(s.getUint16(t+e).toString(16));o=r.join(":"),o=o.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),o=o.replace(/:{3,4}/,"::")}return o}}},9768:e=>{"use strict";function t(e){if("number"==typeof e){if(t.codes[e])return t.codes[e];throw new Error("no protocol with code: "+e)}if("string"==typeof e){if(t.names[e])return t.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}const n=-1;function r(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}t.lengthPrefixedVarSize=n,t.V=n,t.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,n,"ip6zone"],[53,n,"dns","resolvable"],[54,n,"dns4","resolvable"],[55,n,"dns6","resolvable"],[56,n,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,n,"unix",!1,"path"],[421,n,"ipfs"],[421,n,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,n,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,n,"memory"]],t.names={},t.codes={},t.table.map((e=>{const n=r.apply(null,e);return t.codes[n.code]=n,t.names[n.name]=n,null})),t.object=r,e.exports=t},469:(e,t,n)=>{e.exports=n(8027)},8027:function(e,t){!function(n,r){"use strict";var o={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function i(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function c(e){return e=i(e^=e>>>16,2246822507),(e=i(e^=e>>>13,3266489909))^e>>>16}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function h(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function d(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function l(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function f(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=f(e,[0,e[0]>>>1]),e=f(e=h(e,[4283543511,3981806797]),[0,e[0]>>>1]),f(e=h(e,[3301882366,444984403]),[0,e[0]>>>1])}o.x86.hash32=function(e,t){if(o.inputValidation&&!s(e))return r;t=t||0;for(var n=e.length%4,u=e.length-n,h=t,d=0,l=3432918353,f=461845907,p=0;p<u;p+=4)d=i(d=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24,l),d=i(d=a(d,15),f),h=i(h=a(h^=d,13),5)+3864292196;switch(d=0,n){case 3:d^=e[p+2]<<16;case 2:d^=e[p+1]<<8;case 1:d=i(d^=e[p],l),h^=d=i(d=a(d,15),f)}return(h=c(h^=e.length))>>>0},o.x86.hash128=function(e,t){if(o.inputValidation&&!s(e))return r;t=t||0;for(var n=e.length%16,u=e.length-n,h=t,d=t,l=t,f=t,p=0,g=0,y=0,b=0,m=597399067,w=2869860233,v=951274213,_=2716044179,E=0;E<u;E+=16)p=e[E]|e[E+1]<<8|e[E+2]<<16|e[E+3]<<24,g=e[E+4]|e[E+5]<<8|e[E+6]<<16|e[E+7]<<24,y=e[E+8]|e[E+9]<<8|e[E+10]<<16|e[E+11]<<24,b=e[E+12]|e[E+13]<<8|e[E+14]<<16|e[E+15]<<24,p=a(p=i(p,m),15),h=a(h^=p=i(p,w),19),h=i(h+=d,5)+1444728091,g=a(g=i(g,w),16),d=a(d^=g=i(g,v),17),d=i(d+=l,5)+197830471,y=a(y=i(y,v),17),l=a(l^=y=i(y,_),15),l=i(l+=f,5)+2530024501,b=a(b=i(b,_),18),f=a(f^=b=i(b,m),13),f=i(f+=h,5)+850148119;switch(p=0,g=0,y=0,b=0,n){case 15:b^=e[E+14]<<16;case 14:b^=e[E+13]<<8;case 13:b=i(b^=e[E+12],_),f^=b=i(b=a(b,18),m);case 12:y^=e[E+11]<<24;case 11:y^=e[E+10]<<16;case 10:y^=e[E+9]<<8;case 9:y=i(y^=e[E+8],v),l^=y=i(y=a(y,17),_);case 8:g^=e[E+7]<<24;case 7:g^=e[E+6]<<16;case 6:g^=e[E+5]<<8;case 5:g=i(g^=e[E+4],w),d^=g=i(g=a(g,16),v);case 4:p^=e[E+3]<<24;case 3:p^=e[E+2]<<16;case 2:p^=e[E+1]<<8;case 1:p=i(p^=e[E],m),h^=p=i(p=a(p,15),w)}return h^=e.length,h+=d^=e.length,h+=l^=e.length,d+=h+=f^=e.length,l+=h,f+=h,h=c(h),h+=d=c(d),h+=l=c(l),d+=h+=f=c(f),l+=h,f+=h,("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)},o.x64.hash128=function(e,t){if(o.inputValidation&&!s(e))return r;t=t||0;for(var n=e.length%16,i=e.length-n,a=[0,t],c=[0,t],g=[0,0],y=[0,0],b=[2277735313,289559509],m=[1291169091,658871167],w=0;w<i;w+=16)g=[e[w+4]|e[w+5]<<8|e[w+6]<<16|e[w+7]<<24,e[w]|e[w+1]<<8|e[w+2]<<16|e[w+3]<<24],y=[e[w+12]|e[w+13]<<8|e[w+14]<<16|e[w+15]<<24,e[w+8]|e[w+9]<<8|e[w+10]<<16|e[w+11]<<24],g=d(g=h(g,b),31),a=u(a=d(a=f(a,g=h(g,m)),27),c),a=u(h(a,[0,5]),[0,1390208809]),y=d(y=h(y,m),33),c=u(c=d(c=f(c,y=h(y,b)),31),a),c=u(h(c,[0,5]),[0,944331445]);switch(g=[0,0],y=[0,0],n){case 15:y=f(y,l([0,e[w+14]],48));case 14:y=f(y,l([0,e[w+13]],40));case 13:y=f(y,l([0,e[w+12]],32));case 12:y=f(y,l([0,e[w+11]],24));case 11:y=f(y,l([0,e[w+10]],16));case 10:y=f(y,l([0,e[w+9]],8));case 9:y=h(y=f(y,[0,e[w+8]]),m),c=f(c,y=h(y=d(y,33),b));case 8:g=f(g,l([0,e[w+7]],56));case 7:g=f(g,l([0,e[w+6]],48));case 6:g=f(g,l([0,e[w+5]],40));case 5:g=f(g,l([0,e[w+4]],32));case 4:g=f(g,l([0,e[w+3]],24));case 3:g=f(g,l([0,e[w+2]],16));case 2:g=f(g,l([0,e[w+1]],8));case 1:g=h(g=f(g,[0,e[w]]),b),a=f(a,g=h(g=d(g,31),m))}return a=u(a=f(a,[0,e.length]),c=f(c,[0,e.length])),c=u(c,a),a=u(a=p(a),c=p(c)),c=u(c,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=o),t.murmurHash3=o}()},8939:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,s||e,i),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,s,i){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,h=this._events[a],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,o),!0;case 5:return h.fn.call(h.context,t,r,o,s),!0;case 6:return h.fn.call(h.context,t,r,o,s,i),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];h.fn.apply(h.context,c)}else{var l,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),d){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,r);break;case 4:h[u].fn.call(h[u].context,t,r,o);break;default:if(!c)for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];h[u].fn.apply(h[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return i(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||i(this,s);else{for(var c=0,u=[],h=a.length;c<h;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[s]=1===u.length?u[0]:u:i(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},544:e=>{"use strict";function t(e,t){return e+n(t)}function n(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function r(e,t){return e[0]-t[0]}function o(e){return e[1]}e.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(void 0===t)-1!==n&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let r=!1;-1===n?(n=this._data.length,this._setBit(e),this._changedData=!0):r=!0,this._setInternalPos(n,e,t,r),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,r=t;for(;n<this.length;)r=e(r,this.get(n),n),n++;return r}find(e){let t,n,r=0;for(;r<this.length&&!t;)n=this.get(r),t=e(n),r++;return t?n:void 0}_internalPositionFor(e,r){const o=this._bytePosFor(e,r);if(o>=this._bitArrays.length)return-1;const s=this._bitArrays[o],i=e-7*o;return(s&1<<i)>0?this._bitArrays.slice(0,o).reduce(t,0)+n(s&~(4294967295<<i+1))-1:-1}_bytePosFor(e,t){const n=Math.floor(e/7),r=n+1;for(;!t&&this._bitArrays.length<r;)this._bitArrays.push(0);return n}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,n,r){const o=this._data,s=[t,n];if(r)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=t)o.push(s);else if(o[0][0]<=t)o.unshift(s);else{const e=Math.round(o.length/2);this._data=o.slice(0,e).concat(s).concat(o.slice(e))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(r),this._changedData=!1}bitField(){const e=[];let t,n=8,r=0,o=0;const s=this._bitArrays.slice();for(;s.length||r;){0===r&&(t=s.shift(),r=7);const i=Math.min(r,n);o|=(t&~(255<<i))<<8-n,t>>>=i,r-=i,n-=i,n&&(r||s.length)||(e.push(o),o=0,n=8)}for(var i=e.length-1;i>0&&0===e[i];i--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(o)}}},6988:e=>{e.exports=function e(t,n){var r,o=0,s=0,i=n=n||0,a=t.length;do{if(i>=a||s>49)throw e.bytes=0,new RangeError("Could not decode varint");r=t[i++],o+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return e.bytes=i-n,o}},1312:e=>{e.exports=function e(n,r,o){if(Number.MAX_SAFE_INTEGER&&n>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");r=r||[];for(var s=o=o||0;n>=t;)r[o++]=255&n|128,n/=128;for(;-128&n;)r[o++]=255&n|128,n>>>=7;return r[o]=0|n,e.bytes=o-s+1,r};var t=Math.pow(2,31)},4676:(e,t,n)=>{e.exports={encode:n(1312),decode:n(6988),encodingLength:n(82)}},82:e=>{var t=Math.pow(2,7),n=Math.pow(2,14),r=Math.pow(2,21),o=Math.pow(2,28),s=Math.pow(2,35),i=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),u=Math.pow(2,63);e.exports=function(e){return e<t?1:e<n?2:e<r?3:e<o?4:e<s?5:e<i?6:e<a?7:e<c?8:e<u?9:10}},9880:(e,t,n)=>{"use strict";n.d(t,{kU:()=>h,Dp:()=>u,ET:()=>d});var r=n(5934);class o{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class s{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if("string"==typeof e){if(e[0]===this.prefix)return this.baseDecode(e.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(e){return a(this,e)}}class i{constructor(e){this.decoders=e}or(e){return a(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const a=(e,t)=>new i({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class c{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new o(e,t,n),this.decoder=new s(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const u=({name:e,prefix:t,encode:n,decode:r})=>new c(e,t,n,r),h=({prefix:e,name:t,alphabet:n})=>{const{encode:o,decode:s}=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var h=n[e.charCodeAt(t)];if(255===h)return;for(var d=0,l=s-1;(0!==h||d<o)&&-1!==l;l--,d++)h+=a*i[l]>>>0,i[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=s-o;f!==s&&0===i[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=i[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*h+1>>>0,u=new Uint8Array(i);o!==s;){for(var d=t[o],l=0,f=i-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=l,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}}(n,t);return u({prefix:e,name:t,encode:o,decode:e=>(0,r.coerce)(s(e))})},d=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>u({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(i&&(s+=t[o&a<<n-i]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=o[e[t]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);c=c<<n|s,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i})(t,r,n,e)})},2817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base32:()=>o,base32upper:()=>s,base32pad:()=>i,base32padupper:()=>a,base32hex:()=>c,base32hexupper:()=>u,base32hexpad:()=>h,base32hexpadupper:()=>d,base32z:()=>l});var r=n(9880);const o=(0,r.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,r.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),i=(0,r.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,r.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,r.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=(0,r.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),h=(0,r.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),d=(0,r.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),l=(0,r.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},9086:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base58btc:()=>o,base58flickr:()=>s});var r=n(9880);const o=(0,r.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,r.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},9885:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base64:()=>o,base64pad:()=>s,base64url:()=>i,base64urlpad:()=>a});var r=n(9880);const o=(0,r.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,r.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),i=(0,r.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,r.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},5934:(e,t,n)=>{"use strict";n.r(t),n.d(t,{equals:()=>i,coerce:()=>a,isBinary:()=>c,fromHex:()=>s,toHex:()=>o,fromString:()=>u,toString:()=>h,empty:()=>r});const r=new Uint8Array(0),o=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),s=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r},i=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},a=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},c=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),u=e=>(new TextEncoder).encode(e),h=e=>(new TextDecoder).decode(e)},1362:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CID:()=>c});var r=n(4714),o=n(8924),s=n(9086),i=n(2817),a=n(5934);class c{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:b,byteLength:b,code:y,version:y,multihash:y,bytes:y,_baseCache:b,asCID:b})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==l)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==f)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=o.create(e,t);return c.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&o.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:r}=this;return 0===n?h(t,r,e||s.base58btc.encoder):d(t,r,e||i.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return m(/^0\.0/,w),!(!e||!e[g]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof c)return e;if(null!=e&&e.asCID===e){const{version:t,code:n,multihash:r,bytes:o}=e;return new c(t,n,r,o||p(t,n,r.bytes))}if(null!=e&&!0===e[g]){const{version:t,multihash:n,code:r}=e,s=o.decode(n);return c.create(t,r,s)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==l)throw new Error(`Version 0 CID must use dag-pb (code: ${l}) block encoding`);return new c(e,t,n,n.bytes);case 1:{const r=p(e,t,n.bytes);return new c(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return c.create(0,l,e)}static createV1(e,t){return c.create(1,e,t)}static decode(e){const[t,n]=c.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=c.inspectBytes(e),n=t.size-t.multihashSize,r=(0,a.coerce)(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=r.subarray(t.multihashSize-t.digestSize),i=new o.Digest(t.multihashCode,t.digestSize,s,r);return[0===t.version?c.createV0(i):c.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,o]=r.Jx(e.subarray(t));return t+=o,n};let o=n(),s=l;if(18===o?(o=0,t=0):1===o&&(s=n()),0!==o&&1!==o)throw new RangeError(`Invalid CID version ${o}`);const i=t,a=n(),c=n(),u=t+c;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:u-i,size:u}}static parse(e,t){const[n,r]=u(e,t),o=c.decode(r);return o._baseCache.set(n,e),o}}const u=(e,t)=>{switch(e[0]){case"Q":{const n=t||s.base58btc;return[s.base58btc.prefix,n.decode(`${s.base58btc.prefix}${e}`)]}case s.base58btc.prefix:{const n=t||s.base58btc;return[s.base58btc.prefix,n.decode(e)]}case i.base32.prefix:{const n=t||i.base32;return[i.base32.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},h=(e,t,n)=>{const{prefix:r}=n;if(r!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o},d=(e,t,n)=>{const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o},l=112,f=18,p=(e,t,n)=>{const o=r.P$(e),s=o+r.P$(t),i=new Uint8Array(s+n.byteLength);return r.mL(e,i,0),r.mL(t,i,o),i.set(n,s),i},g=Symbol.for("@ipld/js-cid/CID"),y={writable:!1,configurable:!1,enumerable:!0},b={writable:!1,enumerable:!1,configurable:!1},m=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},w="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},8924:(e,t,n)=>{"use strict";n.r(t),n.d(t,{create:()=>s,decode:()=>i,equals:()=>a,Digest:()=>c});var r=n(5934),o=n(4714);const s=(e,t)=>{const n=t.byteLength,r=o.P$(e),s=r+o.P$(n),i=new Uint8Array(s+n);return o.mL(e,i,0),o.mL(n,i,r),i.set(t,s),new c(e,n,t,i)},i=e=>{const t=(0,r.coerce)(e),[n,s]=o.Jx(t),[i,a]=o.Jx(t.subarray(s)),u=t.subarray(s+a);if(u.byteLength!==i)throw new Error("Incorrect length");return new c(n,i,u,t)},a=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&(0,r.equals)(e.bytes,t.bytes);class c{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}},7225:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(8924);const o=({name:e,code:t,encode:n})=>new s(e,t,n);class s{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?r.create(this.code,t):t.then((e=>r.create(this.code,e)))}throw Error("Unknown type, must be binary type")}}},6441:(e,t,n)=>{"use strict";n.d(t,{k0:()=>r.CID,aI:()=>o});var r=n(1362),o=(n(4714),n(5934));n(7225),n(8924)},4714:(e,t,n)=>{"use strict";n.d(t,{Jx:()=>p,mL:()=>g,P$:()=>y});var r=Math.pow(2,31),o=Math.pow(2,7),s=Math.pow(2,14),i=Math.pow(2,21),a=Math.pow(2,28),c=Math.pow(2,35),u=Math.pow(2,42),h=Math.pow(2,49),d=Math.pow(2,56),l=Math.pow(2,63);const f={encode:function e(t,n,o){n=n||[];for(var s=o=o||0;t>=r;)n[o++]=255&t|128,t/=128;for(;-128&t;)n[o++]=255&t|128,t>>>=7;return n[o]=0|t,e.bytes=o-s+1,n},decode:function e(t,n){var r,o=0,s=0,i=n=n||0,a=t.length;do{if(i>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[i++],o+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return e.bytes=i-n,o},encodingLength:function(e){return e<o?1:e<s?2:e<i?3:e<a?4:e<c?5:e<u?6:e<h?7:e<d?8:e<l?9:10}},p=e=>[f.decode(e),f.decode.bytes],g=(e,t,n=0)=>(f.encode(e,t,n),t),y=e=>f.encodingLength(e)},605:(e,t,n)=>{"use strict";function r(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}n.r(t),n.d(t,{concat:()=>r})},9588:(e,t,n)=>{"use strict";function r(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}n.r(t),n.d(t,{equals:()=>r})},2217:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fromString:()=>o});var r=n(2547);function o(e,t="utf8"){const n=r.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}},2263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{toString:()=>o});var r=n(2547);function o(e,t="utf8"){const n=r.Z[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}},2547:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var r={};n.r(r),n.d(r,{identity:()=>g});var o={};n.r(o),n.d(o,{base2:()=>y});var s={};n.r(s),n.d(s,{base8:()=>b});var i={};n.r(i),n.d(i,{base10:()=>m});var a={};n.r(a),n.d(a,{base16:()=>w,base16upper:()=>v});var c={};n.r(c),n.d(c,{base36:()=>E,base36upper:()=>x});var u={};n.r(u),n.d(u,{sha256:()=>A,sha512:()=>I});var h={};n.r(h),n.d(h,{identity:()=>U});var d={};n.r(d),n.d(d,{code:()=>R,decode:()=>O,encode:()=>P,name:()=>N});var l={};n.r(l),n.d(l,{code:()=>j,decode:()=>F,encode:()=>z,name:()=>M});var f=n(9880),p=n(5934);const g=(0,f.Dp)({prefix:"\0",name:"identity",encode:e=>(0,p.toString)(e),decode:e=>(0,p.fromString)(e)}),y=(0,f.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),b=(0,f.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),m=(0,f.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),w=(0,f.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),v=(0,f.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _=n(2817);const E=(0,f.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),x=(0,f.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var k=n(9086),S=n(9885),C=n(7225);const T=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),A=(0,C.D)({name:"sha2-256",code:18,encode:T("SHA-256")}),I=(0,C.D)({name:"sha2-512",code:19,encode:T("SHA-512")});var B=n(8924);const D=p.coerce,U={code:0,name:"identity",encode:D,digest:e=>B.create(0,D(e))},N="raw",R=85,P=e=>(0,p.coerce)(e),O=e=>(0,p.coerce)(e),L=new TextEncoder,$=new TextDecoder,M="json",j=512,z=e=>L.encode(JSON.stringify(e)),F=e=>JSON.parse($.decode(e));n(6441);const G={...r,...o,...s,...i,...a,..._,...c,...k,...S};function V(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const H=V("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),q=V("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Y={utf8:H,"utf-8":H,hex:G.base16,latin1:q,ascii:q,binary:q,...G}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{coerce:()=>Zn,empty:()=>Jn,equals:()=>Qn,fromHex:()=>Xn,fromString:()=>tr,isBinary:()=>er,toHex:()=>Kn,toString:()=>nr});var t={};n.r(t),n.d(t,{code:()=>bs,decode:()=>ws,encode:()=>ms,name:()=>ys});var r={};n.r(r),n.d(r,{code:()=>ti,createLink:()=>Zs,createNode:()=>Qs,decode:()=>ri,encode:()=>ni,name:()=>ei,prepare:()=>Ks,validate:()=>Xs});var o={};n.r(o),n.d(o,{code:()=>pi,decode:()=>yi,encode:()=>gi,name:()=>fi});var s={};n.r(s),n.d(s,{base10:()=>eu});var i={};n.r(i),n.d(i,{base16:()=>tu,base16upper:()=>nu});var a={};n.r(a),n.d(a,{base2:()=>ru});var c={};n.r(c),n.d(c,{base256emoji:()=>au});var u={};n.r(u),n.d(u,{base32:()=>cu,base32hex:()=>lu,base32hexpad:()=>pu,base32hexpadupper:()=>gu,base32hexupper:()=>fu,base32pad:()=>hu,base32padupper:()=>du,base32upper:()=>uu,base32z:()=>yu});var h={};n.r(h),n.d(h,{base36:()=>bu,base36upper:()=>mu});var d={};n.r(d),n.d(d,{base58btc:()=>wu,base58flickr:()=>vu});var l={};n.r(l),n.d(l,{base64:()=>_u,base64pad:()=>Eu,base64url:()=>xu,base64urlpad:()=>ku});var f={};n.r(f),n.d(f,{base8:()=>Su});var p={};n.r(p),n.d(p,{identity:()=>Cu});var g={};n.r(g),n.d(g,{code:()=>Bu,decode:()=>Uu,encode:()=>Du,name:()=>Iu});var y={};n.r(y),n.d(y,{code:()=>Ru,decode:()=>Ou,encode:()=>Pu,name:()=>Nu});var b={};n.r(b),n.d(b,{identity:()=>eh});var m={};n.r(m),n.d(m,{sha256:()=>oh,sha512:()=>sh});var w={};n.r(w),n.d(w,{base10:()=>Sd});var v={};n.r(v),n.d(v,{base16:()=>Cd,base16upper:()=>Td});var _={};n.r(_),n.d(_,{base2:()=>Ad});var E={};n.r(E),n.d(E,{base256emoji:()=>Ud});var x={};n.r(x),n.d(x,{base32:()=>Nd,base32hex:()=>Ld,base32hexpad:()=>Md,base32hexpadupper:()=>jd,base32hexupper:()=>$d,base32pad:()=>Pd,base32padupper:()=>Od,base32upper:()=>Rd,base32z:()=>zd});var k={};n.r(k),n.d(k,{base36:()=>Fd,base36upper:()=>Gd});var S={};n.r(S),n.d(S,{base58btc:()=>Vd,base58flickr:()=>Hd});var C={};n.r(C),n.d(C,{base64:()=>qd,base64pad:()=>Yd,base64url:()=>Wd,base64urlpad:()=>Jd});var T={};n.r(T),n.d(T,{base8:()=>Kd});var A={};n.r(A),n.d(A,{identity:()=>Xd});var I={};n.r(I),n.d(I,{code:()=>tl,decode:()=>rl,encode:()=>nl,name:()=>el});var B={};n.r(B),n.d(B,{code:()=>sl,decode:()=>al,encode:()=>il,name:()=>ol});var D={};n.r(D),n.d(D,{identity:()=>Sl});var U={};n.r(U),n.d(U,{sha256:()=>Il,sha512:()=>Bl});var N={};n.r(N),n.d(N,{code:()=>ap,decode:()=>up,encode:()=>cp,name:()=>ip});var R={};n.r(R),n.d(R,{code:()=>fp,decode:()=>gp,encode:()=>pp,name:()=>lp});const P=Object.prototype.toString;function O(e){switch(P.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return H(e,Error)}}function L(e,t){return P.call(e)===`[object ${t}]`}function $(e){return L(e,"ErrorEvent")}function M(e){return L(e,"DOMError")}function j(e){return L(e,"String")}function z(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function F(e){return L(e,"Object")}function G(e){return"undefined"!=typeof Event&&H(e,Event)}function V(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function H(e,t){try{return e instanceof t}catch(e){return!1}}function q(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}var Y=n(1235);const W=(0,Y.Rf)();function J(e,t={}){try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const h=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&s++<r&&(u=K(n,h),!("html"===u||s>1&&i+o.length*c+u.length>=d));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(e){return"<unknown>"}}function K(e,t){const n=e,r=[];let o,s,i,a,c;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),o=n.className,o&&j(o))for(s=o.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const h=["aria-label","type","name","title","alt"];for(c=0;c<h.length;c++)i=h[c],a=n.getAttribute(i),a&&r.push(`[${i}="${a}"]`);return r.join("")}function X(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Q(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{q(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function Z(e,t=[],n=!1){return t.some((t=>function(e,t,n=!1){return!!j(e)&&(L(t,"RegExp")?t.test(e):!!j(t)&&(n?e===t:e.includes(t)))}(e,t,n)))}function ee(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);if("function"==typeof o)try{ne(o,r)}catch(e){}e[t]=o}function te(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function ne(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,te(e,"__sentry_original__",t)}function re(e){return e.__sentry_original__}function oe(e){if(O(e))return{message:e.message,name:e.name,stack:e.stack,...ie(e)};if(G(e)){const t={type:e.type,target:se(e.target),currentTarget:se(e.currentTarget),...ie(e)};return"undefined"!=typeof CustomEvent&&H(e,CustomEvent)&&(t.detail=e.detail),t}return e}function se(e){try{return"undefined"!=typeof Element&&H(e,Element)?J(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function ie(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function ae(e){return ce(e,new Map)}function ce(e,t){if(F(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=ce(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(ce(e,t))})),r}return e}function ue(){const e=Y.n2,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>t.getRandomValues(new Uint8Array(1))[0])}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function he(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function de(e){const{message:t,event_id:n}=e;if(t)return t;const r=he(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function le(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function fe(e,t){const n=he(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function pe(e){if(e&&e.__sentry_captured__)return!0;try{te(e,"__sentry_captured__",!0)}catch(e){}return!1}function ge(e){return Array.isArray(e)?e:[e]}const ye=["debug","info","warn","error","log","assert","trace"],be={};function me(e){if(!("console"in Y.n2))return e();const t=Y.n2.console,n={},r=Object.keys(be);r.forEach((e=>{const r=be[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const we=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?ye.forEach((n=>{t[n]=(...t)=>{e&&me((()=>{Y.n2.console[n](`Sentry Logger [${n}]:`,...t)}))}})):ye.forEach((e=>{t[e]=()=>{}})),t}();var ve=n(1170);const _e="production";var Ee;function xe(e){return new Se((t=>{t(e)}))}function ke(e){return new Se(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(Ee||(Ee={}));class Se{constructor(e){Se.prototype.__init.call(this),Se.prototype.__init2.call(this),Se.prototype.__init3.call(this),Se.prototype.__init4.call(this),this._state=Ee.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new Se(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new Se(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Ee.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Ee.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Ee.PENDING&&(V(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Ee.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Ee.RESOLVED&&e[1](this._value),this._state===Ee.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function Ce(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,ve.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ue()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class Te{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Be()}static clone(e){const t=new Te;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&Ce(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof Te?t:this}return e instanceof Te?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):F(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Be(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:(0,ve.yW)(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const n=t.name;n&&(e.tags={transaction:n,...e.tags})}}this._applyFingerprint(e);const n=this._getBreadcrumbs(),r=[...e.breadcrumbs||[],...n];return e.breadcrumbs=r.length>0?r:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...Ae(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyEventProcessors(e,t,n,r=0){return new Se(((o,s)=>{const i=e[r];if(null===t||"function"!=typeof i)o(t);else{const a=i({...t},n);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.id&&null===a&&we.log(`Event processor "${i.id}" dropped event`),V(a)?a.then((t=>this._notifyEventProcessors(e,t,n,r+1).then(o))).then(null,s):this._notifyEventProcessors(e,a,n,r+1).then(o).then(null,s)}}))}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?ge(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Ae(){return(0,Y.YO)("globalEventProcessors",(()=>[]))}function Ie(e){Ae().push(e)}function Be(){return{traceId:ue(),spanId:ue().substring(16)}}const De=100;class Ue{constructor(e,t=new Te,n=4){this._version=n,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Te.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:ue(),r=new Error("Sentry syntheticException");return this._withClient(((o,s)=>{o.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},s)})),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:ue(),o=new Error(e);return this._withClient(((s,i)=>{s.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},i)})),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:ue();return e.type||(this._lastEventId=n),this._withClient(((r,o)=>{r.captureEvent(e,{...t,event_id:n},o)})),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=De}=r.getOptions&&r.getOptions()||{};if(s<=0)return;const i={timestamp:(0,ve.yW)(),...e},a=o?me((()=>o(i,t))):i;null!==a&&(r.emit&&r.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,s))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Re(this);try{e(this)}finally{Re(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||n||(this.getClient()?console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):console.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),Ce(e,n)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:o=_e}=n&&n.getOptions()||{},{userAgent:s}=Y.n2.navigator||{},i=function(e){const t=(0,ve.ph)(),n={sid:ue(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return ae({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Ce(n,e),n}({release:r,environment:o,user:t.getUser(),...s&&{userAgent:s},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&Ce(a,{status:"exited"}),this.endSession(),t.setSession(i),i}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_withClient(e){const{scope:t,client:n}=this.getStackTop();n&&e(n,t)}_callExtensionMethod(e,...t){const n=Ne().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Ne(){return Y.n2.__SENTRY__=Y.n2.__SENTRY__||{extensions:{},hub:void 0},Y.n2}function Re(e){const t=Ne(),n=Oe(t);return Le(t,e),n}function Pe(){const e=Ne();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Ne()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Oe(e).isOlderThan(4)||Le(e,new Ue),Oe(e);var t}(e)}function Oe(e){return(0,Y.YO)("hub",(()=>new Ue),e)}function Le(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const $e=[];function Me(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?ge(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),s=function(e,t){for(let t=0;t<e.length;t++)if(!0==("Debug"===e[t].name))return t;return-1}(o);if(-1!==s){const[e]=o.splice(s,1);o.push(e)}return o}function je(e,t,n){if(n[t.name]=t,-1===$e.indexOf(t.name)&&(t.setupOnce(Ie,Pe),$e.push(t.name)),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log(`Integration installed: ${t.name}`)}const ze=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Fe=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class Ge{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=Ge.id,this._options=e}setupOnce(e,t){const n=e=>{const n=t();if(n){const t=n.getIntegration(Ge);if(t){const r=n.getClient(),o=r?r.getOptions():{},s=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ze],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Fe],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,o);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${de(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(e){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||0!==t.length||we.error(`Could not extract message for event ${de(e)}`),t}(e).some((e=>Z(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${de(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&Z(n,t)}(e,t.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${de(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const n=Ve(e);return!!n&&Z(n,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${de(e)}.\nUrl: ${Ve(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const n=Ve(e);return!n||Z(n,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${de(e)}.\nUrl: ${Ve(e)}`),!0)}(e,s)?null:e}}return e};n.id=this.name,e(n)}}function Ve(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.error(`Cannot extract url for event ${de(e)}`),null}}let He;Ge.__initStatic();class qe{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=qe.id}setupOnce(){He=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=re(this)||this;return He.apply(t,e)}}catch(e){}}}qe.__initStatic();const Ye=/\(error: (.*)\)/,We=/captureMessage|captureException/;function Je(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],o=e.split("\n");for(let e=n;e<o.length;e++){const n=o[e];if(n.length>1024)continue;const s=Ye.test(n)?n.replace(Ye,"$1"):n;if(!s.match(/\S*Error: /)){for(const e of t){const t=e(s);if(t){r.push(t);break}}if(r.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),We.test(t[t.length-1].function||"")&&(t.pop(),We.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const Ke="<anonymous>";function Xe(e){try{return e&&"function"==typeof e&&e.name||Ke}catch(e){return Ke}}const Qe=(0,Y.Rf)();function Ze(){if(!("fetch"in Qe))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function et(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const tt=(0,Y.Rf)(),nt=(0,Y.Rf)(),rt={},ot={};function st(e,t){rt[e]=rt[e]||[],rt[e].push(t),function(e){if(!ot[e])switch(ot[e]=!0,e){case"console":"console"in Y.n2&&ye.forEach((function(e){e in Y.n2.console&&ee(Y.n2.console,e,(function(t){return be[e]=t,function(...t){it("console",{args:t,level:e});const n=be[e];n&&n.apply(Y.n2.console,t)}}))}));break;case"dom":!function(){if(!nt.document)return;const e=it.bind(null,"dom"),t=lt(e,!0);nt.document.addEventListener("click",t,!1),nt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=nt[t]&&nt[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ee(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this,s=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},i=s[n]=s[n]||{refCount:0};if(!i.handler){const r=lt(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(e){}return t.call(this,n,r,o)}})),ee(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,o=n.__sentry_instrumentation_handlers__||{},s=o[t];s&&(s.refCount--,s.refCount<=0&&(e.call(this,t,s.handler,r),s.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!nt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;ee(e,"open",(function(e){return function(...t){const n=t[1],r=this.__sentry_xhr_v2__={method:j(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};j(n)&&"POST"===r.method&&n.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this.__sentry_xhr_v2__;if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}it("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?ee(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),ee(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,o=this.__sentry_xhr_v2__;return o&&(o.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),ee(e,"send",(function(e){return function(...t){const n=this.__sentry_xhr_v2__;return n&&void 0!==t[0]&&(n.body=t[0]),it("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!Ze())return!1;if(et(Qe.fetch))return!0;let e=!1;const t=Qe.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=et(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&ee(Y.n2,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:ct(t),method:at(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:ct(t),method:at(t,"method")?String(t.method).toUpperCase():"GET"}}(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return it("fetch",{...o}),e.apply(Y.n2,t).then((e=>(it("fetch",{...o,endTimestamp:Date.now(),response:e}),e)),(e=>{throw it("fetch",{...o,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=tt.chrome,t=e&&e.app&&e.app.runtime,n="history"in tt&&!!tt.history.pushState&&!!tt.history.replaceState;return!t&&n}())return;const e=nt.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=ut,t=String(n);ut=t,it("history",{from:e,to:t})}return e.apply(this,t)}}nt.onpopstate=function(...t){const n=nt.location.href,r=ut;if(ut=n,it("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},ee(nt.history,"pushState",t),ee(nt.history,"replaceState",t)}();break;case"error":ft=nt.onerror,nt.onerror=function(e,t,n,r,o){return it("error",{column:r,error:o,line:n,msg:e,url:t}),!(!ft||ft.__SENTRY_LOADER__)&&ft.apply(this,arguments)},nt.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":pt=nt.onunhandledrejection,nt.onunhandledrejection=function(e){return it("unhandledrejection",e),!(pt&&!pt.__SENTRY_LOADER__)||pt.apply(this,arguments)},nt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("unknown instrumentation type:",e)}}(e)}function it(e,t){if(e&&rt[e])for(const n of rt[e]||[])try{n(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Xe(n)}\nError:`,t)}}function at(e,t){return!!e&&"object"==typeof e&&!!e[t]}function ct(e){return"string"==typeof e?e:e?at(e,"url")?e.url:e.toString?e.toString():"":""}let ut,ht,dt;function lt(e,t=!1){return n=>{if(!n||dt===n)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n))return;const r="keypress"===n.type?"input":n.type;(void 0===ht||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(dt,n))&&(e({event:n,name:r,global:t}),dt=n),clearTimeout(ht),ht=nt.setTimeout((()=>{ht=void 0}),1e3)}}let ft=null,pt=null;const gt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function yt(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${i}`}function bt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function mt(e,t=100,n=1/0){try{return vt("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function wt(e,t=3,n=102400){const r=mt(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?wt(e,t-1,n):r;var o}function vt(e,t,r=1/0,o=1/0,s=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,a]=s;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==n.g&&t===n.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(q(t))return"[VueViewModel]";if(function(e){return F(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Xe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const h="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:r;if(0===h)return u.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return vt("",d.toJSON(),h-1,o,s)}catch(e){}const l=Array.isArray(t)?[]:{};let f=0;const p=oe(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(f>=o){l[e]="[MaxProperties ~]";break}const t=p[e];l[e]=vt(e,t,h-1,o,s),f++}return a(t),l}function _t(e,t=[]){return[e,t]}function Et(e,t){const[n,r]=e;return[n,[...r,t]]}function xt(e,t){const n=e[1];for(const e of n)if(t(e,e[0].type))return!0;return!1}function kt(e,t){return(t||new TextEncoder).encode(e)}function St(e,t){const[n,r]=e;let o=JSON.stringify(n);function s(e){"string"==typeof o?o="string"==typeof e?o+e:[kt(o,t),e]:o.push("string"==typeof e?kt(e,t):e)}for(const e of r){const[t,n]=e;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)s(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(mt(n))}s(e)}}return"string"==typeof o?o:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(o)}function Ct(e,t){const n="string"==typeof e.data?kt(e.data,t):e.data;return[ae({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Tt={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function At(e){return Tt[e]}function It(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}class Bt extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function Dt(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}(e,r)}`}const Ut=new WeakMap,Nt="Not capturing exception because it's already been captured.";function Rt(e){return void 0===e.type}function Pt(e){return"transaction"===e.type}const Ot="7.69.0";var Lt=n(8518);function $t(e,t){const n=jt(e,t),r={type:t&&t.name,value:Ft(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Mt(e,t){return{exception:{values:[$t(e,t)]}}}function jt(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(zt.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const zt=/Minified React error #\d+;/i;function Ft(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Gt(e,t,n,r,o){let s;if($(t)&&t.error)return Mt(e,t.error);if(M(t)||L(t,"DOMException")){const o=t;if("stack"in t)s=Mt(e,t);else{const t=o.name||(M(o)?"DOMError":"DOMException"),i=o.message?`${t}: ${o.message}`:t;s=Vt(e,i,n,r),le(s,i)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return O(t)?Mt(e,t):F(t)||G(t)?(s=function(e,t,n,r){const o=Pe().getClient(),s=o&&o.getOptions().normalizeDepth,i={exception:{values:[{type:G(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Ht(t,{isUnhandledRejection:r})}]},extra:{__serialized__:wt(t,s)}};if(n){const t=jt(e,n);t.length&&(i.exception.values[0].stacktrace={frames:t})}return i}(e,t,n,o),fe(s,{synthetic:!0}),s):(s=Vt(e,t,n,r),le(s,`${t}`,void 0),fe(s,{synthetic:!0}),s)}function Vt(e,t,n,r){const o={message:t};if(r&&n){const r=jt(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}return o}function Ht(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(oe(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return X(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:X(r,t)}return""}(e),r=t?"promise rejection":"exception";return $(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:G(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function qt(e,t){return Pe().captureException(e,{captureContext:t})}function Yt(e){Pe().withScope(e)}const Wt=Y.n2;let Jt=0;function Kt(){return Jt>0}function Xt(){Jt++,setTimeout((()=>{Jt--}))}function Qt(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(re(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const o=r.map((e=>Qt(e,t)));return e.apply(this,o)}catch(e){throw Xt(),Yt((n=>{n.addEventProcessor((e=>(t.mechanism&&(le(e,void 0,void 0),fe(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),qt(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}ne(r,e),te(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}class Zt extends class{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=gt.exec(e);if(!t)return void console.error(`Invalid Sentry Dsn: ${e}`);const[n,r,o="",s,i="",a]=t.slice(1);let c="",u=a;const h=u.split("/");if(h.length>1&&(c=h.slice(0,-1).join("/"),u=h.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return bt({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}(e):bt(e);if(t&&function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(we.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(we.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(we.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(we.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}(e.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("No DSN provided, client will not do anything."),this._dsn){const t=Dt(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(pe(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log(Nt));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let o=n&&n.event_id;const s=z(e)?this.eventFromMessage(String(e),t,n):this.eventFromException(e,n);return this._process(s.then((e=>this._captureEvent(e,n,r))).then((e=>{o=e}))),o}captureEvent(e,t,n){if(t&&t.originalException&&pe(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log(Nt));let r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((e=>{r=e}))),r}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Ce(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e)))):xe(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&je(e,t,n)})),n}(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){je(this,e,this._integrations)}sendEvent(e,t={}){if(this.emit("beforeSendEvent",e,t),this._dsn){let n=function(e,t,n,r){const o=It(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const i=function(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&{dsn:yt(r)},...o&&{trace:ae({...o})}}}(e,o,r,t);return delete e.sdkProcessingMetadata,_t(i,[[{type:s},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=Et(n,Ct(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,n,r){const o=It(n);return _t({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&{dsn:yt(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const s="ok"===e.status;(s&&0===e.errors||s&&n)&&(Ce(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Se((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,n){const r=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),function(e,t,n,r){const{normalizeDepth:o=3,normalizeMaxBreadth:s=1e3}=e,i={...t,event_id:t.event_id||n.event_id||ue(),timestamp:t.timestamp||(0,ve.yW)()},a=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:_e),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=X(e.message,s));const i=e.exception&&e.exception.values&&e.exception.values[0];i&&i.value&&(i.value=X(i.value,s));const a=e.request;a&&a.url&&(a.url=X(a.url,s))}(i,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(i,a),void 0===t.type&&function(e,t){const n=Y.n2._sentryDebugIds;if(!n)return;let r;const o=Ut.get(t);o?r=o:(r=new Map,Ut.set(t,r));const s=Object.keys(n).reduce(((e,o)=>{let s;const i=r.get(o);i?s=i:(s=t(o),r.set(o,s));for(let t=s.length-1;t>=0;t--){const r=s[t];if(r.filename){e[r.filename]=n[o];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}(i,e.stackParser);let c=r;n.captureContext&&(c=Te.clone(c).update(n.captureContext));let u=xe(i);if(c){if(c.getAttachments){const e=[...n.attachments||[],...c.getAttachments()];e.length&&(n.attachments=e)}u=c.applyToEvent(i,n)}return u.then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof o&&o>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:mt(e.data,t,n)}})))},...e.user&&{user:mt(e.user,t,n)},...e.contexts&&{contexts:mt(e.contexts,t,n)},...e.extra&&{extra:mt(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=mt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>(e.data&&(e.data=mt(e.data,t,n)),e)))),r}(e,o,s):e)))}(r,e,t,n).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:r,spanId:o,parentSpanId:s,dsc:i}=t;e.contexts={trace:{trace_id:r,span_id:o,parent_span_id:s},...e.contexts};const a=i||function(e,t,n){const r=t.getOptions(),{publicKey:o}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},i=ae({environment:r.environment||_e,release:r.release,user_segment:s,public_key:o,trace_id:e});return t.emit&&t.emit("createDsc",i),i}(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?we.log(t.message):we.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r;if(!this._isEnabled())return ke(new Bt("SDK not enabled, will not capture event.","log"));const s=Pt(e),i=Rt(e),a=e.type||"error",c=`before send for type \`${a}\``;if(i&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",e),ke(new Bt(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new Bt("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n){const{beforeSend:r,beforeSendTransaction:o}=e;return Rt(t)&&r?r(t,n):Pt(t)&&o?o(t,n):t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(V(e))return e.then((e=>{if(!F(e)&&null!==e)throw new Bt(n);return e}),(e=>{throw new Bt(`${t} rejected with ${e}`)}));if(!F(e)&&null!==e)throw new Bt(n);return e}(o,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",u,e),new Bt(`${c} returned \`null\`, will not send event.`,"log");const o=n&&n.getSession();!s&&o&&this._updateSessionFromEvent(o,r);const i=r.transaction_info;if(s&&i&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...i,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof Bt)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Bt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}{constructor(e){const t=Wt.SENTRY_SDK_SOURCE||(0,Lt.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:Ot}],version:Ot},super(e),e.sendClientReports&&Wt.document&&Wt.document.addEventListener("visibilitychange",(()=>{"hidden"===Wt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,n,r){const o=Gt(e,t,n&&n.syntheticException||void 0,r);return fe(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),xe(o)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,o){const s=Vt(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),xe(s)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:yt(r)}},s=function(e){return[{type:"user_report"},e]}(e);return _t(o,[s])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log("Sending outcomes:",e);const t=(n=e,_t((r=this._options.tunnel&&yt(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:(0,ve.yW)(),discarded_events:n}]]));var n,r;this._sendEnvelope(t)}}class en{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=en.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:tn,onunhandledrejection:nn}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const r=this._installFunc[n];r&&e[n]&&(t=n,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.log(`Global Handler attached: ${t}`),r(),this._installFunc[n]=void 0)}var t}}function tn(){st("error",(e=>{const[t,n,r]=sn();if(!t.getIntegration(en))return;const{msg:o,url:s,line:i,column:a,error:c}=e;if(Kt()||c&&c.__sentry_own_request__)return;const u=void 0===c&&j(o)?function(e,t,n,r){let o=$(e)?e.message:e,s="Error";const i=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return i&&(s=i[1],o=i[2]),rn({exception:{values:[{type:s,value:o}]}},t,n,r)}(o,s,i,a):rn(Gt(n,c||o,void 0,r,!1),s,i,a);u.level="error",on(t,c,u,"onerror")}))}function nn(){st("unhandledrejection",(e=>{const[t,n,r]=sn();if(!t.getIntegration(en))return;let o=e;try{"reason"in e?o=e.reason:"detail"in e&&"reason"in e.detail&&(o=e.detail.reason)}catch(e){}if(Kt()||o&&o.__sentry_own_request__)return!0;const s=z(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Gt(n,o,void 0,r,!0);s.level="error",on(t,o,s,"onunhandledrejection")}))}function rn(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,d=j(t)&&t.length>0?t:function(){try{return W.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:h}),e}function on(e,t,n,r){fe(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function sn(){const e=Pe(),t=e.getClient(),n=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,n.stackParser,n.attachStacktrace]}en.__initStatic();const an=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class cn{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=cn.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&ee(Wt,"setTimeout",un),this._options.setInterval&&ee(Wt,"setInterval",un),this._options.requestAnimationFrame&&ee(Wt,"requestAnimationFrame",hn),this._options.XMLHttpRequest&&"XMLHttpRequest"in Wt&&ee(XMLHttpRequest.prototype,"send",dn);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:an).forEach(ln)}}function un(e){return function(...t){const n=t[0];return t[0]=Qt(n,{mechanism:{data:{function:Xe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function hn(e){return function(t){return e.apply(this,[Qt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Xe(e)},handled:!1,type:"instrument"}})])}}function dn(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&ee(n,e,(function(t){const n={mechanism:{data:{function:e,handler:Xe(t)},handled:!1,type:"instrument"}},r=re(t);return r&&(n.mechanism.data.handler=Xe(r)),Qt(t,n)}))})),e.apply(this,t)}}function ln(e){const t=Wt,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(ee(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Qt(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Xe(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Qt(r,{mechanism:{data:{function:"addEventListener",handler:Xe(r),target:e},handled:!1,type:"instrument"}}),o])}})),ee(n,"removeEventListener",(function(e){return function(t,n,r){const o=n;try{const n=o&&o.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,o,r)}})))}cn.__initStatic();const fn=["fatal","error","warning","log","info","debug"];function pn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}class gn{static __initStatic(){this.id="Breadcrumbs"}constructor(e){this.name=gn.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){if(this.options.console&&st("console",bn),this.options.dom&&st("dom",(e=this.options.dom,function(t){let n,r="object"==typeof e?e.serializeAttribute:void 0,o="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;o&&o>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=1024),"string"==typeof r&&(r=[r]);try{const e=t.event;n=function(e){return!!e&&!!e.target}(e)?J(e.target,{keyAttrs:r,maxStringLength:o}):J(e,{keyAttrs:r,maxStringLength:o})}catch(e){n="<unknown>"}0!==n.length&&Pe().addBreadcrumb({category:`ui.${t.name}`,message:n},{event:t.event,name:t.name,global:t.global})})),this.options.xhr&&st("xhr",mn),this.options.fetch&&st("fetch",wn),this.options.history&&st("history",vn),this.options.sentry){const e=Pe().getClient();e&&e.on&&e.on("beforeSendEvent",yn)}var e}}function yn(e){Pe().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:de(e)},{event:e})}function bn(e){const t={category:"console",data:{arguments:e.args,logger:"console"},level:(n=e.level,"warn"===n?"warning":fn.includes(n)?n:"log"),message:Q(e.args," ")};var n;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${Q(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}Pe().addBreadcrumb(t,{input:e.args,level:e.level})}function mn(e){const{startTimestamp:t,endTimestamp:n}=e,r=e.xhr.__sentry_xhr_v2__;if(!t||!n||!r)return;const{method:o,url:s,status_code:i,body:a}=r,c={method:o,url:s,status_code:i},u={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:n};Pe().addBreadcrumb({category:"xhr",data:c,type:"http"},u)}function wn(e){const{startTimestamp:t,endTimestamp:n}=e;if(n&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const r=e.fetchData,o={data:e.error,input:e.args,startTimestamp:t,endTimestamp:n};Pe().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},o)}else{const r={...e.fetchData,status_code:e.response&&e.response.status},o={input:e.args,response:e.response,startTimestamp:t,endTimestamp:n};Pe().addBreadcrumb({category:"fetch",data:r,type:"http"},o)}}function vn(e){let t=e.from,n=e.to;const r=pn(Wt.location.href);let o=pn(t);const s=pn(n);o.path||(o=r),r.protocol===s.protocol&&r.host===s.host&&(n=s.relative),r.protocol===o.protocol&&r.host===o.host&&(t=o.relative),Pe().addBreadcrumb({category:"navigation",data:{from:t,to:n}})}function _n(e,t,n=250,r,o,s,i){if(!(s.exception&&s.exception.values&&i&&H(i.originalException,Error)))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var c,u;a&&(s.exception.values=(c=En(e,t,o,i.originalException,r,s.exception.values,a,0),u=n,c.map((e=>(e.value&&(e.value=X(e.value,u)),e)))))}function En(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(H(r[o],Error)){xn(i,a);const s=e(t,r[o]),u=c.length;kn(s,o,u,a),c=En(e,t,n,r[o],o,[s,...c],s,u)}return Array.isArray(r.errors)&&r.errors.forEach(((r,s)=>{if(H(r,Error)){xn(i,a);const u=e(t,r),h=c.length;kn(u,`errors[${s}]`,h,a),c=En(e,t,n,r,o,[u,...c],u,h)}})),c}function xn(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function kn(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}gn.__initStatic();class Sn{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=Sn.id,this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){}preprocessEvent(e,t,n){const r=n.getOptions();_n($t,r.stackParser,r.maxValueLength,this._key,this._limit,e,t)}}Sn.__initStatic();class Cn{static __initStatic(){this.id="HttpContext"}constructor(){this.name=Cn.id}setupOnce(){Ie((e=>{if(Pe().getIntegration(Cn)){if(!Wt.navigator&&!Wt.location&&!Wt.document)return e;const t=e.request&&e.request.url||Wt.location&&Wt.location.href,{referrer:n}=Wt.document||{},{userAgent:r}=Wt.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};return{...e,request:s}}return e}))}}Cn.__initStatic();class Tn{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Tn.id}setupOnce(e,t){const n=e=>{if(e.type)return e;const n=t().getIntegration(Tn);if(n){try{if(function(e,t){return!!t&&(!!function(e,t){const n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!In(e,t)&&!!An(e,t))))}(e,t)||!!function(e,t){const n=Bn(t),r=Bn(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!In(e,t)&&!!An(e,t)))}(e,t))}(e,n._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return n._previousEvent=e}return n._previousEvent=e}return e};n.id=this.name,e(n)}}function An(e,t){let n=Dn(e),r=Dn(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,r=r,r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],o=n[e];if(t.filename!==o.filename||t.lineno!==o.lineno||t.colno!==o.colno||t.function!==o.function)return!1}return!0}function In(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Bn(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Dn(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Tn.__initStatic();const Un="?";function Nn(e,t,n,r){const o={filename:e,function:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Rn=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Pn=/\((\S*)(?::(\d+))(?::(\d+))\)/,On=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Ln=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,$n=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Mn=Je([30,e=>{const t=Rn.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Pn.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=jn(t[1]||Un,t[2]);return Nn(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=On.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Ln.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Un;return[n,e]=jn(n,e),Nn(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=$n.exec(e);return t?Nn(t[2],t[1]||Un,+t[3],t[4]?+t[4]:void 0):void 0}]),jn=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Un,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function zn(e,t,n=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return ke(new Bt("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new Se(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{xe(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}(e.bufferSize||30)){let r={};function o(o){const s=[];if(xt(o,((t,n)=>{const o=At(n);if(function(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}(r,o)){const r=Fn(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else s.push(t)})),0===s.length)return xe();const i=_t(o[0],s),a=t=>{xt(i,((n,r)=>{const o=Fn(n,r);e.recordDroppedEvent(t,At(r),o)}))};return n.add((()=>t({body:St(i,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=function(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],i=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n]=e.split(":",2),s=parseInt(t,10),i=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))o[e]=r+i;else o.all=r+i}else i?o.all=r+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}(i,r):429===t&&(o.all=r+6e4);return o}(r,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Bt)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.error("Skipped sending event because buffer is full."),a("queue_overflow"),xe();throw e}))}return o.__sentry__baseTransport__=!0,{send:o,flush:e=>n.drain(e)}}function Fn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let Gn;function Vn(e,t=function(){if(Gn)return Gn;if(et(Wt.fetch))return Gn=Wt.fetch.bind(Wt);const e=Wt.document;let t=Wt.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return Gn=t.bind(Wt)}()){let n=0,r=0;return zn(e,(function(o){const s=o.body.length;n+=s,r++;const i={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,i).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Gn=void 0,n-=s,r--,ke(e)}}))}function Hn(e){return zn(e,(function(t){return new Se(((n,r)=>{const o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=()=>{4===o.readyState&&n({statusCode:o.status,headers:{"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")}})},o.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&o.setRequestHeader(t,e.headers[t]);o.send(t.body)}))}))}const qn=[new Ge,new qe,new cn,new gn,new en,new Sn,new Tn,new Cn];function Yn(e){e.startSession({ignoreDuration:!0}),e.captureSession()}var Wn=n(1227);const Jn=new Uint8Array(0),Kn=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),Xn=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):Jn},Qn=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},Zn=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},er=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),tr=e=>(new TextEncoder).encode(e),nr=e=>(new TextDecoder).decode(e);const rr=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var h=n[e.charCodeAt(t)];if(255===h)return;for(var d=0,l=s-1;(0!==h||d<o)&&-1!==l;l--,d++)h+=a*i[l]>>>0,i[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=s-o;f!==s&&0===i[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=i[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*h+1>>>0,u=new Uint8Array(i);o!==s;){for(var d=t[o],l=0,f=i-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=l,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}};class or{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sr{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ar(this,e)}}class ir{constructor(e){this.decoders=e}or(e){return ar(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ar=(e,t)=>new ir({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class cr{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new or(e,t,n),this.decoder=new sr(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ur=({name:e,prefix:t,encode:n,decode:r})=>new cr(e,t,n,r),hr=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=rr(n,t);return ur({prefix:e,name:t,encode:r,decode:e=>Zn(o(e))})},dr=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>ur({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(i&&(s+=t[o&a<<n-i]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=o[e[t]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);c=c<<n|s,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i})(t,r,n,e)}),lr=dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fr=(dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),hr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));hr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var pr=Math.pow(2,31),gr=Math.pow(2,7),yr=Math.pow(2,14),br=Math.pow(2,21),mr=Math.pow(2,28),wr=Math.pow(2,35),vr=Math.pow(2,42),_r=Math.pow(2,49),Er=Math.pow(2,56),xr=Math.pow(2,63);const kr={encode:function e(t,n,r){n=n||[];for(var o=r=r||0;t>=pr;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},decode:function e(t,n){var r,o=0,s=0,i=n=n||0,a=t.length;do{if(i>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[i++],o+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return e.bytes=i-n,o},encodingLength:function(e){return e<gr?1:e<yr?2:e<br?3:e<mr?4:e<wr?5:e<vr?6:e<_r?7:e<Er?8:e<xr?9:10}},Sr=(e,t=0)=>[kr.decode(e,t),kr.decode.bytes],Cr=(e,t,n=0)=>(kr.encode(e,t,n),t),Tr=e=>kr.encodingLength(e),Ar=(e,t)=>{const n=t.byteLength,r=Tr(e),o=r+Tr(n),s=new Uint8Array(o+n);return Cr(e,s,0),Cr(n,s,r),s.set(t,o),new Ir(e,n,t,s)};class Ir{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const Br=(e,t)=>{const{bytes:n,version:r}=e;return 0===r?Pr(n,Ur(e),t||fr.encoder):Or(n,Ur(e),t||lr.encoder)},Dr=new WeakMap,Ur=e=>{const t=Dr.get(e);if(null==t){const t=new Map;return Dr.set(e,t),t}return t};class Nr{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Lr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==$r)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Nr.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=Ar(e,t);return Nr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Nr.equals(this,e)}static equals(e,t){const n=t;return n&&e.code===n.code&&e.version===n.version&&((e,t)=>{if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&Qn(e.bytes,n.bytes)}})(e.multihash,n.multihash)}toString(e){return Br(this,e)}toJSON(){return{"/":Br(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Nr)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:o}=t;return new Nr(e,n,r,o||Mr(e,n,r.bytes))}if(!0===t[jr]){const{version:e,multihash:n,code:r}=t,o=(e=>{const t=Zn(e),[n,r]=Sr(t),[o,s]=Sr(t.subarray(r)),i=t.subarray(r+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Ir(n,o,i,t)})(n);return Nr.create(e,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Lr)throw new Error(`Version 0 CID must use dag-pb (code: ${Lr}) block encoding`);return new Nr(e,t,n,n.bytes);case 1:{const r=Mr(e,t,n.bytes);return new Nr(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Nr.create(0,Lr,e)}static createV1(e,t){return Nr.create(1,e,t)}static decode(e){const[t,n]=Nr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Nr.inspectBytes(e),n=t.size-t.multihashSize,r=Zn(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),s=new Ir(t.multihashCode,t.digestSize,o,r);return[0===t.version?Nr.createV0(s):Nr.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=Sr(e.subarray(t));return t+=r,n};let r=n(),o=Lr;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=t,i=n(),a=n(),c=t+a;return{version:r,codec:o,multihashCode:i,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[n,r]=Rr(e,t),o=Nr.decode(r);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Ur(o).set(n,e),o}}const Rr=(e,t)=>{switch(e[0]){case"Q":{const n=t||fr;return[fr.prefix,n.decode(`${fr.prefix}${e}`)]}case fr.prefix:{const n=t||fr;return[fr.prefix,n.decode(e)]}case lr.prefix:{const n=t||lr;return[lr.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Pr=(e,t,n)=>{const{prefix:r}=n;if(r!==fr.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o},Or=(e,t,n)=>{const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o},Lr=112,$r=18,Mr=(e,t,n)=>{const r=Tr(e),o=r+Tr(t),s=new Uint8Array(o+n.byteLength);return Cr(e,s,0),Cr(t,s,r),s.set(n,o),s},jr=Symbol.for("@ipld/js-cid/CID"),zr=({name:e,code:t,encode:n})=>new Fr(e,t,n);class Fr{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Ar(this.code,t):t.then((e=>Ar(this.code,e)))}throw Error("Unknown type, must be binary type")}}var Gr=n(4676),Vr=n(1362),Hr=n(8924);const qr=["string","number","bigint","symbol"],Yr=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class Wr{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Wr.uint=new Wr(0,"uint",!0),Wr.negint=new Wr(1,"negint",!0),Wr.bytes=new Wr(2,"bytes",!0),Wr.string=new Wr(3,"string",!0),Wr.array=new Wr(4,"array",!1),Wr.map=new Wr(5,"map",!1),Wr.tag=new Wr(6,"tag",!1),Wr.float=new Wr(7,"float",!0),Wr.false=new Wr(7,"false",!0),Wr.true=new Wr(7,"true",!0),Wr.null=new Wr(7,"null",!0),Wr.undefined=new Wr(7,"undefined",!0),Wr.break=new Wr(7,"break",!0);class Jr{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Kr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,Xr=new TextDecoder,Qr=new TextEncoder;function Zr(e){return Kr&&globalThis.Buffer.isBuffer(e)}function eo(e){return e instanceof Uint8Array?Zr(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const to=Kr?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):co(e,t,n):(e,t,n)=>n-t>64?Xr.decode(e.subarray(t,n)):co(e,t,n),no=Kr?e=>e.length>64?globalThis.Buffer.from(e):ao(e):e=>e.length>64?Qr.encode(e):ao(e),ro=e=>Uint8Array.from(e),oo=Kr?(e,t,n)=>Zr(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),so=Kr?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),eo(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let t of e)r+t.length>n.length&&(t=t.subarray(0,n.length-r)),n.set(t,r),r+=t.length;return n},io=Kr?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ao(e,t=1/0){let n;const r=e.length;let o=null;const s=[];for(let i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function co(e,t,n){const r=[];for(;t<n;){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let n,r,a,c;switch(i){case 1:o<128&&(s=o);break;case 2:n=e[t+1],128==(192&n)&&(c=(31&o)<<6|63&n,c>127&&(s=c));break;case 3:n=e[t+1],r=e[t+2],128==(192&n)&&128==(192&r)&&(c=(15&o)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),t+=i}return uo(r)}function uo(e){const t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}class ho{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=io(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=oo(n,0,this.cursor)}else t=so(this.chunks,this.cursor);return e&&this.reset(),t}}const lo=[];function fo(e,t,n){if(e.length-t<n)throw new Error("CBOR decode error: not enough data for type")}lo[23]=1,lo[24]=2,lo[25]=3,lo[26]=5,lo[27]=9;const po=[24,256,65536,4294967296,BigInt("18446744073709551616")];function go(e,t,n){fo(e,t,1);const r=e[t];if(!0===n.strict&&r<po[0])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return r}function yo(e,t,n){fo(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<po[1])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return r}function bo(e,t,n){fo(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<po[2])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return r}function mo(e,t,n){fo(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&s<po[3])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===n.allowBigInt)return s;throw new Error("CBOR decode error: integers outside of the safe integer range are not supported")}function wo(e,t){return vo(e,0,t.value)}function vo(e,t,n){if(n<po[0]){const r=Number(n);e.push([t|r])}else if(n<po[1]){const r=Number(n);e.push([24|t,r])}else if(n<po[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<po[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<po[4]))throw new Error("CBOR decode error: encountered BigInt larger than allowable range");{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&s,s>>=8,n[3]=255&s,s>>=8,n[2]=255&s,s>>=8,n[1]=255&s,e.push(n)}}}wo.encodedSize=function(e){return vo.encodedSize(e.value)},vo.encodedSize=function(e){return e<po[0]?1:e<po[1]?2:e<po[2]?3:e<po[3]?5:9},wo.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const _o=BigInt(-1),Eo=BigInt(1);function xo(e,t){const n=t.value,r="bigint"==typeof n?n*_o-Eo:-1*n-1;vo(e,t.type.majorEncoded,r)}function ko(e,t,n,r){fo(e,t,n+r);const o=oo(e,t+n,t+n+r);return new Jr(Wr.bytes,o,n+r)}function So(e,t,n,r){return ko(e,t,1,n)}function Co(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Wr.string?no(e.value):e.value),e.encodedBytes}function To(e,t){const n=Co(t);vo(e,t.type.majorEncoded,n.length),e.push(n)}function Ao(e,t,n,r,o){const s=n+r;fo(e,t,s);const i=new Jr(Wr.string,to(e,t+n,t+s),s);return!0===o.retainStringBytes&&(i.byteValue=oo(e,t+n,t+s)),i}function Io(e,t,n,r){return Ao(e,t,1,n,r)}xo.encodedSize=function(e){const t=e.value,n="bigint"==typeof t?t*_o-Eo:-1*t-1;return n<po[0]?1:n<po[1]?2:n<po[2]?3:n<po[3]?5:9},xo.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},To.encodedSize=function(e){const t=Co(e);return vo.encodedSize(t.length)+t.length},To.compareTokens=function(e,t){return n=Co(e),r=Co(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(Zr(e)&&Zr(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const Bo=To;function Do(e,t,n,r){return new Jr(Wr.array,r,n)}function Uo(e,t,n,r){return Do(0,0,1,n)}function No(e,t){vo(e,Wr.array.majorEncoded,t.value)}function Ro(e,t,n,r){return new Jr(Wr.map,r,n)}function Po(e,t,n,r){return Ro(0,0,1,n)}function Oo(e,t){vo(e,Wr.map.majorEncoded,t.value)}function Lo(e,t,n,r){return new Jr(Wr.tag,n,1)}function $o(e,t){vo(e,Wr.tag.majorEncoded,t.value)}function Mo(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error("CBOR decode error: NaN values are not supported");if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error("CBOR decode error: Infinity values are not supported")}return new Jr(Wr.float,e,t)}function jo(e,t,n){const r=t.value;if(!1===r)e.push([20|Wr.float.majorEncoded]);else if(!0===r)e.push([21|Wr.float.majorEncoded]);else if(null===r)e.push([22|Wr.float.majorEncoded]);else if(void 0===r)e.push([23|Wr.float.majorEncoded]);else{let t,s=!1;n&&!0===n.float64||(Vo(r),t=Ho(Go,1),r===t||Number.isNaN(r)?(Go[0]=249,e.push(Go.slice(0,3)),s=!0):(qo(r),t=Yo(Go,1),r===t&&(Go[0]=250,e.push(Go.slice(0,5)),s=!0))),s||(o=r,Fo.setFloat64(0,o,!1),t=Wo(Go,1),Go[0]=251,e.push(Go.slice(0,9)))}var o}No.compareTokens=wo.compareTokens,No.encodedSize=function(e){return vo.encodedSize(e.value)},Oo.compareTokens=wo.compareTokens,Oo.encodedSize=function(e){return vo.encodedSize(e.value)},$o.compareTokens=wo.compareTokens,$o.encodedSize=function(e){return vo.encodedSize(e.value)},jo.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null==n)return 1;if(!t||!0!==t.float64){Vo(n);let e=Ho(Go,1);if(n===e||Number.isNaN(n))return 3;if(qo(n),e=Yo(Go,1),n===e)return 5}return 9};const zo=new ArrayBuffer(9),Fo=new DataView(zo,1),Go=new Uint8Array(zo,0);function Vo(e){if(e===1/0)Fo.setUint16(0,31744,!1);else if(e===-1/0)Fo.setUint16(0,64512,!1);else if(Number.isNaN(e))Fo.setUint16(0,32256,!1);else{Fo.setFloat32(0,e);const t=Fo.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Fo.setUint16(0,31744,!1);else if(0===n)Fo.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?Fo.setUint16(0,0):e<-14?Fo.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Fo.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function Ho(e,t){if(e.length-t<2)throw new Error("CBOR decode error: not enough data for float16");const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let s;return s=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-s:s}function qo(e){Fo.setFloat32(0,e,!1)}function Yo(e,t){if(e.length-t<4)throw new Error("CBOR decode error: not enough data for float32");const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function Wo(e,t){if(e.length-t<8)throw new Error("CBOR decode error: not enough data for float64");const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function Jo(e,t,n){throw new Error(`CBOR decode error: encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Ko(e){return()=>{throw new Error(`CBOR decode error: ${e}`)}}jo.compareTokens=wo.compareTokens;const Xo=[];for(let e=0;e<=23;e++)Xo[e]=Jo;Xo[24]=function(e,t,n,r){return new Jr(Wr.uint,go(e,t+1,r),2)},Xo[25]=function(e,t,n,r){return new Jr(Wr.uint,yo(e,t+1,r),3)},Xo[26]=function(e,t,n,r){return new Jr(Wr.uint,bo(e,t+1,r),5)},Xo[27]=function(e,t,n,r){return new Jr(Wr.uint,mo(e,t+1,r),9)},Xo[28]=Jo,Xo[29]=Jo,Xo[30]=Jo,Xo[31]=Jo;for(let e=32;e<=55;e++)Xo[e]=Jo;Xo[56]=function(e,t,n,r){return new Jr(Wr.negint,-1-go(e,t+1,r),2)},Xo[57]=function(e,t,n,r){return new Jr(Wr.negint,-1-yo(e,t+1,r),3)},Xo[58]=function(e,t,n,r){return new Jr(Wr.negint,-1-bo(e,t+1,r),5)},Xo[59]=function(e,t,n,r){const o=mo(e,t+1,r);if("bigint"!=typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new Jr(Wr.negint,e,9)}if(!0!==r.allowBigInt)throw new Error("CBOR decode error: integers outside of the safe integer range are not supported");return new Jr(Wr.negint,_o-BigInt(o),9)},Xo[60]=Jo,Xo[61]=Jo,Xo[62]=Jo,Xo[63]=Jo;for(let e=64;e<=87;e++)Xo[e]=So;Xo[88]=function(e,t,n,r){return ko(e,t,2,go(e,t+1,r))},Xo[89]=function(e,t,n,r){return ko(e,t,3,yo(e,t+1,r))},Xo[90]=function(e,t,n,r){return ko(e,t,5,bo(e,t+1,r))},Xo[91]=function(e,t,n,r){const o=mo(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer bytes lengths not supported");return ko(e,t,9,o)},Xo[92]=Jo,Xo[93]=Jo,Xo[94]=Jo,Xo[95]=Ko("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)Xo[e]=Io;Xo[120]=function(e,t,n,r){return Ao(e,t,2,go(e,t+1,r),r)},Xo[121]=function(e,t,n,r){return Ao(e,t,3,yo(e,t+1,r),r)},Xo[122]=function(e,t,n,r){return Ao(e,t,5,bo(e,t+1,r),r)},Xo[123]=function(e,t,n,r){const o=mo(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer string lengths not supported");return Ao(e,t,9,o,r)},Xo[124]=Jo,Xo[125]=Jo,Xo[126]=Jo,Xo[127]=Ko("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)Xo[e]=Uo;Xo[152]=function(e,t,n,r){return Do(0,0,2,go(e,t+1,r))},Xo[153]=function(e,t,n,r){return Do(0,0,3,yo(e,t+1,r))},Xo[154]=function(e,t,n,r){return Do(0,0,5,bo(e,t+1,r))},Xo[155]=function(e,t,n,r){const o=mo(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer array lengths not supported");return Do(0,0,9,o)},Xo[156]=Jo,Xo[157]=Jo,Xo[158]=Jo,Xo[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return Do(0,0,1,1/0)};for(let e=160;e<=183;e++)Xo[e]=Po;Xo[184]=function(e,t,n,r){return Ro(0,0,2,go(e,t+1,r))},Xo[185]=function(e,t,n,r){return Ro(0,0,3,yo(e,t+1,r))},Xo[186]=function(e,t,n,r){return Ro(0,0,5,bo(e,t+1,r))},Xo[187]=function(e,t,n,r){const o=mo(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer map lengths not supported");return Ro(0,0,9,o)},Xo[188]=Jo,Xo[189]=Jo,Xo[190]=Jo,Xo[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return Ro(0,0,1,1/0)};for(let e=192;e<=215;e++)Xo[e]=Lo;Xo[216]=function(e,t,n,r){return new Jr(Wr.tag,go(e,t+1,r),2)},Xo[217]=function(e,t,n,r){return new Jr(Wr.tag,yo(e,t+1,r),3)},Xo[218]=function(e,t,n,r){return new Jr(Wr.tag,bo(e,t+1,r),5)},Xo[219]=function(e,t,n,r){return new Jr(Wr.tag,mo(e,t+1,r),9)},Xo[220]=Jo,Xo[221]=Jo,Xo[222]=Jo,Xo[223]=Jo;for(let e=224;e<=243;e++)Xo[e]=Ko("simple values are not supported");Xo[244]=Jo,Xo[245]=Jo,Xo[246]=Jo,Xo[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error("CBOR decode error: undefined values are not supported");return!0===r.coerceUndefinedToNull?new Jr(Wr.null,null,1):new Jr(Wr.undefined,void 0,1)},Xo[248]=Ko("simple values are not supported"),Xo[249]=function(e,t,n,r){return Mo(Ho(e,t+1),3,r)},Xo[250]=function(e,t,n,r){return Mo(Yo(e,t+1),5,r)},Xo[251]=function(e,t,n,r){return Mo(Wo(e,t+1),9,r)},Xo[252]=Jo,Xo[253]=Jo,Xo[254]=Jo,Xo[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return new Jr(Wr.break,void 0,1)};const Qo=[];for(let e=0;e<24;e++)Qo[e]=new Jr(Wr.uint,e,1);for(let e=-1;e>=-24;e--)Qo[31-e]=new Jr(Wr.negint,e,1);Qo[64]=new Jr(Wr.bytes,new Uint8Array(0),1),Qo[96]=new Jr(Wr.string,"",1),Qo[128]=new Jr(Wr.array,0,1),Qo[160]=new Jr(Wr.map,0,1),Qo[244]=new Jr(Wr.false,!1,1),Qo[245]=new Jr(Wr.true,!0,1),Qo[246]=new Jr(Wr.null,null,1);const Zo={float64:!1,mapSorter:function(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,s=es[o].compareTokens(n,r);return 0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s},quickEncodeToken:function(e){switch(e.type){case Wr.false:return ro([244]);case Wr.true:return ro([245]);case Wr.null:return ro([246]);case Wr.bytes:return e.value.length?void 0:ro([64]);case Wr.string:return""===e.value?ro([96]):void 0;case Wr.array:return 0===e.value?ro([128]):void 0;case Wr.map:return 0===e.value?ro([160]):void 0;case Wr.uint:return e.value<24?ro([Number(e.value)]):void 0;case Wr.negint:if(e.value>=-24)return ro([31-Number(e.value)])}}},es=function(){const e=[];return e[Wr.uint.major]=wo,e[Wr.negint.major]=xo,e[Wr.bytes.major]=To,e[Wr.string.major]=Bo,e[Wr.array.major]=No,e[Wr.map.major]=Oo,e[Wr.tag.major]=$o,e[Wr.float.major]=jo,e}(),ts=new ho;class ns{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error("CBOR encode error: object contains circular references");return new ns(t,e)}}const rs={null:new Jr(Wr.null,null),undefined:new Jr(Wr.undefined,void 0),true:new Jr(Wr.true,!0),false:new Jr(Wr.false,!1),emptyArray:new Jr(Wr.array,0),emptyMap:new Jr(Wr.map,0)},os={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new Jr(e>=0?Wr.uint:Wr.negint,e):new Jr(Wr.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new Jr(Wr.uint,e):new Jr(Wr.negint,e),Uint8Array:(e,t,n,r)=>new Jr(Wr.bytes,e),string:(e,t,n,r)=>new Jr(Wr.string,e),boolean:(e,t,n,r)=>e?rs.true:rs.false,null:(e,t,n,r)=>rs.null,undefined:(e,t,n,r)=>rs.undefined,ArrayBuffer:(e,t,n,r)=>new Jr(Wr.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new Jr(Wr.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[rs.emptyArray,new Jr(Wr.break)]:rs.emptyArray;r=ns.createCheck(r,e);const o=[];let s=0;for(const t of e)o[s++]=ss(t,n,r);return n.addBreakTokens?[new Jr(Wr.array,e.length),o,new Jr(Wr.break)]:[new Jr(Wr.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return!0===n.addBreakTokens?[rs.emptyMap,new Jr(Wr.break)]:rs.emptyMap;r=ns.createCheck(r,e);const a=[];let c=0;for(const t of s)a[c++]=[ss(t,n,r),ss(o?e.get(t):e[t],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new Jr(Wr.map,i),a,new Jr(Wr.break)]:[new Jr(Wr.map,i),a]}};os.Map=os.Object,os.Buffer=os.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))os[`${e}Array`]=os.DataView;function ss(e,t={},n){const r=function(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(qr.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const n=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(Yr.includes(t))return t}(e);return n||"Object"}(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||os[r];if("function"==typeof o){const s=o(e,r,t,n);if(null!=s)return s}const s=os[r];if(!s)throw new Error(`CBOR encode error: unsupported type: ${r}`);return s(e,r,t,n)}function is(e,t,n,r){if(Array.isArray(t))for(const o of t)is(e,o,n,r);else n[t.type.major](e,t,r)}function as(e,t,n){const r=ss(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const e=n.quickEncodeToken(r);if(e)return e;const o=t[r.type.major];if(o.encodedSize){const e=o.encodedSize(r,n),t=new ho(e);if(o(t,r,n),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return eo(t.chunks[0])}}return ts.reset(),is(ts,r,t,n),ts.toBytes(!0)}const cs={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class us{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=Qo[e];if(void 0===t){const n=Xo[e];if(!n)throw new Error(`CBOR decode error: no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this.pos,r,this.options)}return this.pos+=t.encodedLength,t}}const hs=Symbol.for("DONE"),ds=Symbol.for("BREAK");function ls(e,t){if(e.done())return hs;const n=e.next();if(n.type===Wr.break)return ds;if(n.type.terminal)return n.value;if(n.type===Wr.array)return function(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=ls(t,n);if(s===ds){if(e.value===1/0)break;throw new Error("CBOR decode error: got unexpected break to lengthed array")}if(s===hs)throw new Error(`CBOR decode error: found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}(n,e,t);if(n.type===Wr.map)return function(e,t,n){const r=!0===n.useMaps,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const a=ls(t,n);if(a===ds){if(e.value===1/0)break;throw new Error("CBOR decode error: got unexpected break to lengthed map")}if(a===hs)throw new Error(`CBOR decode error: found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(!0!==r&&"string"!=typeof a)throw new Error(`CBOR decode error: non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&s.has(a)||!r&&a in o))throw new Error(`CBOR decode error: found repeat map key "${a}"`);const c=ls(t,n);if(c===hs)throw new Error(`CBOR decode error: found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(a,c):o[a]=c}return r?s:o}(n,e,t);if(n.type===Wr.tag){if(t.tags&&"function"==typeof t.tags[n.value]){const r=ls(e,t);return t.tags[n.value](r)}throw new Error(`CBOR decode error: tag not supported (${n.value})`)}throw new Error("unsupported")}function fs(e,t){if(!(e instanceof Uint8Array))throw new Error("CBOR decode error: data to decode must be a Uint8Array");const n=(t=Object.assign({},cs,t)).tokenizer||new us(e,t),r=ls(n,t);if(r===hs)throw new Error("CBOR decode error: did not find any content to decode");if(r===ds)throw new Error("CBOR decode error: got unexpected break");if(!n.done())throw new Error("CBOR decode error: too many terminals, data makes no sense");return r}const ps={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;const t=Vr.CID.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new Jr(Wr.tag,42),new Jr(Wr.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},gs={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};gs.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Vr.CID.decode(e.subarray(1))};const ys="dag-cbor",bs=113,ms=e=>{return t=e,n=ps,n=Object.assign({},Zo,n),as(t,es,n);var t,n},ws=e=>fs(e,gs),vs={Null:e=>null===e,Int:e=>Number.isInteger(e),Float:e=>"number"==typeof e&&Number.isFinite(e),String:e=>"string"==typeof e,Bool:e=>"boolean"==typeof e,Bytes:e=>e instanceof Uint8Array,Link:e=>!vs.Null(e)&&"object"==typeof e&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!vs.Null(e)&&"object"==typeof e&&e.asCID!==e&&!vs.List(e)&&!vs.Bytes(e)},_s={Int:vs.Int,"CarHeader > version":e=>_s.Int(e),"CarHeader > roots (anon) > valueType (anon)":vs.Link,"CarHeader > roots (anon)":e=>vs.List(e)&&Array.prototype.every.call(e,_s["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>_s["CarHeader > roots (anon)"](e),CarHeader:e=>{const t=e&&Object.keys(e);return vs.Map(e)&&["version"].every((e=>t.includes(e)))&&Object.entries(e).every((([e,t])=>_s["CarHeader > "+e]&&_s["CarHeader > "+e](t)))}},Es=_s.CarHeader;async function xs(e){const t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");const n=Gr.decode(t);return e.seek(Gr.decode.bytes),n}async function ks(e,t){const n=await xs(e);if(0===n)throw new Error("Invalid CAR header (zero length)");const r=await e.exactly(n);e.seek(n);const o=ws(r);if(!Es(o))throw new Error("Invalid CAR header format");if(1!==o.version&&2!==o.version||void 0!==t&&o.version!==t)throw new Error(`Invalid CAR version: ${o.version}${void 0!==t?` (expected ${t})`:""}`);const s=Array.isArray(o.roots);if(1===o.version&&!s||2===o.version&&s)throw new Error("Invalid CAR header format");if(1===o.version)return o;const i=await async function(e){const t=await e.exactly(40),n=new DataView(t.buffer,t.byteOffset,t.byteLength);let r=0;const o={version:2,characteristics:[n.getBigUint64(r,!0),n.getBigUint64(r+=8,!0)],dataOffset:Number(n.getBigUint64(r+=8,!0)),dataSize:Number(n.getBigUint64(r+=8,!0)),indexOffset:Number(n.getBigUint64(r+=8,!0))};return e.seek(40),o}(e);e.seek(i.dataOffset-e.pos);const a=await ks(e,1);return Object.assign(a,i)}async function Ss(e){const t=await e.exactly(2);if(18===t[0]&&32===t[1]){const t=await e.exactly(34);e.seek(34);const n=Hr.decode(t);return Vr.CID.create(0,112,n)}const n=await xs(e);if(1!==n)throw new Error(`Unexpected CID version (${n})`);const r=await xs(e),o=await async function(e){const t=await e.upTo(8);Gr.decode(t);const n=Gr.decode.bytes,r=Gr.decode(t.subarray(Gr.decode.bytes)),o=n+Gr.decode.bytes+r,s=await e.exactly(o);return e.seek(o),s}(e),s=Hr.decode(o);return Vr.CID.create(n,r,s)}async function Cs(e){const t=e.pos;let n=await xs(e);if(0===n)throw new Error("Invalid CAR section (zero length)");return n+=e.pos-t,{cid:await Ss(e),length:n,blockLength:n-Number(e.pos-t)}}async function Ts(e){const{cid:t,blockLength:n}=await Cs(e),r=await e.exactly(n);return e.seek(n),{bytes:r,cid:t}}async function As(e){const t=e.pos,{cid:n,length:r,blockLength:o}=await Cs(e),s={cid:n,length:r,blockLength:o,offset:t,blockOffset:e.pos};return e.seek(s.blockLength),s}function Is(e){const t=(async()=>{const t=await ks(e);if(2===t.version){const n=e.pos-t.dataOffset;e=function(e,t){let n=0;return{async upTo(r){let o=await e.upTo(r);return o.length+n>t&&(o=o.subarray(0,t-n)),o},async exactly(r){const o=await e.exactly(r);if(o.length+n>t)throw new Error("Unexpected end of data");return o},seek(t){n+=t,e.seek(t)},get pos(){return e.pos}}}(e,t.dataSize-n)}return t})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await Ts(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await As(e)}}}Symbol.asyncIterator;class Bs extends class{constructor(e,t,n){this._version=e,this._roots=t,this._iterable=n,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:n,iterator:r}=await async function(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return Ds(function(e){let t=0;return{upTo:async n=>e.subarray(t,t+Math.min(n,e.length-t)),async exactly(n){if(n>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+n)},seek(e){t+=e},get pos(){return t}}}(e))}(e);return new Bs(t,n,r)}static async fromIterable(e){const{version:t,roots:n,iterator:r}=await async function(e){if(!e||"function"!=typeof e[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return Ds(function(e){const t=e[Symbol.asyncIterator]();return function(e){let t=0,n=0,r=0,o=new Uint8Array(0);const s=async t=>{n=o.length-r;const s=[o.subarray(r)];for(;n<t;){const t=await e();if(null==t)break;n<0?t.length>n&&s.push(t.subarray(-n)):s.push(t),n+=t.length}o=new Uint8Array(s.reduce(((e,t)=>e+t.length),0));let i=0;for(const e of s)o.set(e,i),i+=e.length;r=0};return{upTo:async e=>(o.length-r<e&&await s(e),o.subarray(r,r+Math.min(o.length-r,e))),async exactly(e){if(o.length-r<e&&await s(e),o.length-r<e)throw new Error("Unexpected end of data");return o.subarray(r,r+e)},seek(e){t+=e,r+=e},get pos(){return t}}}((async function(){const e=await t.next();return e.done?null:e.value}))}(e))}(e);return new Bs(t,n,r)}}async function Ds(e){const t=Is(e),{version:n,roots:r}=await t.header();return{version:n,roots:r,iterator:t.blocks()}}Symbol.asyncIterator,Symbol.asyncIterator;const Us=new TextDecoder;function Ns(e,t){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[t++];if(n+=r<28?(127&o)<<r:(127&o)*2**r,o<128)break}return[n,t]}function Rs(e,t){let n;[n,t]=Ns(e,t);const r=t+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function Ps(e,t){let n;return[n,t]=Ns(e,t),[7&n,n>>3,t]}function Os(e){const t={},n=e.length;let r=0;for(;r<n;){let n,o;if([n,o,r]=Ps(e,r),1===o){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,r]=Rs(e,r)}else if(2===o){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,r]=Rs(e,r),t.Name=Us.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[t.Tsize,r]=Ns(e,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const Ls=new TextEncoder,$s=2**32;function Ms(e,t){let n=t.length;if("number"==typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");n=zs(t,n,e.Tsize)-1,t[n]=24}if("string"==typeof e.Name){const r=Ls.encode(e.Name);n-=r.length,t.set(r,n),n=zs(t,n,r.length)-1,t[n]=18}return e.Hash&&(n-=e.Hash.length,t.set(e.Hash,n),n=zs(t,n,e.Hash.length)-1,t[n]=10),t.length-n}function js(e){let t=0;if(e.Hash){const n=e.Hash.length;t+=1+n+Fs(n)}if("string"==typeof e.Name){const n=Ls.encode(e.Name).length;t+=1+n+Fs(n)}return"number"==typeof e.Tsize&&(t+=1+Fs(e.Tsize)),t}function zs(e,t,n){const r=t-=Fs(n);for(;n>=2147483648;)e[t++]=127&n|128,n/=128;for(;n>=128;)e[t++]=127&n|128,n>>>=7;return e[t]=n,r}function Fs(e){return e%2==0&&e++,Math.floor((function(e){let t=0;return e>=$s&&(e=Math.floor(e/$s),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+Gs[e]}(e)+6)/7)}const Gs=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Vs=["Data","Links"],Hs=["Hash","Name","Tsize"],qs=new TextEncoder;function Ys(e,t){if(e===t)return 0;const n=e.Name?qs.encode(e.Name):[],r=t.Name?qs.encode(t.Name):[];let o=n.length,s=r.length;for(let e=0,t=Math.min(o,s);e<t;++e)if(n[e]!==r[e]){o=n[e],s=r[e];break}return o<s?-1:s<o?1:0}function Ws(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function Js(e){if("object"==typeof e.asCID){const t=Vr.CID.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let n=Vr.CID.asCID(e.Hash);try{n||("string"==typeof e.Hash?n=Vr.CID.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=Vr.CID.decode(e.Hash)))}catch(e){throw new TypeError(`Invalid DAG-PB form: ${e.message}`)}n&&(t.Hash=n)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof e.Name&&(t.Name=e.Name),"number"==typeof e.Tsize&&(t.Tsize=e.Tsize),t}function Ks(e){if((e instanceof Uint8Array||"string"==typeof e)&&(e={Data:e}),"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"==typeof e.Data)t.Data=qs.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(Js),t.Links.sort(Ys)}else t.Links=[];return t}function Xs(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Ws(e,Vs))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){const n=e.Links[t];if(!n||"object"!=typeof n||Array.isArray(n))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Ws(n,Hs))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash.asCID!==n.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!=typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize&&("number"!=typeof n.Tsize||n.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===Ys(n,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Qs(e,t=[]){return Ks({Data:e,Links:t})}function Zs(e,t,n){return Js({Hash:n,Name:e,Tsize:t})}const ei="dag-pb",ti=112;function ni(e){Xs(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),function(e){const t=function(e){let t=0;if(e.Data){const n=e.Data.length;t+=1+n+Fs(n)}if(e.Links)for(const n of e.Links){const e=js(n);t+=1+e+Fs(e)}return t}(e),n=new Uint8Array(t);let r=t;if(e.Data&&(r-=e.Data.length,n.set(e.Data,r),r=zs(n,r,e.Data.length)-1,n[r]=10),e.Links)for(let t=e.Links.length-1;t>=0;t--){const o=Ms(e.Links[t],n.subarray(0,r));r-=o,r=zs(n,r,o)-1,n[r]=18}return n}(t)}function ri(e){const t=function(e){const t=e.length;let n,r,o=0,s=!1;for(;o<t;){let t,i;if([t,i,o]=Ps(e,o),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===i){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,o]=Rs(e,o),n&&(s=!0)}else{if(2!==i)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${i}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;n||(n=[]),[t,o]=Rs(e,o),n.push(Os(t))}}}if(o>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return r&&(i.Data=r),i.Links=n||[],i}(e),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map((e=>{const t={};try{t.Hash=Vr.CID.decode(e.Hash)}catch(e){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),n}var oi=n(6441),si=n(9885);class ii extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===Wr.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===Wr.map&&(t.elements++,1!==t.elements&&(t.elements%2==1?e.push([44]):e.push([58]))))}[Wr.uint.major](e,t){this.prefix(e);const n=String(t.value),r=[];for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);e.push(r)}[Wr.negint.major](e,t){this[Wr.uint.major](e,t)}[Wr.bytes.major](e,t){throw new Error("CBOR encode error: unsupported type: Uint8Array")}[Wr.string.major](e,t){this.prefix(e);const n=no(JSON.stringify(t.value));e.push(n.length>32?eo(n):n)}[Wr.array.major](e,t){this.prefix(e),this.inRecursive.push({type:Wr.array,elements:0}),e.push([91])}[Wr.map.major](e,t){this.prefix(e),this.inRecursive.push({type:Wr.map,elements:0}),e.push([123])}[Wr.tag.major](e,t){}[Wr.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===Wr.array)e.push([93]);else{if(t.type!==Wr.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error("CBOR encode error: unsupported type: undefined");if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const n=String(t.value),r=[];let o=!1;for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e),o||46!==r[e]&&101!==r[e]&&69!==r[e]||(o=!0);o||(r.push(46),r.push(48)),e.push(r)}}const ai={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error("CBOR encode error: complex map keys are not supported");const n=e[0],r=t[0];if(n.type!==Wr.string||r.type!==Wr.string)throw new Error("CBOR encode error: non-string map keys are not supported");if(n<r)return-1;if(n>r)return 1;throw new Error("CBOR encode error: unexpected duplicate map keys, this is not supported")}};class ci{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`CBOR decode error: unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`CBOR decode error: unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,n=!1;const r=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this.pos++}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new Jr(Wr.uint,0,this.pos-e);this.pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`CBOR decode error: unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(n)throw new Error(`CBOR decode error: unexpected token at position ${this.pos}`);n=!0,this.pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,r([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(o);return n?new Jr(Wr.float,s,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new Jr(s>=0?Wr.uint:Wr.negint,s,this.pos-e):new Jr(s>=0?Wr.uint:Wr.negint,BigInt(o),this.pos-e)}parseString(){if(34!==this.ch())throw new Error(`CBOR decode error: unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let e=this.pos,t=0;e<this.data.length&&t<65536;e++,t++){const n=this.data[e];if(92===n||n<32||n>=128)break;if(34===n){const n=String.fromCharCode.apply(null,this.data.subarray(this.pos,e));return this.pos=e+1,new Jr(Wr.string,n,t)}}const e=this.pos,t=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`CBOR decode error: unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`CBOR decode error: unexpected unicode escape character at position ${this.pos}`);t=t-65+10}e=16*e+t,this.pos++}return e},r=()=>{const e=this.ch();let n,r,o,s,i=null,a=e>239?4:e>223?3:e>191?2:1;if(this.pos+a>this.data.length)throw new Error(`CBOR decode error: unexpected unicode sequence at position ${this.pos}`);switch(a){case 1:e<128&&(i=e);break;case 2:n=this.data[this.pos+1],128==(192&n)&&(s=(31&e)<<6|63&n,s>127&&(i=s));break;case 3:n=this.data[this.pos+1],r=this.data[this.pos+2],128==(192&n)&&128==(192&r)&&(s=(15&e)<<12|(63&n)<<6|63&r,s>2047&&(s<55296||s>57343)&&(i=s));break;case 4:n=this.data[this.pos+1],r=this.data[this.pos+2],o=this.data[this.pos+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&(s=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&o,s>65535&&s<1114112&&(i=s))}null===i?(i=65533,a=1):i>65535&&(i-=65536,t.push(i>>>10&1023|55296),i=56320|1023&i),t.push(i),this.pos+=a};for(;!this.done();){const o=this.ch();let s;switch(o){case 92:if(this.pos++,this.done())throw new Error(`CBOR decode error: unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`CBOR decode error: unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Jr(Wr.string,uo(t),this.pos-e);default:if(o<32)throw new Error(`CBOR decode error: invalid control character at position ${this.pos}`);o<128?(t.push(o),this.pos++):r()}}throw new Error(`CBOR decode error: unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Jr(Wr.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Jr(Wr.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Jr(Wr.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Jr(Wr.false,!1,5);case 116:return this.expect([116,114,117,101]),new Jr(Wr.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`CBOR decode error: unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new Jr(Wr.break,void 0,1);if(44!==this.ch())throw new Error(`CBOR decode error: unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new Jr(Wr.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Jr(Wr.break,void 0,1);if(44!==this.ch())throw new Error(`CBOR decode error: unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new Jr(Wr.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`CBOR decode error: unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`CBOR decode error: unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function ui(e){const t=si.base64.encode(e).slice(1);return[new Jr(Wr.map,1/0,1),new Jr(Wr.string,"/",1),new Jr(Wr.map,1/0,1),new Jr(Wr.string,"bytes",5),new Jr(Wr.string,t,t.length),new Jr(Wr.break,void 0,1),new Jr(Wr.break,void 0,1)]}const hi={typeEncoders:{Object:function(e){if(e.asCID!==e)return null;const t=oi.k0.asCID(e);if(!t)return null;const n=t.toString();return[new Jr(Wr.map,1/0,1),new Jr(Wr.string,"/",1),new Jr(Wr.string,n,n.length),new Jr(Wr.break,void 0,1)]},Uint8Array:ui,Buffer:ui,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class di extends ci{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Wr.map){const e=this._next();if(e.type===Wr.string&&"/"===e.value){const e=this._next();if(e.type===Wr.string){if(this._next().type!==Wr.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new Jr(Wr.tag,42,0)}if(e.type===Wr.map){const e=this._next();if(e.type===Wr.string&&"bytes"===e.value){const e=this._next();if(e.type===Wr.string){for(let e=0;e<2;e++)if(this._next().type!==Wr.break)throw new Error("Invalid encoded Bytes form");const t=si.base64.decode(`m${e.value}`);return new Jr(Wr.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const li={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};li.tags[42]=oi.k0.parse;const fi="dag-json",pi=297,gi=e=>{return t=e,n=hi,n=Object.assign({},ai,n),as(t,new ii,n);var t,n},yi=e=>function(e,t){return fs(e,t=Object.assign({tokenizer:new ci(e,t)},t))}(e,Object.assign(li,{tokenizer:new di(e,li)}));var bi=n(2114);const mi=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var h=n[e.charCodeAt(t)];if(255===h)return;for(var d=0,l=s-1;(0!==h||d<o)&&-1!==l;l--,d++)h+=a*i[l]>>>0,i[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=s-o;f!==s&&0===i[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=i[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*h+1>>>0,u=new Uint8Array(i);o!==s;){for(var d=t[o],l=0,f=i-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=l,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}},wi=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class vi{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _i{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return xi(this,e)}}class Ei{constructor(e){this.decoders=e}or(e){return xi(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xi=(e,t)=>new Ei({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ki{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new vi(e,t,n),this.decoder=new _i(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Si=({name:e,prefix:t,encode:n,decode:r})=>new ki(e,t,n,r),Ci=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=mi(n,t);return Si({prefix:e,name:t,encode:r,decode:e=>wi(o(e))})},Ti=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Si({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(i&&(s+=t[o&a<<n-i]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=o[e[t]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);c=c<<n|s,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i})(t,r,n,e)}),Ai=Ti({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ii=(Ti({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ti({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ti({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ti({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ti({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ti({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ti({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ti({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Ci({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}));Ci({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Bi=Math.pow(2,31),Di=Math.pow(2,7),Ui=Math.pow(2,14),Ni=Math.pow(2,21),Ri=Math.pow(2,28),Pi=Math.pow(2,35),Oi=Math.pow(2,42),Li=Math.pow(2,49),$i=Math.pow(2,56),Mi=Math.pow(2,63);const ji={encode:function e(t,n,r){n=n||[];for(var o=r=r||0;t>=Bi;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},decode:function e(t,n){var r,o=0,s=0,i=n=n||0,a=t.length;do{if(i>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[i++],o+=s<28?(127&r)<<s:(127&r)*Math.pow(2,s),s+=7}while(r>=128);return e.bytes=i-n,o},encodingLength:function(e){return e<Di?1:e<Ui?2:e<Ni?3:e<Ri?4:e<Pi?5:e<Oi?6:e<Li?7:e<$i?8:e<Mi?9:10}},zi=(e,t=0)=>[ji.decode(e,t),ji.decode.bytes],Fi=(e,t,n=0)=>(ji.encode(e,t,n),t),Gi=e=>ji.encodingLength(e),Vi=e=>{const t=wi(e),[n,r]=zi(t),[o,s]=zi(t.subarray(r)),i=t.subarray(r+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new Hi(n,o,i,t)};class Hi{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const qi=(e,t)=>{const{bytes:n,version:r}=e;return 0===r?Xi(n,Wi(e),t||Ii.encoder):Qi(n,Wi(e),t||Ai.encoder)},Yi=new WeakMap,Wi=e=>{const t=Yi.get(e);if(null==t){const t=new Map;return Yi.set(e,t),t}return t};class Ji{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==Zi)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ea)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ji.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=((e,t)=>{const n=t.byteLength,r=Gi(e),o=r+Gi(n),s=new Uint8Array(o+n);return Fi(e,s,0),Fi(n,s,r),s.set(t,o),new Hi(e,n,t,s)})(e,t);return Ji.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Ji.equals(this,e)}static equals(e,t){const n=t;return n&&e.code===n.code&&e.version===n.version&&((e,t)=>{if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0})(e.bytes,n.bytes)}})(e.multihash,n.multihash)}toString(e){return qi(this,e)}toJSON(){return{"/":qi(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof Ji)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:o}=t;return new Ji(e,n,r,o||ta(e,n,r.bytes))}if(!0===t[na]){const{version:e,multihash:n,code:r}=t,o=Vi(n);return Ji.create(e,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==Zi)throw new Error(`Version 0 CID must use dag-pb (code: ${Zi}) block encoding`);return new Ji(e,t,n,n.bytes);case 1:{const r=ta(e,t,n.bytes);return new Ji(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Ji.create(0,Zi,e)}static createV1(e,t){return Ji.create(1,e,t)}static decode(e){const[t,n]=Ji.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Ji.inspectBytes(e),n=t.size-t.multihashSize,r=wi(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),s=new Hi(t.multihashCode,t.digestSize,o,r);return[0===t.version?Ji.createV0(s):Ji.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=zi(e.subarray(t));return t+=r,n};let r=n(),o=Zi;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const s=t,i=n(),a=n(),c=t+a;return{version:r,codec:o,multihashCode:i,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){const[n,r]=Ki(e,t),o=Ji.decode(r);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return Wi(o).set(n,e),o}}const Ki=(e,t)=>{switch(e[0]){case"Q":{const n=t||Ii;return[Ii.prefix,n.decode(`${Ii.prefix}${e}`)]}case Ii.prefix:{const n=t||Ii;return[Ii.prefix,n.decode(e)]}case Ai.prefix:{const n=t||Ai;return[Ai.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Xi=(e,t,n)=>{const{prefix:r}=n;if(r!==Ii.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o},Qi=(e,t,n)=>{const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o},Zi=112,ea=18,ta=(e,t,n)=>{const r=Gi(e),o=r+Gi(t),s=new Uint8Array(o+n.byteLength);return Fi(e,s,0),Fi(t,s,r),s.set(n,o),s},na=Symbol.for("@ipld/js-cid/CID"),ra=["string","number","bigint","symbol"],oa=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class sa{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}sa.uint=new sa(0,"uint",!0),sa.negint=new sa(1,"negint",!0),sa.bytes=new sa(2,"bytes",!0),sa.string=new sa(3,"string",!0),sa.array=new sa(4,"array",!1),sa.map=new sa(5,"map",!1),sa.tag=new sa(6,"tag",!1),sa.float=new sa(7,"float",!0),sa.false=new sa(7,"false",!0),sa.true=new sa(7,"true",!0),sa.null=new sa(7,"null",!0),sa.undefined=new sa(7,"undefined",!0),sa.break=new sa(7,"break",!0);class ia{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const aa=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,ca=new TextDecoder,ua=new TextEncoder;function ha(e){return aa&&globalThis.Buffer.isBuffer(e)}const da=aa?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):ba(e,t,n):(e,t,n)=>n-t>64?ca.decode(e.subarray(t,n)):ba(e,t,n),la=aa?e=>e.length>64?globalThis.Buffer.from(e):ya(e):e=>e.length>64?ua.encode(e):ya(e),fa=aa?(e,t,n)=>ha(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),pa=aa?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),function(e){return e instanceof Uint8Array?ha(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let t of e)r+t.length>n.length&&(t=t.subarray(0,n.length-r)),n.set(t,r),r+=t.length;return n},ga=aa?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ya(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t}function ba(e,t,n){const r=[];for(;t<n;){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let n,r,a,c;switch(i){case 1:o<128&&(s=o);break;case 2:n=e[t+1],128==(192&n)&&(c=(31&o)<<6|63&n,c>127&&(s=c));break;case 3:n=e[t+1],r=e[t+2],128==(192&n)&&128==(192&r)&&(c=(15&o)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=e[t+1],r=e[t+2],a=e[t+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),t+=i}return function(e){const t=e.length;if(t<=ma)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ma));return n}(r)}const ma=4096,wa=[];function va(e,t,n){if(e.length-t<n)throw new Error("CBOR decode error: not enough data for type")}wa[23]=1,wa[24]=2,wa[25]=3,wa[26]=5,wa[27]=9;const _a=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Ea(e,t,n){va(e,t,1);const r=e[t];if(!0===n.strict&&r<_a[0])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return r}function xa(e,t,n){va(e,t,2);const r=e[t]<<8|e[t+1];if(!0===n.strict&&r<_a[1])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return r}function ka(e,t,n){va(e,t,4);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===n.strict&&r<_a[2])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");return r}function Sa(e,t,n){va(e,t,8);const r=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&s<_a[3])throw new Error("CBOR decode error: integer encoded in more bytes than necessary (strict decode)");if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===n.allowBigInt)return s;throw new Error("CBOR decode error: integers outside of the safe integer range are not supported")}function Ca(e,t){return Ta(e,0,t.value)}function Ta(e,t,n){if(n<_a[0]){const r=Number(n);e.push([t|r])}else if(n<_a[1]){const r=Number(n);e.push([24|t,r])}else if(n<_a[2]){const r=Number(n);e.push([25|t,r>>>8,255&r])}else if(n<_a[3]){const r=Number(n);e.push([26|t,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<_a[4]))throw new Error("CBOR decode error: encountered BigInt larger than allowable range");{const n=[27|t,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&s,s>>=8,n[3]=255&s,s>>=8,n[2]=255&s,s>>=8,n[1]=255&s,e.push(n)}}}Ca.encodedSize=function(e){return Ta.encodedSize(e.value)},Ta.encodedSize=function(e){return e<_a[0]?1:e<_a[1]?2:e<_a[2]?3:e<_a[3]?5:9},Ca.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const Aa=BigInt(-1),Ia=BigInt(1);function Ba(e,t){const n=t.value,r="bigint"==typeof n?n*Aa-Ia:-1*n-1;Ta(e,t.type.majorEncoded,r)}function Da(e,t,n,r){va(e,t,n+r);const o=fa(e,t+n,t+n+r);return new ia(sa.bytes,o,n+r)}function Ua(e,t,n,r){return Da(e,t,1,n)}function Na(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===sa.string?la(e.value):e.value),e.encodedBytes}function Ra(e,t){const n=Na(t);Ta(e,t.type.majorEncoded,n.length),e.push(n)}function Pa(e,t,n,r,o){const s=n+r;va(e,t,s);const i=new ia(sa.string,da(e,t+n,t+s),s);return!0===o.retainStringBytes&&(i.byteValue=fa(e,t+n,t+s)),i}function Oa(e,t,n,r){return Pa(e,t,1,n,r)}Ba.encodedSize=function(e){const t=e.value,n="bigint"==typeof t?t*Aa-Ia:-1*t-1;return n<_a[0]?1:n<_a[1]?2:n<_a[2]?3:n<_a[3]?5:9},Ba.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},Ra.encodedSize=function(e){const t=Na(e);return Ta.encodedSize(t.length)+t.length},Ra.compareTokens=function(e,t){return n=Na(e),r=Na(t),n.length<r.length?-1:n.length>r.length?1:function(e,t){if(ha(e)&&ha(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}(n,r);var n,r};const La=Ra;function $a(e,t,n,r){return new ia(sa.array,r,n)}function Ma(e,t,n,r){return $a(0,0,1,n)}function ja(e,t){Ta(e,sa.array.majorEncoded,t.value)}function za(e,t,n,r){return new ia(sa.map,r,n)}function Fa(e,t,n,r){return za(0,0,1,n)}function Ga(e,t){Ta(e,sa.map.majorEncoded,t.value)}function Va(e,t,n,r){return new ia(sa.tag,n,1)}function Ha(e,t){Ta(e,sa.tag.majorEncoded,t.value)}function qa(e,t,n){if(n){if(!1===n.allowNaN&&Number.isNaN(e))throw new Error("CBOR decode error: NaN values are not supported");if(!1===n.allowInfinity&&(e===1/0||e===-1/0))throw new Error("CBOR decode error: Infinity values are not supported")}return new ia(sa.float,e,t)}function Ya(e,t,n){const r=t.value;if(!1===r)e.push([20|sa.float.majorEncoded]);else if(!0===r)e.push([21|sa.float.majorEncoded]);else if(null===r)e.push([22|sa.float.majorEncoded]);else if(void 0===r)e.push([23|sa.float.majorEncoded]);else{let t,s=!1;n&&!0===n.float64||(Xa(r),t=Qa(Ka,1),r===t||Number.isNaN(r)?(Ka[0]=249,e.push(Ka.slice(0,3)),s=!0):(Za(r),t=ec(Ka,1),r===t&&(Ka[0]=250,e.push(Ka.slice(0,5)),s=!0))),s||(o=r,Ja.setFloat64(0,o,!1),t=tc(Ka,1),Ka[0]=251,e.push(Ka.slice(0,9)))}var o}ja.compareTokens=Ca.compareTokens,ja.encodedSize=function(e){return Ta.encodedSize(e.value)},Ga.compareTokens=Ca.compareTokens,Ga.encodedSize=function(e){return Ta.encodedSize(e.value)},Ha.compareTokens=Ca.compareTokens,Ha.encodedSize=function(e){return Ta.encodedSize(e.value)},Ya.encodedSize=function(e,t){const n=e.value;if(!1===n||!0===n||null==n)return 1;if(!t||!0!==t.float64){Xa(n);let e=Qa(Ka,1);if(n===e||Number.isNaN(n))return 3;if(Za(n),e=ec(Ka,1),n===e)return 5}return 9};const Wa=new ArrayBuffer(9),Ja=new DataView(Wa,1),Ka=new Uint8Array(Wa,0);function Xa(e){if(e===1/0)Ja.setUint16(0,31744,!1);else if(e===-1/0)Ja.setUint16(0,64512,!1);else if(Number.isNaN(e))Ja.setUint16(0,32256,!1);else{Ja.setFloat32(0,e);const t=Ja.getUint32(0),n=(2139095040&t)>>23,r=8388607&t;if(255===n)Ja.setUint16(0,31744,!1);else if(0===n)Ja.setUint16(0,(2147483648&e)>>16|r>>13,!1);else{const e=n-127;e<-24?Ja.setUint16(0,0):e<-14?Ja.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):Ja.setUint16(0,(2147483648&t)>>16|e+15<<10|r>>13,!1)}}}function Qa(e,t){if(e.length-t<2)throw new Error("CBOR decode error: not enough data for float16");const n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let s;return s=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-s:s}function Za(e){Ja.setFloat32(0,e,!1)}function ec(e,t){if(e.length-t<4)throw new Error("CBOR decode error: not enough data for float32");const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function tc(e,t){if(e.length-t<8)throw new Error("CBOR decode error: not enough data for float64");const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}function nc(e,t,n){throw new Error(`CBOR decode error: encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function rc(e){return()=>{throw new Error(`CBOR decode error: ${e}`)}}Ya.compareTokens=Ca.compareTokens;const oc=[];for(let e=0;e<=23;e++)oc[e]=nc;oc[24]=function(e,t,n,r){return new ia(sa.uint,Ea(e,t+1,r),2)},oc[25]=function(e,t,n,r){return new ia(sa.uint,xa(e,t+1,r),3)},oc[26]=function(e,t,n,r){return new ia(sa.uint,ka(e,t+1,r),5)},oc[27]=function(e,t,n,r){return new ia(sa.uint,Sa(e,t+1,r),9)},oc[28]=nc,oc[29]=nc,oc[30]=nc,oc[31]=nc;for(let e=32;e<=55;e++)oc[e]=nc;oc[56]=function(e,t,n,r){return new ia(sa.negint,-1-Ea(e,t+1,r),2)},oc[57]=function(e,t,n,r){return new ia(sa.negint,-1-xa(e,t+1,r),3)},oc[58]=function(e,t,n,r){return new ia(sa.negint,-1-ka(e,t+1,r),5)},oc[59]=function(e,t,n,r){const o=Sa(e,t+1,r);if("bigint"!=typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new ia(sa.negint,e,9)}if(!0!==r.allowBigInt)throw new Error("CBOR decode error: integers outside of the safe integer range are not supported");return new ia(sa.negint,Aa-BigInt(o),9)},oc[60]=nc,oc[61]=nc,oc[62]=nc,oc[63]=nc;for(let e=64;e<=87;e++)oc[e]=Ua;oc[88]=function(e,t,n,r){return Da(e,t,2,Ea(e,t+1,r))},oc[89]=function(e,t,n,r){return Da(e,t,3,xa(e,t+1,r))},oc[90]=function(e,t,n,r){return Da(e,t,5,ka(e,t+1,r))},oc[91]=function(e,t,n,r){const o=Sa(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer bytes lengths not supported");return Da(e,t,9,o)},oc[92]=nc,oc[93]=nc,oc[94]=nc,oc[95]=rc("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)oc[e]=Oa;oc[120]=function(e,t,n,r){return Pa(e,t,2,Ea(e,t+1,r),r)},oc[121]=function(e,t,n,r){return Pa(e,t,3,xa(e,t+1,r),r)},oc[122]=function(e,t,n,r){return Pa(e,t,5,ka(e,t+1,r),r)},oc[123]=function(e,t,n,r){const o=Sa(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer string lengths not supported");return Pa(e,t,9,o,r)},oc[124]=nc,oc[125]=nc,oc[126]=nc,oc[127]=rc("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)oc[e]=Ma;oc[152]=function(e,t,n,r){return $a(0,0,2,Ea(e,t+1,r))},oc[153]=function(e,t,n,r){return $a(0,0,3,xa(e,t+1,r))},oc[154]=function(e,t,n,r){return $a(0,0,5,ka(e,t+1,r))},oc[155]=function(e,t,n,r){const o=Sa(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer array lengths not supported");return $a(0,0,9,o)},oc[156]=nc,oc[157]=nc,oc[158]=nc,oc[159]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return $a(0,0,1,1/0)};for(let e=160;e<=183;e++)oc[e]=Fa;oc[184]=function(e,t,n,r){return za(0,0,2,Ea(e,t+1,r))},oc[185]=function(e,t,n,r){return za(0,0,3,xa(e,t+1,r))},oc[186]=function(e,t,n,r){return za(0,0,5,ka(e,t+1,r))},oc[187]=function(e,t,n,r){const o=Sa(e,t+1,r);if("bigint"==typeof o)throw new Error("CBOR decode error: 64-bit integer map lengths not supported");return za(0,0,9,o)},oc[188]=nc,oc[189]=nc,oc[190]=nc,oc[191]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return za(0,0,1,1/0)};for(let e=192;e<=215;e++)oc[e]=Va;oc[216]=function(e,t,n,r){return new ia(sa.tag,Ea(e,t+1,r),2)},oc[217]=function(e,t,n,r){return new ia(sa.tag,xa(e,t+1,r),3)},oc[218]=function(e,t,n,r){return new ia(sa.tag,ka(e,t+1,r),5)},oc[219]=function(e,t,n,r){return new ia(sa.tag,Sa(e,t+1,r),9)},oc[220]=nc,oc[221]=nc,oc[222]=nc,oc[223]=nc;for(let e=224;e<=243;e++)oc[e]=rc("simple values are not supported");oc[244]=nc,oc[245]=nc,oc[246]=nc,oc[247]=function(e,t,n,r){if(!1===r.allowUndefined)throw new Error("CBOR decode error: undefined values are not supported");return!0===r.coerceUndefinedToNull?new ia(sa.null,null,1):new ia(sa.undefined,void 0,1)},oc[248]=rc("simple values are not supported"),oc[249]=function(e,t,n,r){return qa(Qa(e,t+1),3,r)},oc[250]=function(e,t,n,r){return qa(ec(e,t+1),5,r)},oc[251]=function(e,t,n,r){return qa(tc(e,t+1),9,r)},oc[252]=nc,oc[253]=nc,oc[254]=nc,oc[255]=function(e,t,n,r){if(!1===r.allowIndefinite)throw new Error("CBOR decode error: indefinite length items not allowed");return new ia(sa.break,void 0,1)};const sc=[];for(let e=0;e<24;e++)sc[e]=new ia(sa.uint,e,1);for(let e=-1;e>=-24;e--)sc[31-e]=new ia(sa.negint,e,1);sc[64]=new ia(sa.bytes,new Uint8Array(0),1),sc[96]=new ia(sa.string,"",1),sc[128]=new ia(sa.array,0,1),sc[160]=new ia(sa.map,0,1),sc[244]=new ia(sa.false,!1,1),sc[245]=new ia(sa.true,!0,1),sc[246]=new ia(sa.null,null,1),function(){const e=[];e[sa.uint.major]=Ca,e[sa.negint.major]=Ba,e[sa.bytes.major]=Ra,e[sa.string.major]=La,e[sa.array.major]=ja,e[sa.map.major]=Ga,e[sa.tag.major]=Ha,e[sa.float.major]=Ya}(),new class{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=ga(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=fa(n,0,this.cursor)}else t=pa(this.chunks,this.cursor);return e&&this.reset(),t}};class ic{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error("CBOR encode error: object contains circular references");return new ic(t,e)}}const ac={null:new ia(sa.null,null),undefined:new ia(sa.undefined,void 0),true:new ia(sa.true,!0),false:new ia(sa.false,!1),emptyArray:new ia(sa.array,0),emptyMap:new ia(sa.map,0)},cc={number:(e,t,n,r)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new ia(e>=0?sa.uint:sa.negint,e):new ia(sa.float,e),bigint:(e,t,n,r)=>e>=BigInt(0)?new ia(sa.uint,e):new ia(sa.negint,e),Uint8Array:(e,t,n,r)=>new ia(sa.bytes,e),string:(e,t,n,r)=>new ia(sa.string,e),boolean:(e,t,n,r)=>e?ac.true:ac.false,null:(e,t,n,r)=>ac.null,undefined:(e,t,n,r)=>ac.undefined,ArrayBuffer:(e,t,n,r)=>new ia(sa.bytes,new Uint8Array(e)),DataView:(e,t,n,r)=>new ia(sa.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,n,r){if(!e.length)return!0===n.addBreakTokens?[ac.emptyArray,new ia(sa.break)]:ac.emptyArray;r=ic.createCheck(r,e);const o=[];let s=0;for(const t of e)o[s++]=uc(t,n,r);return n.addBreakTokens?[new ia(sa.array,e.length),o,new ia(sa.break)]:[new ia(sa.array,e.length),o]},Object(e,t,n,r){const o="Object"!==t,s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return!0===n.addBreakTokens?[ac.emptyMap,new ia(sa.break)]:ac.emptyMap;r=ic.createCheck(r,e);const a=[];let c=0;for(const t of s)a[c++]=[uc(t,n,r),uc(o?e.get(t):e[t],n,r)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(a,n),n.addBreakTokens?[new ia(sa.map,i),a,new ia(sa.break)]:[new ia(sa.map,i),a]}};cc.Map=cc.Object,cc.Buffer=cc.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))cc[`${e}Array`]=cc.DataView;function uc(e,t={},n){const r=function(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(ra.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const n=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(oa.includes(t))return t}(e);return n||"Object"}(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||cc[r];if("function"==typeof o){const s=o(e,r,t,n);if(null!=s)return s}const s=cc[r];if(!s)throw new Error(`CBOR encode error: unsupported type: ${r}`);return s(e,r,t,n)}const hc={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class dc{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const e=this.data[this._pos];let t=sc[e];if(void 0===t){const n=oc[e];if(!n)throw new Error(`CBOR decode error: no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const r=31&e;t=n(this.data,this._pos,r,this.options)}return this._pos+=t.encodedLength,t}}const lc=Symbol.for("DONE"),fc=Symbol.for("BREAK");function pc(e,t){if(e.done())return lc;const n=e.next();if(n.type===sa.break)return fc;if(n.type.terminal)return n.value;if(n.type===sa.array)return function(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=pc(t,n);if(s===fc){if(e.value===1/0)break;throw new Error("CBOR decode error: got unexpected break to lengthed array")}if(s===lc)throw new Error(`CBOR decode error: found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}(n,e,t);if(n.type===sa.map)return function(e,t,n){const r=!0===n.useMaps,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const a=pc(t,n);if(a===fc){if(e.value===1/0)break;throw new Error("CBOR decode error: got unexpected break to lengthed map")}if(a===lc)throw new Error(`CBOR decode error: found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(!0!==r&&"string"!=typeof a)throw new Error(`CBOR decode error: non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&s.has(a)||!r&&a in o))throw new Error(`CBOR decode error: found repeat map key "${a}"`);const c=pc(t,n);if(c===lc)throw new Error(`CBOR decode error: found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(a,c):o[a]=c}return r?s:o}(n,e,t);if(n.type===sa.tag){if(t.tags&&"function"==typeof t.tags[n.value]){const r=pc(e,t);return t.tags[n.value](r)}throw new Error(`CBOR decode error: tag not supported (${n.value})`)}throw new Error("unsupported")}function gc(e,t){const[n,r]=function(e,t){if(!(e instanceof Uint8Array))throw new Error("CBOR decode error: data to decode must be a Uint8Array");const n=(t=Object.assign({},hc,t)).tokenizer||new dc(e,t),r=pc(n,t);if(r===lc)throw new Error("CBOR decode error: did not find any content to decode");if(r===fc)throw new Error("CBOR decode error: got unexpected break");return[r,e.subarray(n.pos())]}(e,t);if(r.length>0)throw new Error("CBOR decode error: too many terminals, data makes no sense");return n}const yc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};yc.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ji.decode(e.subarray(1))};const bc=new TextDecoder;function mc(e,t){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[t++];if(n+=r<28?(127&o)<<r:(127&o)*2**r,o<128)break}return[n,t]}function wc(e,t){let n;[n,t]=mc(e,t);const r=t+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,r),r]}function vc(e,t){let n;return[n,t]=mc(e,t),[7&n,n>>3,t]}function _c(e){const t={},n=e.length;let r=0;for(;r<n;){let n,o;if([n,o,r]=vc(e,r),1===o){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,r]=wc(e,r)}else if(2===o){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,r]=wc(e,r),t.Name=bc.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error(`protobuf: (PBLink) wrong wireType (${n}) for Tsize`);[t.Tsize,r]=mc(e,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function Ec(e){const t=function(e){const t=e.length;let n,r,o=0,s=!1;for(;o<t;){let t,i;if([t,i,o]=vc(e,o),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===i){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,o]=wc(e,o),n&&(s=!0)}else{if(2!==i)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${i}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;n||(n=[]),[t,o]=wc(e,o),n.push(_c(t))}}}if(o>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return r&&(i.Data=r),i.Links=n||[],i}(e),n={};return t.Data&&(n.Data=t.Data),t.Links&&(n.Links=t.Links.map((e=>{const t={};try{t.Hash=Ji.decode(e.Hash)}catch(e){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),n}new TextEncoder,new TextEncoder;class xc extends Event{constructor(e,t){super(e),this.detail=t}}const kc=function(e,t,n,r){const o=BigInt(e.length),s=BigInt(t+o);return n>=s||r<t?new Uint8Array(0):(r>=t&&r<s&&(e=e.subarray(0,Number(r-t))),n>=t&&n<s&&(e=e.subarray(Number(n-t))),e)},Sc=(e,t=0,n=e)=>{const r=BigInt(e),o=BigInt(t??0);let s=BigInt(n);if(s!==r&&(s=o+s),s>r&&(s=r),o<0n)throw bi(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>r)throw bi(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(s<0n)throw bi(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(s>r)throw bi(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:o,end:s}},Cc=new Float32Array([-0]),Tc=new Uint8Array(Cc.buffer);function Ac(e,t,n){Cc[0]=e,t[n]=Tc[0],t[n+1]=Tc[1],t[n+2]=Tc[2],t[n+3]=Tc[3]}const Ic=new Float64Array([-0]),Bc=new Uint8Array(Ic.buffer);function Dc(e,t,n){Ic[0]=e,t[n]=Bc[0],t[n+1]=Bc[1],t[n+2]=Bc[2],t[n+3]=Bc[3],t[n+4]=Bc[4],t[n+5]=Bc[5],t[n+6]=Bc[6],t[n+7]=Bc[7]}const Uc=BigInt(Number.MAX_SAFE_INTEGER),Nc=BigInt(Number.MIN_SAFE_INTEGER);class Rc{lo;hi;constructor(e,t){this.lo=0|e,this.hi=0|t}toNumber(e=!1){if(!e&&this.hi>>>31>0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!=0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(0n===e)return Pc;if(e<Uc&&e>Nc)return this.fromNumber(Number(e));const t=e<0n;t&&(e=-e);let n=e>>32n,r=e-(n<<32n);return t&&(n=0n|~n,r=0n|~r,++r>Oc&&(r=0n,++n>Oc&&(n=0n))),new Rc(Number(r),Number(n))}static fromNumber(e){if(0===e)return Pc;const t=e<0;t&&(e=-e);let n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new Rc(n,r)}static from(e){return"number"==typeof e?Rc.fromNumber(e):"bigint"==typeof e?Rc.fromBigInt(e):"string"==typeof e?Rc.fromBigInt(BigInt(e)):null!=e.low||null!=e.high?new Rc(e.low>>>0,e.high>>>0):Pc}}const Pc=new Rc(0,0);Pc.toBigInt=function(){return 0n},Pc.zzEncode=Pc.zzDecode=function(){return this},Pc.length=function(){return 1};const Oc=4294967296n;function Lc(e,t,n){const r=n;let o,s;for(let r=0;r<e.length;++r)o=e.charCodeAt(r),o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&56320==(64512&(s=e.charCodeAt(r+1)))?(o=65536+((1023&o)<<10)+(1023&s),++r,t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128);return n-r}function $c(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Mc(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class jc{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,$c(this,10);return e}int32(){return 0|this.uint32()}sint32(){const e=this.uint32();return e>>>1^-(1&e)|0}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw $c(this,4);return Mc(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw $c(this,4);return 0|Mc(this.buf,this.pos+=4)}float(){if(this.pos+4>this.len)throw $c(this,4);const e=function(e,t){return Tc[0]=e[t],Tc[1]=e[t+1],Tc[2]=e[t+2],Tc[3]=e[t+3],Cc[0]}(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw $c(this,4);const e=function(e,t){return Bc[0]=e[t],Bc[1]=e[t+1],Bc[2]=e[t+2],Bc[3]=e[t+3],Bc[4]=e[t+4],Bc[5]=e[t+5],Bc[6]=e[t+6],Bc[7]=e[t+7],Ic[0]}(this.buf,this.pos);return this.pos+=8,e}bytes(){const e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw $c(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){const e=this.bytes();return function(e,t,n){if(n-t<1)return"";let r;const o=[];let s,i=0;for(;t<n;)s=e[t++],s<128?o[i++]=s:s>191&&s<224?o[i++]=(31&s)<<6|63&e[t++]:s>239&&s<365?(s=((7&s)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[i++]=55296+(s>>10),o[i++]=56320+(1023&s)):o[i++]=(15&s)<<12|(63&e[t++])<<6|63&e[t++],i>8191&&((r??(r=[])).push(String.fromCharCode.apply(String,o)),i=0);return null!=r?(i>0&&r.push(String.fromCharCode.apply(String,o.slice(0,i))),r.join("")):String.fromCharCode.apply(String,o.slice(0,i))}(e,0,e.length)}skip(e){if("number"==typeof e){if(this.pos+e>this.len)throw $c(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw $c(this)}while(0!=(128&this.buf[this.pos++]));return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){const e=new Rc(0,0);let t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw $c(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw $c(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw $c(this,8);const e=Mc(this.buf,this.pos+=4),t=Mc(this.buf,this.pos+=4);return new Rc(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function zc(e,t){const n=function(e){return new jc(e instanceof Uint8Array?e:e.subarray())}(e);return t.decode(n)}function Fc(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Gc(e=0){return null!=globalThis.Buffer?.allocUnsafe?Fc(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}const Vc=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var h=n[e.charCodeAt(t)];if(255===h)return;for(var d=0,l=s-1;(0!==h||d<o)&&-1!==l;l--,d++)h+=a*i[l]>>>0,i[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=s-o;f!==s&&0===i[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=i[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*h+1>>>0,u=new Uint8Array(i);o!==s;){for(var d=t[o],l=0,f=i-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=l,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}},Hc=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class qc{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Yc{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Jc(this,e)}}class Wc{constructor(e){this.decoders=e}or(e){return Jc(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Jc=(e,t)=>new Wc({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Kc{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new qc(e,t,n),this.decoder=new Yc(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Xc=({name:e,prefix:t,encode:n,decode:r})=>new Kc(e,t,n,r),Qc=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=Vc(n,t);return Xc({prefix:e,name:t,encode:r,decode:e=>Hc(o(e))})},Zc=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Xc({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(i&&(s+=t[o&a<<n-i]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=o[e[t]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);c=c<<n|s,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i})(t,r,n,e)}),eu=Qc({prefix:"9",name:"base10",alphabet:"0123456789"}),tu=Zc({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nu=Zc({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ru=Zc({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ou=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),su=ou.reduce(((e,t,n)=>(e[n]=t,e)),[]),iu=ou.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]),au=Xc({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+su[t]),"")},decode:function(e){const t=[];for(const n of e){const e=iu[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}}),cu=Zc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uu=Zc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hu=Zc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),du=Zc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lu=Zc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fu=Zc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pu=Zc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gu=Zc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),yu=Zc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bu=Qc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mu=Qc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),wu=Qc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vu=Qc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),_u=Zc({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Eu=Zc({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xu=Zc({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ku=Zc({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Su=Zc({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Cu=Xc({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Tu=new TextEncoder,Au=new TextDecoder,Iu="json",Bu=512,Du=e=>Tu.encode(JSON.stringify(e)),Uu=e=>JSON.parse(Au.decode(e)),Nu="raw",Ru=85,Pu=e=>Hc(e),Ou=e=>Hc(e);var Lu=Math.pow(2,31),$u=Math.pow(2,7),Mu=Math.pow(2,14),ju=Math.pow(2,21),zu=Math.pow(2,28),Fu=Math.pow(2,35),Gu=Math.pow(2,42),Vu=Math.pow(2,49),Hu=Math.pow(2,56),qu=Math.pow(2,63);const Yu=function e(t,n,r){n=n||[];for(var o=r=r||0;t>=Lu;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},Wu=function(e){return e<$u?1:e<Mu?2:e<ju?3:e<zu?4:e<Fu?5:e<Gu?6:e<Vu?7:e<Hu?8:e<qu?9:10},Ju=(e,t,n=0)=>(Yu(e,t,n),t),Ku=e=>Wu(e),Xu=(e,t)=>{const n=t.byteLength,r=Ku(e),o=r+Ku(n),s=new Uint8Array(o+n);return Ju(e,s,0),Ju(n,s,r),s.set(t,o),new Qu(e,n,t,s)};class Qu{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const Zu=Hc,eh={code:0,name:"identity",encode:Zu,digest:e=>Xu(0,Zu(e))},th=({name:e,code:t,encode:n})=>new nh(e,t,n);class nh{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Xu(this.code,t):t.then((e=>Xu(this.code,e)))}throw Error("Unknown type, must be binary type")}}const rh=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),oh=th({name:"sha2-256",code:18,encode:rh("SHA-256")}),sh=th({name:"sha2-512",code:19,encode:rh("SHA-512")});new WeakMap,Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const ih={...p,...a,...f,...s,...i,...u,...h,...d,...l,...c};function ah(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const ch=ah("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),uh=ah("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=Gc((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),hh={utf8:ch,"utf-8":ch,hex:ih.base16,latin1:uh,ascii:uh,binary:uh,...ih};class dh{fn;len;next;val;constructor(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}}function lh(){}class fh{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const ph=function(e){const t=8192;let n,r=t;return function(e){if(e<1||e>4096)return Gc(e);r+e>t&&(n=Gc(t),r=0);const o=n.subarray(r,r+=e);return 0!=(7&r)&&(r=1+(7|r)),o}}();class gh{len;head;tail;states;constructor(){this.len=0,this.head=new dh(lh,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new dh(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new mh((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(wh,10,Rc.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const t=Rc.fromBigInt(e);return this._push(wh,t.length(),t)}uint64Number(e){const t=Rc.fromNumber(e);return this._push(wh,t.length(),t)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const t=Rc.fromBigInt(e).zzEncode();return this._push(wh,t.length(),t)}sint64Number(e){const t=Rc.fromNumber(e).zzEncode();return this._push(wh,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(yh,1,e?1:0)}fixed32(e){return this._push(vh,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const t=Rc.fromBigInt(e);return this._push(vh,4,t.lo)._push(vh,4,t.hi)}fixed64Number(e){const t=Rc.fromNumber(e);return this._push(vh,4,t.lo)._push(vh,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(Ac,4,e)}double(e){return this._push(Dc,8,e)}bytes(e){const t=e.length>>>0;return 0===t?this._push(yh,1,0):this.uint32(t)._push(_h,t,e)}string(e){const t=function(e){let t=0,n=0;for(let r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t}(e);return 0!==t?this.uint32(t)._push(Lc,t,e):this._push(yh,1,0)}fork(){return this.states=new fh(this),this.head=this.tail=new dh(lh,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new dh(lh,0,0),this.len=0),this}ldelim(){const e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),0!==n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next;const t=(n=this.len,null!=globalThis.Buffer?Gc(n):ph(n));var n;let r=0;for(;null!=e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t}}function yh(e,t,n){t[n]=255&e}function bh(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}class mh extends dh{next;constructor(e,t){super(bh,e,t),this.next=void 0}}function wh(e,t,n){for(;0!==e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function vh(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function _h(e,t,n){t.set(e,n)}function Eh(e,t,n){t.set(e,n)}function xh(e,t,n){e.length<40?Lc(e,t,n):null!=t.utf8Write?t.utf8Write(e,n):t.set(function(e,t="utf8"){const n=hh[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):Fc(globalThis.Buffer.from(e,"utf-8"))}(e),n)}function kh(e,t){const n=new gh;return t.encode(e,n,{lengthDelimited:!1}),n.finish()}var Sh,Ch,Th,Ah;function Ih(e,t,n,r){return{name:e,type:t,encode:n,decode:r}}function Bh(e,t){return Ih("message",Sh.LENGTH_DELIMITED,e,t)}null!=globalThis.Buffer&&(gh.prototype.bytes=function(e){const t=e.length>>>0;return this.uint32(t),t>0&&this._push(Eh,t,e),this},gh.prototype.string=function(e){const t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(xh,t,e),this}),function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(Sh||(Sh={})),function(e){let t,n,r;!function(e){e.Raw="Raw",e.Directory="Directory",e.File="File",e.Metadata="Metadata",e.Symlink="Symlink",e.HAMTShard="HAMTShard"}(t=e.DataType||(e.DataType={})),function(e){e[e.Raw=0]="Raw",e[e.Directory=1]="Directory",e[e.File=2]="File",e[e.Metadata=3]="Metadata",e[e.Symlink=4]="Symlink",e[e.HAMTShard=5]="HAMTShard"}(n||(n={})),function(e){e.codec=()=>function(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return Ih("enum",Sh.VARINT,(function(e,n){const r=t(e);n.int32(r)}),(function(e){return t(e.int32())}))}(n)}(t=e.DataType||(e.DataType={})),e.codec=()=>(null==r&&(r=Bh(((t,n,r={})=>{if(!1!==r.lengthDelimited&&n.fork(),null!=t.Type&&(n.uint32(8),e.DataType.codec().encode(t.Type,n)),null!=t.Data&&(n.uint32(18),n.bytes(t.Data)),null!=t.filesize&&(n.uint32(24),n.uint64(t.filesize)),null!=t.blocksizes)for(const e of t.blocksizes)n.uint32(32),n.uint64(e);null!=t.hashType&&(n.uint32(40),n.uint64(t.hashType)),null!=t.fanout&&(n.uint32(48),n.uint64(t.fanout)),null!=t.mode&&(n.uint32(56),n.uint32(t.mode)),null!=t.mtime&&(n.uint32(66),Th.codec().encode(t.mtime,n)),!1!==r.lengthDelimited&&n.ldelim()}),((t,n)=>{const r={blocksizes:[]},o=null==n?t.len:t.pos+n;for(;t.pos<o;){const n=t.uint32();switch(n>>>3){case 1:r.Type=e.DataType.codec().decode(t);break;case 2:r.Data=t.bytes();break;case 3:r.filesize=t.uint64();break;case 4:r.blocksizes.push(t.uint64());break;case 5:r.hashType=t.uint64();break;case 6:r.fanout=t.uint64();break;case 7:r.mode=t.uint32();break;case 8:r.mtime=Th.codec().decode(t,t.uint32());break;default:t.skipType(7&n)}}return r}))),r),e.encode=t=>kh(t,e.codec()),e.decode=t=>zc(t,e.codec())}(Ch||(Ch={})),function(e){let t;e.codec=()=>(null==t&&(t=Bh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.Seconds&&(t.uint32(8),t.int64(e.Seconds)),null!=e.FractionalNanoseconds&&(t.uint32(21),t.fixed32(e.FractionalNanoseconds)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&t)}}return n}))),t),e.encode=t=>kh(t,e.codec()),e.decode=t=>zc(t,e.codec())}(Th||(Th={})),function(e){let t;e.codec=()=>(null==t&&(t=Bh(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.MimeType&&(t.uint32(10),t.string(e.MimeType)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t)=>{const n={},r=null==t?e.len:e.pos+t;for(;e.pos<r;){const t=e.uint32();t>>>3==1?n.MimeType=e.string():e.skipType(7&t)}return n}))),t),e.encode=t=>kh(t,e.codec()),e.decode=t=>zc(t,e.codec())}(Ah||(Ah={}));const Dh={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},Uh=["directory","hamt-sharded-directory"],Nh=parseInt("0644",8),Rh=parseInt("0755",8);class Ph{static unmarshal(e){const t=Ch.decode(e),n=new Ph({type:Dh[null!=t.Type?t.Type.toString():"File"],data:t.Data,blockSizes:t.blocksizes,mode:t.mode,mtime:null!=t.mtime?{secs:t.mtime.Seconds??0n,nsecs:t.mtime.FractionalNanoseconds}:void 0,fanout:t.fanout});return n._originalMode=t.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){const{type:t,data:n,blockSizes:r,hashType:o,fanout:s,mtime:i,mode:a}=e;if(null!=t&&!Object.values(Dh).includes(t))throw bi(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=r??[],this._originalMode=0,this.mode=a,this.mtime=i}set mode(e){this._mode=null==e?this.isDirectory()?Rh:Nh:4095&e}get mode(){return this._mode}isDirectory(){return Uh.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach((t=>{e+=t})),null!=this.data&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=Ch.DataType.Raw;break;case"directory":e=Ch.DataType.Directory;break;case"file":e=Ch.DataType.File;break;case"metadata":e=Ch.DataType.Metadata;break;case"symlink":e=Ch.DataType.Symlink;break;case"hamt-sharded-directory":e=Ch.DataType.HAMTShard;break;default:throw bi(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let t,n,r=this.data;return null!=this.data&&0!==this.data.length||(r=void 0),null!=this.mode&&(t=4294963200&this._originalMode|(this.mode??0),t!==Nh||this.isDirectory()||(t=void 0),t===Rh&&this.isDirectory()&&(t=void 0)),null!=this.mtime&&(n={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Ch.encode({Type:e,Data:r,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:n})}}const Oh=new Uint8Array(0),Lh=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):Oh};const $h=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var h=n[e.charCodeAt(t)];if(255===h)return;for(var d=0,l=s-1;(0!==h||d<o)&&-1!==l;l--,d++)h+=a*i[l]>>>0,i[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=s-o;f!==s&&0===i[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=i[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*h+1>>>0,u=new Uint8Array(i);o!==s;){for(var d=t[o],l=0,f=i-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=l,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}};class Mh{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jh{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Fh(this,e)}}class zh{constructor(e){this.decoders=e}or(e){return Fh(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Fh=(e,t)=>new zh({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Gh{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new Mh(e,t,n),this.decoder=new jh(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Vh=({name:e,prefix:t,encode:n,decode:r})=>new Gh(e,t,n,r),Hh=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=$h(n,t);return Vh({prefix:e,name:t,encode:r,decode:e=>(e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")})(o(e))})},qh=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Vh({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(i&&(s+=t[o&a<<n-i]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=o[e[t]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);c=c<<n|s,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i})(t,r,n,e)});qh({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),qh({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qh({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qh({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qh({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qh({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qh({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qh({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qh({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Hh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Hh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Yh=Math.pow(2,31),Wh=Math.pow(2,7),Jh=Math.pow(2,14),Kh=Math.pow(2,21),Xh=Math.pow(2,28),Qh=Math.pow(2,35),Zh=Math.pow(2,42),ed=Math.pow(2,49),td=Math.pow(2,56),nd=Math.pow(2,63);const rd=function e(t,n,r){n=n||[];for(var o=r=r||0;t>=Yh;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},od=function(e){return e<Wh?1:e<Jh?2:e<Kh?3:e<Xh?4:e<Qh?5:e<Zh?6:e<ed?7:e<td?8:e<nd?9:10},sd=(e,t,n=0)=>(rd(e,t,n),t),id=e=>od(e),ad=(e,t)=>{const n=t.byteLength,r=id(e),o=r+id(n),s=new Uint8Array(o+n);return sd(e,s,0),sd(n,s,r),s.set(t,o),new cd(e,n,t,s)};class cd{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}new WeakMap,Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const ud=({name:e,code:t,encode:n})=>new hd(e,t,n);class hd{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ad(this.code,t):t.then((e=>ad(this.code,e)))}throw Error("Unknown type, must be binary type")}}var dd=n(469);ud({name:"murmur3-32",code:35,encode:e=>function(e){const t=new Array(4);for(let n=0;n<4;n++)t[n]=255&e,e>>=8;return new Uint8Array(t)}(dd.x86.hash32(e))});const ld=ud({name:"murmur3-128",code:34,encode:e=>Lh(dd.x64.hash128(e))});ud({name:"murmur3-x64-64",code:34,encode:e=>Lh(dd.x64.hash128(e)).subarray(0,8)});var fd=n(544);function pd(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}const gd=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(255!==n[i])throw new TypeError(s+" is ambiguous");n[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*u+1>>>0,i=new Uint8Array(s);e[t];){var h=n[e.charCodeAt(t)];if(255===h)return;for(var d=0,l=s-1;(0!==h||d<o)&&-1!==l;l--,d++)h+=a*i[l]>>>0,i[l]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=s-o;f!==s&&0===i[f];)f++;for(var p=new Uint8Array(r+(s-f)),g=r;f!==s;)p[g++]=i[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,s=t.length;o!==s&&0===t[o];)o++,n++;for(var i=(s-o)*h+1>>>0,u=new Uint8Array(i);o!==s;){for(var d=t[o],l=0,f=i-1;(0!==d||l<r)&&-1!==f;f--,l++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=l,o++}for(var p=i-r;p!==i&&0===u[p];)p++;for(var g=c.repeat(n);p<i;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}},yd=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class bd{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class md{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return vd(this,e)}}class wd{constructor(e){this.decoders=e}or(e){return vd(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const vd=(e,t)=>new wd({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class _d{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new bd(e,t,n),this.decoder=new md(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ed=({name:e,prefix:t,encode:n,decode:r})=>new _d(e,t,n,r),xd=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=gd(n,t);return Ed({prefix:e,name:t,encode:r,decode:e=>yd(o(e))})},kd=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>Ed({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let s="",i=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],i+=8;i>n;)i-=n,s+=t[o&a>>i];if(i&&(s+=t[o&a<<n-i]),r)for(;s.length*n&7;)s+="=";return s})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let e=0;e<t.length;++e)o[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const i=new Uint8Array(s*n/8|0);let a=0,c=0,u=0;for(let t=0;t<s;++t){const s=o[e[t]];if(void 0===s)throw new SyntaxError(`Non-${r} character`);c=c<<n|s,a+=n,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i})(t,r,n,e)}),Sd=xd({prefix:"9",name:"base10",alphabet:"0123456789"}),Cd=kd({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Td=kd({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Ad=kd({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Id=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Bd=Id.reduce(((e,t,n)=>(e[n]=t,e)),[]),Dd=Id.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]),Ud=Ed({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Bd[t]),"")},decode:function(e){const t=[];for(const n of e){const e=Dd[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}}),Nd=kd({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rd=kd({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pd=kd({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Od=kd({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ld=kd({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$d=kd({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Md=kd({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),jd=kd({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),zd=kd({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Fd=xd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gd=xd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Vd=xd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Hd=xd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),qd=kd({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yd=kd({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wd=kd({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Jd=kd({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Kd=kd({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Xd=Ed({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Qd=new TextEncoder,Zd=new TextDecoder,el="json",tl=512,nl=e=>Qd.encode(JSON.stringify(e)),rl=e=>JSON.parse(Zd.decode(e)),ol="raw",sl=85,il=e=>yd(e),al=e=>yd(e);var cl=Math.pow(2,31),ul=Math.pow(2,7),hl=Math.pow(2,14),dl=Math.pow(2,21),ll=Math.pow(2,28),fl=Math.pow(2,35),pl=Math.pow(2,42),gl=Math.pow(2,49),yl=Math.pow(2,56),bl=Math.pow(2,63);const ml=function e(t,n,r){n=n||[];for(var o=r=r||0;t>=cl;)n[r++]=255&t|128,t/=128;for(;-128&t;)n[r++]=255&t|128,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},wl=function(e){return e<ul?1:e<hl?2:e<dl?3:e<ll?4:e<fl?5:e<pl?6:e<gl?7:e<yl?8:e<bl?9:10},vl=(e,t,n=0)=>(ml(e,t,n),t),_l=e=>wl(e),El=(e,t)=>{const n=t.byteLength,r=_l(e),o=r+_l(n),s=new Uint8Array(o+n);return vl(e,s,0),vl(n,s,r),s.set(t,o),new xl(e,n,t,s)};class xl{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}const kl=yd,Sl={code:0,name:"identity",encode:kl,digest:e=>El(0,kl(e))},Cl=({name:e,code:t,encode:n})=>new Tl(e,t,n);class Tl{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?El(this.code,t):t.then((e=>El(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Al=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Il=Cl({name:"sha2-256",code:18,encode:Al("SHA-256")}),Bl=Cl({name:"sha2-512",code:19,encode:Al("SHA-512")});new WeakMap,Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Dl={...A,..._,...T,...w,...v,...x,...k,...S,...C,...E};function Ul(e=0){return null!=globalThis.Buffer?.allocUnsafe?pd(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Nl(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Rl=Nl("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Pl=Nl("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=Ul((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Ol={utf8:Rl,"utf-8":Rl,hex:Dl.base16,latin1:Pl,ascii:Pl,binary:Pl,...Dl};class Ll{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new fd,this.key=null}async put(e,t){const n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){const t=await this._findChild(e);if(null!=t)return t.value}async del(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);null!=n&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce(((e,t)=>t instanceof Ll?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof Ll?yield*t.eachLeafSeries():yield t}serialize(e,t){return t(this._children.reduce(((n,r,o)=>(null!=r&&(r instanceof Ll?n.push(r.serialize(e,t)):n.push(e(r,o))),n)),[]))}async asyncTransform(e,t){return await zl(this,e,t)}toJSON(){return this.serialize(Ml,jl)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof Ll))return null!=n&&n.key===e?n:void 0}async _findPlace(e){const t=this._options.hash("string"==typeof e?function(e,t="utf8"){const n=Ol[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.decoder.decode(`${n.prefix}${e}`):pd(globalThis.Buffer.from(e,"utf-8"))}(e):e),n=await t.take(this._options.bits),r=this._children.get(n);return r instanceof Ll?await r._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:r}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(null!=t.existingChild&&t.existingChild.key!==e){const e=new Ll(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const n=await e._findPlace(t.existingChild.hash);return n.bucket._putAt(n,t.existingChild.key,t.existingChild.value),await e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){null==this._children.get(e)&&this._popCount++,this._children.set(e,t)}_delAt(e){if(-1===e)throw new Error("Invalid position");null!=this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(null!=this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find($l);if(null!=e&&!(e instanceof Ll)){const t=e.hash;t.untake(this._options.bits);const n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function $l(e){return Boolean(e)}function Ml(e,t){return e.key}function jl(e){return e}async function zl(e,t,n){const r=[];for(const o of e._children.compactArray())if(o instanceof Ll)await zl(o,t,n);else{const n=await t(o);r.push({bitField:e._children.bitField(),children:n})}return await n(r)}const Fl=[255,254,252,248,240,224,192,128],Gl=[1,3,7,15,31,63,127,255];class Vl{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,n=0;for(;t>0&&this._haveBits();){const e=this._value[this._currentBytePos],r=this._currentBitPos+1,o=Math.min(r,t);n=(n<<o)+Hl(e,r-o,o),t-=o,this._currentBitPos-=o,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function Hl(e,t,n){const r=function(e,t){return Fl[e]&Gl[Math.min(t+e-1,7)]}(t,n);return(e&r)>>>t}function ql(e){return function(t){return t instanceof Yl?t:new Yl(t,e)}}class Yl{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.availableBits(),t);n=(n<<r)+e.take(r),t-=r,this._availableBits-=r,0===e.availableBits()&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.totalBits()-e.availableBits(),t);e.untake(n),t-=n,this._availableBits+=n,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?function(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const n=Ul(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return pd(n)}([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new Vl(t);this._buffers.push(n),this._availableBits+=n.availableBits()}}const Wl=async function(e){return(await ld.encode(e)).slice(0,8).reverse()},Jl=(e,t)=>e.toString(16).toUpperCase().padStart(t,"0").substring(0,t),Kl=async(e,t,n,r,o)=>{if(null==r){if(null==e.Data)throw bi(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let t;try{t=Ph.unmarshal(e.Data)}catch(e){throw bi(e,"ERR_NOT_UNIXFS")}if("hamt-sharded-directory"!==t.type)throw bi(new Error("not a HAMT"),"ERR_NOT_UNIXFS");if(null==t.fanout)throw bi(new Error("missing fanout"),"ERR_NOT_UNIXFS");const n=function(e){if(null==e||null==e.hashFn)throw new Error("please define an options.hashFn");const t={bits:e.bits??8,hash:ql(e.hashFn)};return new Ll(t)}({hashFn:Wl,bits:Math.log2(Number(t.fanout))});r={rootBucket:n,hamtDepth:1,lastBucket:n}}const s=(r.lastBucket.tableSize()-1).toString(16).length;await(async(e,t,n)=>{const r=(t.tableSize()-1).toString(16).length;await Promise.all(e.map((async e=>{if(null==e.Name)throw new Error("Unexpected Link without a Name");if(e.Name.length!==r)await n.put(e.Name.substring(2),!0);else{const r=parseInt(e.Name,16);t._putObjectAt(r,new Ll({hash:n._options.hash,bits:n._options.bits},t,r))}})))})(e.Links,r.lastBucket,r.rootBucket);const i=await r.rootBucket._findNewBucketAndPos(t);let a=Jl(i.pos,s);const c=(e=>{let t=e.bucket;const n=[];for(;null!=t._parent;)n.push(t),t=t._parent;return n.push(t),n.reverse()})(i);c.length>r.hamtDepth&&(r.lastBucket=c[r.hamtDepth],a=Jl(r.lastBucket._posAtParent,s));const u=e.Links.find((e=>{if(null==e.Name)return!1;const n=e.Name.substring(0,s),r=e.Name.substring(s);return n===a&&(""===r||r===t)}));if(null!=u)return null!=u.Name&&u.Name.substring(s)===t?u.Hash:(r.hamtDepth++,e=Ec(await n.get(u.Hash,o)),Kl(e,t,n,r,o))},Xl=Kl,Ql=function(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}},Zl=function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const n of e)yield t(n)}();const n=Ql(e),{value:r,done:o}=n.next();if(!0===o)return function*(){}();const s=t(r);if("function"==typeof s.then)return async function*(){yield await s;for await(const e of n)yield t(e)}();const i=t;return function*(){yield s;for(const e of n)yield i(e)}()};function ef(){const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}const tf=globalThis.CustomEvent??Event;async function*nf(e,t={}){let n=t.concurrency??1/0;n<1&&(n=1/0);const r=null!=t.ordered&&t.ordered,o=new EventTarget,s=[];let i,a=ef(),c=ef(),u=!1,h=!1;function d(){return r?s[0]?.done:Boolean(s.find((e=>e.done)))}function*l(){for(;s.length>0&&s[0].done;){const e=s[0];if(s.shift(),!e.ok)throw h=!0,a.resolve(),e.err;yield e.value,a.resolve()}}function*f(){for(;d();)for(let e=0;e<s.length;e++)if(s[e].done){const t=s[e];if(s.splice(e,1),e--,!t.ok)throw h=!0,a.resolve(),t.err;yield t.value,a.resolve()}}for(o.addEventListener("task-complete",(()=>{c.resolve()})),Promise.resolve().then((async()=>{try{for await(const t of e){if(s.length===n&&(a=ef(),await a.promise),h)break;const e={done:!1};s.push(e),t().then((t=>{e.done=!0,e.ok=!0,e.value=t,o.dispatchEvent(new tf("task-complete"))}),(t=>{e.done=!0,e.err=t,o.dispatchEvent(new tf("task-complete"))}))}u=!0,o.dispatchEvent(new tf("task-complete"))}catch(e){i=e,o.dispatchEvent(new tf("task-complete"))}}));;){if(d()||(c=ef(),await c.promise),null!=i)throw i;if(r?yield*l():yield*f(),u&&0===s.length)break}}class rf{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||0!=(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class of{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new rf(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new rf(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}class sf extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function af(e={}){return function(e,t){let n,r,o,s=(t=t??{}).onEnd,i=new of,a=ef();const c=e=>null!=r?r(e):(i.push(e),n),u=e=>{if(o)return n;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:e})},h=e=>o?n:(o=!0,null!=e?(e=>(i=new of,null!=r?r({error:e}):(i.push({error:e}),n)))(e):c({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:async()=>{try{return i.isEmpty()?o?{done:!0}:await new Promise(((t,o)=>{r=s=>{r=null,i.push(s);try{t(e(i))}catch(e){o(e)}return n}})):e(i)}finally{i.isEmpty()&&queueMicrotask((()=>{a.resolve(),a=ef()}))}},return:()=>(i=new of,h(),{done:!0}),throw:e=>(h(e),{done:!0}),push:u,end:h,get readableLength(){return i.size},onEmpty:async e=>{const t=e?.signal;if(t?.throwIfAborted(),i.isEmpty())return;let n,r;null!=t&&(n=new Promise(((e,n)=>{r=()=>{n(new sf)},t.addEventListener("abort",r)})));try{await Promise.race([a.promise,n])}finally{null!=r&&null!=t&&t?.removeEventListener("abort",r)}}},null==s)return n;const d=n;return n={[Symbol.asyncIterator](){return this},next:()=>d.next(),throw:e=>(d.throw(e),null!=s&&(s(e),s=void 0),{done:!0}),return:()=>(d.return(),null!=s&&(s(),s=void 0),{done:!0}),push:u,end:e=>(d.end(e),null!=s&&(s(e),s=void 0),n),get readableLength(){return d.readableLength}},n}((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),e)}function cf(e,...t){if(null==e)throw new Error("Empty pipeline");if(lf(e)){const t=e;e=()=>t.source}else if(df(e)||hf(e)){const t=e;e=()=>t}const n=[e,...t];if(n.length>1&&lf(n[n.length-1])&&(n[n.length-1]=n[n.length-1].sink),n.length>2)for(let e=1;e<n.length-1;e++)lf(n[e])&&(n[e]=ff(n[e]));return uf(...n)}const uf=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},hf=e=>null!=e?.[Symbol.asyncIterator],df=e=>null!=e?.[Symbol.iterator],lf=e=>null!=e&&null!=e.sink&&null!=e.source,ff=e=>t=>{const n=e.sink(t);if(null!=n?.then){const t=af({objectMode:!0});let r;n.then((()=>{t.end()}),(e=>{t.end(e)}));const o=e.source;if(hf(o))r=async function*(){yield*o,t.end()};else{if(!df(o))throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");r=function*(){yield*o,t.end()}}return function(...e){const t=[];for(const n of e)null==n[Symbol.asyncIterator]&&t.push(n);return t.length===e.length?function*(){for(const e of t)yield*e}():async function*(){const t=af({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(e.map((async e=>{for await(const n of e)t.push(n)}))),t.end()}catch(e){t.end(e)}})),yield*t}()}(t,r())}return e.source};var pf=n(8939);class gf extends Error{constructor(e){super(e),this.name="TimeoutError"}}class yf extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const bf=e=>void 0===globalThis.DOMException?new yf(e):new DOMException(e),mf=e=>{const t=void 0===e.reason?bf("This operation was aborted."):e.reason;return t instanceof Error?t:bf(t)};var wf,vf=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};wf=new WeakMap;const _f=class{constructor(){wf.set(this,[])}enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&vf(this,wf,"f")[this.size-1].priority>=t.priority)return void vf(this,wf,"f").push(n);const r=function(e,t,n){let r=0,o=e.length;for(;o>0;){const n=Math.trunc(o/2);let i=r+n;s=e[i],t.priority-s.priority<=0?(r=++i,o-=n+1):o=n}var s;return r}(vf(this,wf,"f"),n);vf(this,wf,"f").splice(r,0,n)}dequeue(){const e=vf(this,wf,"f").shift();return null==e?void 0:e.run}filter(e){return vf(this,wf,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return vf(this,wf,"f").length}};var Ef,xf,kf,Sf,Cf,Tf,Af,If,Bf,Df,Uf,Nf,Rf,Pf,Of,Lf,$f,Mf,jf,zf,Ff,Gf,Vf,Hf,qf,Yf,Wf=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},Jf=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Kf extends Error{}xf=new WeakMap,kf=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,Tf=new WeakMap,Af=new WeakMap,If=new WeakMap,Bf=new WeakMap,Df=new WeakMap,Uf=new WeakMap,Nf=new WeakMap,Rf=new WeakMap,Pf=new WeakMap,Of=new WeakMap,Ef=new WeakSet,Lf=function(){return Jf(this,kf,"f")||Jf(this,Sf,"f")<Jf(this,Cf,"f")},$f=function(){return Jf(this,Nf,"f")<Jf(this,Rf,"f")},Mf=function(){var e;Wf(this,Nf,(e=Jf(this,Nf,"f"),--e),"f"),Jf(this,Ef,"m",Ff).call(this),this.emit("next")},jf=function(){Jf(this,Ef,"m",Vf).call(this),Jf(this,Ef,"m",Gf).call(this),Wf(this,Bf,void 0,"f")},zf=function(){const e=Date.now();if(void 0===Jf(this,If,"f")){const t=Jf(this,Af,"f")-e;if(!(t<0))return void 0===Jf(this,Bf,"f")&&Wf(this,Bf,setTimeout((()=>{Jf(this,Ef,"m",jf).call(this)}),t),"f"),!0;Wf(this,Sf,Jf(this,xf,"f")?Jf(this,Nf,"f"):0,"f")}return!1},Ff=function(){if(0===Jf(this,Df,"f").size)return Jf(this,If,"f")&&clearInterval(Jf(this,If,"f")),Wf(this,If,void 0,"f"),this.emit("empty"),0===Jf(this,Nf,"f")&&this.emit("idle"),!1;if(!Jf(this,Pf,"f")){const e=!Jf(this,Ef,"a",zf);if(Jf(this,Ef,"a",Lf)&&Jf(this,Ef,"a",$f)){const t=Jf(this,Df,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Jf(this,Ef,"m",Gf).call(this),!0)}}return!1},Gf=function(){Jf(this,kf,"f")||void 0!==Jf(this,If,"f")||(Wf(this,If,setInterval((()=>{Jf(this,Ef,"m",Vf).call(this)}),Jf(this,Tf,"f")),"f"),Wf(this,Af,Date.now()+Jf(this,Tf,"f"),"f"))},Vf=function(){0===Jf(this,Sf,"f")&&0===Jf(this,Nf,"f")&&Jf(this,If,"f")&&(clearInterval(Jf(this,If,"f")),Wf(this,If,void 0,"f")),Wf(this,Sf,Jf(this,xf,"f")?Jf(this,Nf,"f"):0,"f"),Jf(this,Ef,"m",Hf).call(this)},Hf=function(){for(;Jf(this,Ef,"m",Ff).call(this););},qf=async function(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(new Kf("The task was aborted."))}),{once:!0})}))},Yf=async function(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))};const Xf=class extends pf{constructor(e){var t,n,r,o;if(super(),Ef.add(this),xf.set(this,void 0),kf.set(this,void 0),Sf.set(this,0),Cf.set(this,void 0),Tf.set(this,void 0),Af.set(this,0),If.set(this,void 0),Bf.set(this,void 0),Df.set(this,void 0),Uf.set(this,void 0),Nf.set(this,0),Rf.set(this,void 0),Pf.set(this,void 0),Of.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:_f,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(o=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==o?o:""}\` (${typeof e.interval})`);Wf(this,xf,e.carryoverConcurrencyCount,"f"),Wf(this,kf,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),Wf(this,Cf,e.intervalCap,"f"),Wf(this,Tf,e.interval,"f"),Wf(this,Df,new e.queueClass,"f"),Wf(this,Uf,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Wf(this,Of,!0===e.throwOnTimeout,"f"),Wf(this,Pf,!1===e.autoStart,"f")}get concurrency(){return Jf(this,Rf,"f")}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Wf(this,Rf,e,"f"),Jf(this,Ef,"m",Hf).call(this)}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:Jf(this,Of,"f"),...t},new Promise(((n,r)=>{Jf(this,Df,"f").enqueue((async()=>{var o,s,i;Wf(this,Nf,(s=Jf(this,Nf,"f"),++s),"f"),Wf(this,Sf,(i=Jf(this,Sf,"f"),++i),"f");try{if(null===(o=t.signal)||void 0===o?void 0:o.aborted)throw new Kf("The task was aborted.");let r=e({signal:t.signal});t.timeout&&(r=function(e,t,n,r){let o;const s=new Promise(((s,i)=>{if("number"!=typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((r={customTimers:{setTimeout,clearTimeout},...r}).signal){const{signal:e}=r;e.aborted&&i(mf(e)),e.addEventListener("abort",(()=>{i(mf(e))}))}o=r.customTimers.setTimeout.call(void 0,(()=>{const r=n instanceof Error?n:new gf(`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),i(r)}),t),(async()=>{try{s(await e)}catch(e){i(e)}finally{r.customTimers.clearTimeout.call(void 0,o)}})()}else s(e)}));return s.clear=()=>{clearTimeout(o),o=void 0},s}(Promise.resolve(r),t.timeout)),t.signal&&(r=Promise.race([r,Jf(this,Ef,"m",qf).call(this,t.signal)]));const s=await r;n(s),this.emit("completed",s)}catch(e){if(e instanceof gf&&!t.throwOnTimeout)return void n();r(e),this.emit("error",e)}finally{Jf(this,Ef,"m",Mf).call(this)}}),t),this.emit("add"),Jf(this,Ef,"m",Ff).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return Jf(this,Pf,"f")?(Wf(this,Pf,!1,"f"),Jf(this,Ef,"m",Hf).call(this),this):this}pause(){Wf(this,Pf,!0,"f")}clear(){Wf(this,Df,new(Jf(this,Uf,"f")),"f")}async onEmpty(){0!==Jf(this,Df,"f").size&&await Jf(this,Ef,"m",Yf).call(this,"empty")}async onSizeLessThan(e){Jf(this,Df,"f").size<e||await Jf(this,Ef,"m",Yf).call(this,"next",(()=>Jf(this,Df,"f").size<e))}async onIdle(){0===Jf(this,Nf,"f")&&0===Jf(this,Df,"f").size||await Jf(this,Ef,"m",Yf).call(this,"idle")}get size(){return Jf(this,Df,"f").size}sizeBy(e){return Jf(this,Df,"f").filter(e).length}get pending(){return Jf(this,Nf,"f")}get isPaused(){return Jf(this,Pf,"f")}};async function Qf(e,t,n,r,o,s,i){if(t instanceof Uint8Array){const e=kc(t,r,o,s);return void n.push(e)}if(null==t.Data)throw bi(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=Ph.unmarshal(t.Data)}catch(e){throw bi(e,"ERR_NOT_UNIXFS")}if(null!=a.data){const e=a.data,t=kc(e,r,o,s);n.push(t),r+=BigInt(t.byteLength)}let c=[];if(t.Links.length!==a.blockSizes.length)throw bi(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let e=0;e<t.Links.length;e++){const n=t.Links[e],i=r,h=i+a.blockSizes[e];if((o>=i&&o<h||s>=i&&s<=h||o<i&&s>h)&&c.push({link:n,blockStart:r}),85!==n.Hash.code&&(await u(c),c=[]),(r=h)>s)break}async function u(t){await cf(t,(t=>Zl(t,(t=>async()=>{const n=await e.get(t.link.Hash,i);return{...t,block:n}}))),(e=>nf(e,{ordered:!0})),(async t=>{for await(const{link:r,block:a,blockStart:c}of t){let t;switch(r.Hash.code){case 112:t=Ec(a);break;case 85:t=a;break;default:return void n.end(bi(new Error(`Unsupported codec: ${r.Hash.code}`),"ERR_NOT_UNIXFS"))}const u=new Xf({concurrency:1});u.on("error",(e=>{n.end(e)})),u.add((async()=>{i.onProgress?.(new xc("unixfs:exporter:walk:file",{cid:r.Hash})),await Qf(e,t,n,c,o,s,i)})),await u.onIdle()}}))}c.length&&await u(c),r>=s&&n.end()}const Zf=(e,t,n,r,o,s,i)=>async function*(r={}){const o=n.fileSize();if(void 0===o)throw new Error("File was a directory");const{start:s,end:a}=Sc(o,r.offset,r.length);if(0n===a)return;let c=0n;const u=a-s,h=af();r.onProgress?.(new xc("unixfs:exporter:walk:file",{cid:e})),Qf(i,t,h,0n,s,a,r).catch((e=>{h.end(e)}));for await(const e of h)if(null!=e){if(c+=BigInt(e.byteLength),c>u)throw h.end(),bi(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");c===u&&h.end(),r.onProgress?.(new xc("unixfs:exporter:progress:unixfs:file",{bytesRead:c,totalBytes:u,fileSize:o})),yield e}if(c<u)throw bi(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")};async function*ep(e,t,n,r,o,s){const i=e.Links;if(null==e.Data)throw bi(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=Ph.unmarshal(e.Data)}catch(e){throw bi(e,"ERR_NOT_UNIXFS")}if(null==a.fanout)throw bi(new Error("missing fanout"),"ERR_NOT_UNIXFS");const c=(a.fanout-1n).toString(16).length,u=cf(i,(i=>Zl(i,(i=>async()=>{const a=null!=i.Name?i.Name.substring(c):null;if(null!=a&&""!==a){const e=await n(i.Hash,a,`${t}/${a}`,[],r+1,o,s);return{entries:null==e.entry?[]:[e.entry]}}{const a=await o.get(i.Hash,s);return e=Ec(a),s.onProgress?.(new xc("unixfs:exporter:walk:hamt-sharded-directory",{cid:i.Hash})),{entries:ep(e,t,n,r,o,s)}}}))),(e=>nf(e,{ordered:!0})));for await(const{entries:e}of u)yield*e}const tp={raw:Zf,file:Zf,directory:(e,t,n,r,o,s,i)=>async function*(n={}){const a=n.offset??0,c=n.length??t.Links.length,u=t.Links.slice(a,c);n.onProgress?.(new xc("unixfs:exporter:walk:directory",{cid:e})),yield*cf(u,(e=>Zl(e,(e=>async()=>{const t=e.Name??"",a=`${r}/${t}`;return(await o(e.Hash,t,a,[],s+1,i,n)).entry}))),(e=>nf(e,{ordered:!0})),(e=>function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const n of e)await t(n)&&(yield n)}();const n=Ql(e),{value:r,done:o}=n.next();if(!0===o)return function*(){}();const s=t(r);if("function"==typeof s.then)return async function*(){await s&&(yield r);for await(const e of n)await t(e)&&(yield e)}();const i=t;return function*(){!0===s&&(yield r);for(const e of n)i(e)&&(yield e)}()}(e,(e=>null!=e))))},"hamt-sharded-directory":(e,t,n,r,o,s,i)=>function(n={}){return n.onProgress?.(new xc("unixfs:exporter:walk:hamt-sharded-directory",{cid:e})),ep(t,r,o,s,i,n)},metadata:(e,t,n,r,o,s,i)=>()=>[],symlink:(e,t,n,r,o,s,i)=>()=>[]},np={112:async(e,t,n,r,o,s,i,a)=>{const c=Ec(await i.get(e,a));let u,h;if(null==t&&(t=e.toString()),null==c.Data)throw bi(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{u=Ph.unmarshal(c.Data)}catch(e){throw bi(e,"ERR_NOT_UNIXFS")}if(null==n&&(n=t),r.length>0){let e;if(e="hamt-sharded-directory"===u?.type?await Xl(c,r[0],i):((e,t)=>e.Links.find((e=>e.Name===t))?.Hash)(c,r[0]),null==e)throw bi(new Error("file does not exist"),"ERR_NOT_FOUND");const t=r.shift();h={cid:e,toResolve:r,name:t??"",path:`${n}/${t}`}}const d=tp[u.type](e,c,u,n,o,s,i);if(null==d)throw bi(new Error("could not find content exporter"),"ERR_NOT_FOUND");return u.isDirectory()?{entry:{type:"directory",name:t,path:n,cid:e,content:d,unixfs:u,depth:s,node:c,size:u.fileSize()},next:h}:{entry:{type:"file",name:t,path:n,cid:e,content:d,unixfs:u,depth:s,node:c,size:u.fileSize()},next:h}},85:async(e,t,n,r,o,s,i,a)=>{if(r.length>0)throw bi(new Error(`No link named ${n} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await i.get(e,a);return{entry:{type:"raw",name:t,path:n,cid:e,content:(u=c,async function*(e={}){const{start:t,end:n}=Sc(u.length,e.offset,e.length),r=kc(u,0n,t,n);e.onProgress?.(new xc("unixfs:exporter:progress:raw",{bytesRead:BigInt(r.byteLength),totalBytes:n-t,fileSize:BigInt(u.byteLength)})),yield r}),depth:s,size:BigInt(c.length),node:c}};var u},113:async(e,t,n,r,o,s,i,a)=>{const c=await i.get(e,a),u=gc(c,yc);let h=u,d=n;for(;r.length>0;){const o=r[0];if(!(o in h))throw bi(new Error(`No property named ${o} found in cbor node ${e}`),"ERR_NO_PROP");{r.shift(),d=`${d}/${o}`;const i=Ji.asCID(h[o]);if(null!=i)return{entry:{type:"object",name:t,path:n,cid:e,node:c,depth:s,size:BigInt(c.length),content:async function*(){yield u}},next:{cid:i,name:o,path:d,toResolve:r}};h=h[o]}}return{entry:{type:"object",name:t,path:n,cid:e,node:c,depth:s,size:BigInt(c.length),content:async function*(){yield u}}}},0:async(e,t,n,r,o,s,i,a)=>{if(r.length>0)throw bi(new Error(`No link named ${n} found in raw node ${e}`),"ERR_NOT_FOUND");const c=Vi(e.multihash.bytes);return{entry:{type:"identity",name:t,path:n,cid:e,content:(u=c.digest,async function*(e={}){const{start:t,end:n}=Sc(u.length,e.offset,e.length),r=kc(u,0n,t,n);e.onProgress?.(new xc("unixfs:exporter:progress:identity",{bytesRead:BigInt(r.byteLength),totalBytes:n-t,fileSize:BigInt(u.byteLength)})),yield r}),depth:s,size:BigInt(c.digest.length),node:c.digest}};var u}},rp=async(e,t,n,r,o,s,i)=>{const a=np[e.code];if(null==a)throw bi(new Error(`No resolver for code ${e.code}`),"ERR_NO_RESOLVER");return a(e,t,n,r,rp,o,s,i)},op=rp;async function sp(e,t,n={}){const r=await function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{let t;for await(const n of e)t=n;return t})();let t;for(const n of e)t=n;return t}(async function*(e,t,n={}){let{cid:r,toResolve:o}=(e=>{if(e instanceof Uint8Array)return{cid:Ji.decode(e),toResolve:[]};const t=Ji.asCID(e);if(null!=t)return{cid:t,toResolve:[]};if("string"==typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=((e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean))(e);return{cid:Ji.parse(t[0]),toResolve:t.slice(1)}}throw bi(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")})(e),s=r.toString(),i=s;const a=o.length;for(;;){const c=await op(r,s,i,o,a,t,n);if(null==c.entry&&null==c.next)throw bi(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(null!=c.entry&&(yield c.entry),null==c.next)return;o=c.next.toResolve,r=c.next.cid,s=c.next.name,i=c.next.path}}(e,t,n));if(null==r)throw bi(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");return r}const ip="raw",ap=85,cp=e=>Zn(e),up=e=>Zn(e),hp=new TextEncoder,dp=new TextDecoder,lp="json",fp=512,pp=e=>hp.encode(JSON.stringify(e)),gp=e=>JSON.parse(dp.decode(e)),yp=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),bp=zr({name:"sha2-256",code:18,encode:yp("SHA-256")}),mp=(zr({name:"sha2-512",code:19,encode:yp("SHA-512")}),Zn),wp={code:0,name:"identity",encode:mp,digest:e=>Ar(0,mp(e))};var vp=n(1191),_p=n(7225);const{blake2b:Ep}=vp,xp=((0,_p.D)({name:"blake2b-8",code:45569,encode:e=>oi.aI.coerce(Ep(e,void 0,1))}),(0,_p.D)({name:"blake2b-16",code:45570,encode:e=>oi.aI.coerce(Ep(e,void 0,2))}),(0,_p.D)({name:"blake2b-24",code:45571,encode:e=>oi.aI.coerce(Ep(e,void 0,3))}),(0,_p.D)({name:"blake2b-32",code:45572,encode:e=>oi.aI.coerce(Ep(e,void 0,4))}),(0,_p.D)({name:"blake2b-40",code:45573,encode:e=>oi.aI.coerce(Ep(e,void 0,5))}),(0,_p.D)({name:"blake2b-48",code:45574,encode:e=>oi.aI.coerce(Ep(e,void 0,6))}),(0,_p.D)({name:"blake2b-56",code:45575,encode:e=>oi.aI.coerce(Ep(e,void 0,7))}),(0,_p.D)({name:"blake2b-64",code:45576,encode:e=>oi.aI.coerce(Ep(e,void 0,8))}),(0,_p.D)({name:"blake2b-72",code:45577,encode:e=>oi.aI.coerce(Ep(e,void 0,9))}),(0,_p.D)({name:"blake2b-80",code:45578,encode:e=>oi.aI.coerce(Ep(e,void 0,10))}),(0,_p.D)({name:"blake2b-88",code:45579,encode:e=>oi.aI.coerce(Ep(e,void 0,11))}),(0,_p.D)({name:"blake2b-96",code:45580,encode:e=>oi.aI.coerce(Ep(e,void 0,12))}),(0,_p.D)({name:"blake2b-104",code:45581,encode:e=>oi.aI.coerce(Ep(e,void 0,13))}),(0,_p.D)({name:"blake2b-112",code:45582,encode:e=>oi.aI.coerce(Ep(e,void 0,14))}),(0,_p.D)({name:"blake2b-120",code:45583,encode:e=>oi.aI.coerce(Ep(e,void 0,15))}),(0,_p.D)({name:"blake2b-128",code:45584,encode:e=>oi.aI.coerce(Ep(e,void 0,16))}),(0,_p.D)({name:"blake2b-136",code:45585,encode:e=>oi.aI.coerce(Ep(e,void 0,17))}),(0,_p.D)({name:"blake2b-144",code:45586,encode:e=>oi.aI.coerce(Ep(e,void 0,18))}),(0,_p.D)({name:"blake2b-152",code:45587,encode:e=>oi.aI.coerce(Ep(e,void 0,19))}),(0,_p.D)({name:"blake2b-160",code:45588,encode:e=>oi.aI.coerce(Ep(e,void 0,20))}),(0,_p.D)({name:"blake2b-168",code:45589,encode:e=>oi.aI.coerce(Ep(e,void 0,21))}),(0,_p.D)({name:"blake2b-176",code:45590,encode:e=>oi.aI.coerce(Ep(e,void 0,22))}),(0,_p.D)({name:"blake2b-184",code:45591,encode:e=>oi.aI.coerce(Ep(e,void 0,23))}),(0,_p.D)({name:"blake2b-192",code:45592,encode:e=>oi.aI.coerce(Ep(e,void 0,24))}),(0,_p.D)({name:"blake2b-200",code:45593,encode:e=>oi.aI.coerce(Ep(e,void 0,25))}),(0,_p.D)({name:"blake2b-208",code:45594,encode:e=>oi.aI.coerce(Ep(e,void 0,26))}),(0,_p.D)({name:"blake2b-216",code:45595,encode:e=>oi.aI.coerce(Ep(e,void 0,27))}),(0,_p.D)({name:"blake2b-224",code:45596,encode:e=>oi.aI.coerce(Ep(e,void 0,28))}),(0,_p.D)({name:"blake2b-232",code:45597,encode:e=>oi.aI.coerce(Ep(e,void 0,29))}),(0,_p.D)({name:"blake2b-240",code:45598,encode:e=>oi.aI.coerce(Ep(e,void 0,30))}),(0,_p.D)({name:"blake2b-248",code:45599,encode:e=>oi.aI.coerce(Ep(e,void 0,31))}),(0,_p.D)({name:"blake2b-256",code:45600,encode:e=>oi.aI.coerce(Ep(e,void 0,32))}));function kp(e){return Symbol.asyncIterator in e?e:async function*(e,t={}){const n=e.getReader();try{for(;;){const e=await n.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&await n.cancel(),n.releaseLock()}}(e)}(0,_p.D)({name:"blake2b-264",code:45601,encode:e=>oi.aI.coerce(Ep(e,void 0,33))}),(0,_p.D)({name:"blake2b-272",code:45602,encode:e=>oi.aI.coerce(Ep(e,void 0,34))}),(0,_p.D)({name:"blake2b-280",code:45603,encode:e=>oi.aI.coerce(Ep(e,void 0,35))}),(0,_p.D)({name:"blake2b-288",code:45604,encode:e=>oi.aI.coerce(Ep(e,void 0,36))}),(0,_p.D)({name:"blake2b-296",code:45605,encode:e=>oi.aI.coerce(Ep(e,void 0,37))}),(0,_p.D)({name:"blake2b-304",code:45606,encode:e=>oi.aI.coerce(Ep(e,void 0,38))}),(0,_p.D)({name:"blake2b-312",code:45607,encode:e=>oi.aI.coerce(Ep(e,void 0,39))}),(0,_p.D)({name:"blake2b-320",code:45608,encode:e=>oi.aI.coerce(Ep(e,void 0,40))}),(0,_p.D)({name:"blake2b-328",code:45609,encode:e=>oi.aI.coerce(Ep(e,void 0,41))}),(0,_p.D)({name:"blake2b-336",code:45610,encode:e=>oi.aI.coerce(Ep(e,void 0,42))}),(0,_p.D)({name:"blake2b-344",code:45611,encode:e=>oi.aI.coerce(Ep(e,void 0,43))}),(0,_p.D)({name:"blake2b-352",code:45612,encode:e=>oi.aI.coerce(Ep(e,void 0,44))}),(0,_p.D)({name:"blake2b-360",code:45613,encode:e=>oi.aI.coerce(Ep(e,void 0,45))}),(0,_p.D)({name:"blake2b-368",code:45614,encode:e=>oi.aI.coerce(Ep(e,void 0,46))}),(0,_p.D)({name:"blake2b-376",code:45615,encode:e=>oi.aI.coerce(Ep(e,void 0,47))}),(0,_p.D)({name:"blake2b-384",code:45616,encode:e=>oi.aI.coerce(Ep(e,void 0,48))}),(0,_p.D)({name:"blake2b-392",code:45617,encode:e=>oi.aI.coerce(Ep(e,void 0,49))}),(0,_p.D)({name:"blake2b-400",code:45618,encode:e=>oi.aI.coerce(Ep(e,void 0,50))}),(0,_p.D)({name:"blake2b-408",code:45619,encode:e=>oi.aI.coerce(Ep(e,void 0,51))}),(0,_p.D)({name:"blake2b-416",code:45620,encode:e=>oi.aI.coerce(Ep(e,void 0,52))}),(0,_p.D)({name:"blake2b-424",code:45621,encode:e=>oi.aI.coerce(Ep(e,void 0,53))}),(0,_p.D)({name:"blake2b-432",code:45622,encode:e=>oi.aI.coerce(Ep(e,void 0,54))}),(0,_p.D)({name:"blake2b-440",code:45623,encode:e=>oi.aI.coerce(Ep(e,void 0,55))}),(0,_p.D)({name:"blake2b-448",code:45624,encode:e=>oi.aI.coerce(Ep(e,void 0,56))}),(0,_p.D)({name:"blake2b-456",code:45625,encode:e=>oi.aI.coerce(Ep(e,void 0,57))}),(0,_p.D)({name:"blake2b-464",code:45626,encode:e=>oi.aI.coerce(Ep(e,void 0,58))}),(0,_p.D)({name:"blake2b-472",code:45627,encode:e=>oi.aI.coerce(Ep(e,void 0,59))}),(0,_p.D)({name:"blake2b-480",code:45628,encode:e=>oi.aI.coerce(Ep(e,void 0,60))}),(0,_p.D)({name:"blake2b-488",code:45629,encode:e=>oi.aI.coerce(Ep(e,void 0,61))}),(0,_p.D)({name:"blake2b-496",code:45630,encode:e=>oi.aI.coerce(Ep(e,void 0,62))}),(0,_p.D)({name:"blake2b-504",code:45631,encode:e=>oi.aI.coerce(Ep(e,void 0,63))}),(0,_p.D)({name:"blake2b-512",code:45632,encode:e=>oi.aI.coerce(Ep(e,void 0,64))});class Sp extends Error{constructor(e){super(e),this.name="VerificationError"}}class Cp extends Error{constructor(e){super(e),this.name="TimeoutError"}}function Tp(e){if(!e||"string"!=typeof e.message)return!1;const t=[/file does not exist/,/Cannot read properties of undefined \(reading '([^']+)'\)/,/([a-zA-Z_.]+) is undefined/,/undefined is not an object \(evaluating '([^']+)'\)/,/all retrievals failed/];for(const n of t)if(n.test(e.message))return!0;return!1}class Ap{constructor(e,t={}){this.carItr=e,this.getBlockTimeout=t.getBlockTimeout??1e4}static async fromStream(e){const t=(await Bs.fromIterable(kp(e)))[Symbol.asyncIterator]();return new Ap(t)}async get(e,t){if((e="string"==typeof e?Nr.parse(e):e).multihash.code===wp.code)return e.multihash.digest;const{value:n,done:r}=await function(e,t,n){let r;const o=new Promise(((e,o)=>{r=setTimeout((()=>{const e=new Error("Promise timed out");o(n||e)}),t)}));return Promise.race([e,o]).finally((()=>clearTimeout(r)))}(this.carItr.next(),this.getBlockTimeout,new Cp(`get ${e}: timed out`));if(!n&&r)throw new Sp(`get ${e}: CAR file has no more blocks`);const{cid:o,bytes:s}=n;if(await async function(e,t){const{code:n,digest:r}=e.multihash;if(!Bp[e.code])throw new Sp(`Unexpected codec: 0x${e.code.toString(16)}`);if(!Dp[n])throw new Sp(`Unexpected multihash code: 0x${n.toString(16)}`);if(n!==wp.code&&r.length<20)throw new Sp("Hashes must be at least 20 bytes long");if(n!==wp.code&&r.length>128)throw new Sp("Hashes must be at most 128 bytes long");const o=await Dp[n].digest(t);if(Ip(o.digest)!==Ip(r))throw new Sp(`Mismatch: digest of bytes (${Ip(o)}) does not match digest in CID (${Ip(r)})`)}(o,s),!e.equals(o))throw new Sp(`get ${e}: received ${o} instead`);return s}}const{toHex:Ip}=e,Bp={[bs]:t,[ti]:r,[pi]:o,[ap]:N,[fp]:R},Dp={[wp.code]:wp,[bp.code]:bp,[xp.code]:zr(xp)};let Up,Np;const Rp=new WeakMap,Pp=new WeakMap,Op=new WeakMap,Lp=new WeakMap,$p=new WeakMap;let Mp={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pp.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Op.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zp(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jp(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Np||(Np=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Fp(this),e),zp(Rp.get(this))}:function(...e){return zp(t.apply(Fp(this),e))}:function(e,...n){const r=t.call(Fp(this),e,...n);return Op.set(r,e.sort?e.sort():[e]),zp(r)}:(e instanceof IDBTransaction&&function(e){if(Pp.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)}));Pp.set(e,t)}(e),n=e,(Up||(Up=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>n instanceof e))?new Proxy(e,Mp):e);var t,n}function zp(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(zp(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Rp.set(t,e)})).catch((()=>{})),$p.set(t,e),t}(e);if(Lp.has(e))return Lp.get(e);const t=jp(e);return t!==e&&(Lp.set(e,t),$p.set(t,e)),t}const Fp=e=>$p.get(e),Gp=["get","getKey","getAll","getAllKeys","count"],Vp=["put","add","delete","clear"],Hp=new Map;function qp(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Hp.get(t))return Hp.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Vp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!Gp.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let i=s.store;return r&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),o&&s.done]))[0]};return Hp.set(t,s),s}var Yp;Yp=Mp,Mp={...Yp,get:(e,t,n)=>qp(e,t)||Yp.get(e,t,n),has:(e,t)=>!!qp(e,t)||Yp.has(e,t)};const Wp="saturn-client";function Jp(){const e="undefined"!=typeof self&&self?.indexedDB;let t;return e&&(t=function(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const i=indexedDB.open(e,t),a=zp(i);return r&&i.addEventListener("upgradeneeded",(e=>{r(zp(i.result),e.oldVersion,e.newVersion,zp(i.transaction),e)})),n&&i.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("saturn-db",1,{upgrade(e){e.createObjectStore(Wp)}})),{get:async n=>e&&(await t).get(Wp,n),set:async(n,r)=>e&&(await t).put(Wp,r,n),delete:async n=>e&&(await t).delete(Wp,n)}}const Kp=dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Xp=(dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),"strn/jwt");async function Qp(e,t){try{const e=await t.get(Xp);if(function(e){if(!e)return!1;const{exp:t}=JSON.parse(nr(Kp.decode("m"+e.split(".")[1])));return Date.now()<1e3*t}(e))return e}catch(e){}const{clientKey:n,authURL:r}=e,o=`${r}?clientKey=${n}`,s=await fetch(o),{token:i,message:a}=await s.json();if(!i)throw new Error(a||"Failed to refresh jwt");try{await t.set(Xp,i)}catch(e){}return i}function Zp(e){try{if(process?.env?.TESTING)return e.toJSON()}catch(e){}return e}function eg(e){return e.startsWith("http")||(e=`https://${e}`),e}const tg="undefined"!=typeof window&&void 0!==window.document,ng="undefined"!=typeof ServiceWorkerGlobalScope,rg="undefined"!=typeof DedicatedWorkerGlobalScope,og="undefined"!=typeof SharedWorkerGlobalScope,sg=tg||ng||rg||og;"undefined"!=typeof process&&null!=process.versions&&process.versions.node;class ig{static nodesListKey="saturn-nodes";static defaultRaceCount=3;constructor(e={}){if(this.config=Object.assign({},{clientId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),cdnURL:"l1s.saturn.ms",logURL:"https://twb3qukm2i654i3tnvx36char40aymqq.lambda-url.us-west-2.on.aws/",orchURL:"https://orchestrator.strn.pl/nodes?maxNodes=100",authURL:"https://su4hesnyinnwvtk3h2rkauh5ja0qrisq.lambda-url.us-west-2.on.aws/",format:"car",fallbackLimit:5,connectTimeout:5e3,downloadTimeout:0},e),!this.config.clientKey)throw new Error("clientKey is required");this.logs=[],this.nodes=[],this.reportingLogs=!0,this.hasPerformanceAPI=sg&&self?.performance,this.reportingLogs&&this.hasPerformanceAPI&&this._monitorPerformanceBuffer(),this.storage=this.config.storage||function(){const e={};return{get:async t=>e[t],set:async(t,n)=>{e[t]=n},delete:async t=>{delete e[t]}}}(),this.loadNodesPromise=this.config.experimental?this._loadNodes(this.config):null}async fetchCIDWithRace(e,t={}){const n=Object.assign({},this.config,t);if(!t.originFallback){const[t]=(e??"").split("/");Nr.parse(t);const r=await Qp(n,this.storage);n.jwt=r}sg||(n.headers={...n.headers||{},Authorization:"Bearer "+n.jwt});let r=n.nodes;r&&0!==r.length||(r=[{url:n.cdnURL}]);const o=[],s=async t=>{const r={...n,url:t.url},s=this.createRequestURL(e,r),i=new AbortController;o.push(i);const c=setTimeout((()=>{i.abort()}),n.connectTimeout);try{return a=await fetch(Zp(s),{signal:i.signal,...n}),clearTimeout(c),{res:a,url:s,node:t,controller:i}}catch(e){throw e.node=t,e}},i=Promise.any(r.map((e=>s(e))));let a,c,u,h,d={startTime:new Date};try{if(({res:a,url:c,controller:u,node:h}=await i),(async(e,t)=>{t.forEach((t=>{e!==t&&t.abort("Request race unsuccessful")}))})(u,o),d.nodeId=h.id,d=Object.assign(d,this._generateLog(a,d),{url:c}),!a.ok){const e=new Error(`Non OK response received: ${a.status} ${a.statusText}`);throw e.res=a,e}}catch(e){throw a||(d.error=e.message),e.node&&(d.nodeId=e.node.id),this._finalizeLog(d),e}return{res:a,controller:u,log:d}}async fetchCID(e,t={}){const n=Object.assign({},this.config,t);if(!t.originFallback){const[t]=(e??"").split("/");Nr.parse(t);const r=await Qp(this.config,this.storage);n.jwt=r}const r=n.nodes&&n.nodes[0],o=r?.url??this.config.cdnURL,s=this.createRequestURL(e,{...n,url:o});let i={url:s,startTime:new Date};r?.id&&(i.nodeId=r.id);const a=n.controller??new AbortController,c=setTimeout((()=>{a.abort()}),n.connectTimeout);let u;sg||(n.headers={...n.headers||{},Authorization:"Bearer "+n.jwt});try{if(u=await fetch(Zp(s),{signal:a.signal,...n}),clearTimeout(c),i=Object.assign(i,this._generateLog(u,i)),!u.ok){const e=new Error(`Non OK response received: ${u.status} ${u.statusText}`);throw e.res=u,e}}catch(e){throw u||(i.error=e.message),this._finalizeLog(i),e}return{res:u,controller:a,log:i}}_generateLog(e,t){const{headers:n}=e;return t.httpStatusCode=e.status,t.cacheHit="HIT"===n.get("saturn-cache-status"),t.nodeId=t.nodeId??n.get("saturn-node-id"),t.requestId=n.get("saturn-transfer-id"),t.httpProtocol=n.get("quic-status"),e.ok&&(t.ttfbMs=new Date-t.startTime),t}async*fetchContentWithFallback(e,t={}){const n=t.controller;delete t.controller;let r=null,o=!1,s=0;const i=async function*(r){const o=new AbortController;t.controller=o,n&&n.signal.addEventListener("abort",(()=>{o.abort()}));let i=0;const a=Object.assign(t,r),c=await this.fetchContent(e,a);for await(const e of c){if(i<s){const t=s-i;t<e.length&&(yield e.slice(t),s+=e.length-t)}else yield e,s+=e.length;i+=e.length}}.bind(this);if(0===this.nodes.length){t.nodes=Array({url:this.config.cdnURL});try{return void(yield*i())}catch(e){r=e,410===e.res?.status||Tp(e)?o=!0:await this.loadNodesPromise}}let a=0;const c=this.nodes;for(let e=0;e<c.length&&!(a>this.config.fallbackLimit||o||n?.signal.aborted);e++){t.raceNodes?t.nodes=c.slice(e,e+ig.defaultRaceCount):t.nodes=Array(c[e]);try{return void(yield*i())}catch(e){if(r=e,410===e.res?.status||Tp(e))break}a+=1}if(r){const e=t.customerFallbackURL??this.config.customerFallbackURL;if(e){t.nodes=Array({url:e});try{return void(yield*i({format:null,originFallback:!0}))}catch(e){r=e}}(()=>{throw new Error(`All attempts to fetch content have failed. Last error: ${r.message}`)})()}}async*fetchContent(e,t={}){let n,r,o;(t=Object.assign({},this.config,t)).raceNodes?({res:n,controller:r,log:o}=await this.fetchCIDWithRace(e,t)):({res:n,controller:r,log:o}=await this.fetchCID(e,t));try{const r=async function*(e){o.numBytesSent=0;for await(const t of e)o.numBytesSent+=t.length,yield t}(kp(n.body));t.format?yield*async function*(e,t){const n=await Ap.fromStream(t),r=await sp(e,n);for await(const e of r.content())yield e}(e,r):yield*r}catch(e){throw o.error=e.message,r.abort(),e}finally{this._finalizeLog(o)}}async fetchContentBuffer(e,t={}){return await async function(e){const t=[];let n=0;for await(const r of e){const e=new Uint8Array(r);t.push(e),n+=e.byteLength}const r=new Uint8Array(n);let o=0;for(const e of t)r.set(e,o),o+=e.byteLength;return r}(this.fetchContent(e,t))}createRequestURL(e,t={}){let n=t.url??this.config.cdnURL;if(n=eg(n),t.originFallback)return new URL(n);const r=new URL(`${n}/ipfs/${e}`);return t.format&&r.searchParams.set("format",t.format),"car"===t.format&&r.searchParams.set("dag-scope","entity"),sg&&r.searchParams.set("jwt",t.jwt),r}_finalizeLog(e){e.requestDurationSec=(new Date-e.startTime)/1e3,this.reportLogs(e)}reportLogs(e){this.logs.push(e),this.reportingLogs&&(this.reportLogsTimeout&&clearTimeout(this.reportLogsTimeout),this.reportLogsTimeout=setTimeout(this._reportLogs.bind(this),3e3))}async _reportLogs(){if(!this.logs.length)return;const e=this.hasPerformanceAPI?this._matchLogsWithPerformanceMetrics(this.logs):this.logs;await fetch(this.config.logURL,{method:"POST",body:JSON.stringify({bandwidthLogs:e,logSender:this.config.logSender})}),this.logs=[],this._clearPerformanceBuffer()}_matchLogsWithPerformanceMetrics(e){return e.map((e=>({...e,...this._getPerformanceMetricsForLog(e)}))).filter((e=>!e.isFromBrowserCache)).map((e=>{const{isFromBrowserCache:t,...n}=e;return n}))}_getPerformanceMetricsForLog(e){const t={},n=performance.getEntriesByType("resource").find((t=>t.name===e.url.href));if(n){const r=n.domainLookupStart,o=n.domainLookupEnd;o>0&&r>0&&(t.dnsTimeMs=Math.round(o-r),t.ttfbAfterDnsMs=Math.round(n.responseStart-n.requestStart)),n.nextHopProtocol&&(t.httpProtocol=n.nextHopProtocol),t.isFromBrowserCache="cache"===n.deliveryType||e.httpStatusCode&&0===n.transferSize}return t}_monitorPerformanceBuffer(){performance.addEventListener("resourcetimingbufferfull",ig._setResourceBufferSize)}static _setResourceBufferSize(){const e=performance.getEntriesByType("resource").length,t=Math.min(e+250,1e3);performance.setResourceTimingBufferSize(t)}_clearPerformanceBuffer(){this.hasPerformanceAPI&&performance.clearResourceTimings()}_sortNodes(e){const t=Math.max(...e.map((e=>e.distance))),n=1-.8;return e.slice().sort(((e,r)=>{const o=e.distance/t,s=r.distance/t,i=e.weight/100,a=r.weight/100;return.8*o-n*i-(.8*s-n*a)}))}async _loadNodes(e){let t,n=e.orchURL;this.storage&&(t=this.storage.get(ig.nodesListKey)),n=eg(n);const r=new URL(n),o=new AbortController,s=Object.assign({},{method:"GET"},this.config),i=setTimeout((()=>{o.abort()}),s.connectTimeout),a=(await fetch(Zp(r),{signal:o.signal,...s})).json();let c;clearTimeout(i),c=t?await Promise.any([a,t]):await a,c===await t&&(this.nodes=c),c=await a,c=this._sortNodes(c),this.nodes=c,this.storage.set(ig.nodesListKey,c)}}var ag,cg=new Uint8Array(16);function ug(){if(!ag&&!(ag="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ag(cg)}const hg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,dg=function(e){return"string"==typeof e&&hg.test(e)};for(var lg=[],fg=0;fg<256;++fg)lg.push((fg+256).toString(16).substr(1));const pg=function(e,t,n){var r=(e=e||{}).random||(e.rng||ug)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(lg[e[t+0]]+lg[e[t+1]]+lg[e[t+2]]+lg[e[t+3]]+"-"+lg[e[t+4]]+lg[e[t+5]]+"-"+lg[e[t+6]]+lg[e[t+7]]+"-"+lg[e[t+8]]+lg[e[t+9]]+"-"+lg[e[t+10]]+lg[e[t+11]]+lg[e[t+12]]+lg[e[t+13]]+lg[e[t+14]]+lg[e[t+15]]).toLowerCase();if(!dg(n))throw TypeError("Stringified UUID is invalid");return n}(r)};var gg=n(6154),yg=n(4981);const bg=Wn("sw");console.log;class mg{static nocache=!1;static bypasscache=!1;constructor(e,t,n,r){this.cid=e,this.cidPath=function(e,t){const{hostname:n,pathname:r}=new URL(e);let o;return r.startsWith("/ipfs/")?o=r.replace("/ipfs/",""):n.includes(t)&&(o=t+r),o}(r.request.url,e),this.saturn=t,this.clientId=n,this.event=r,this.numBytesEnqueued=0,this.isClosed=!1}get responseOptions(){return{}}async fetch(){await this.saturn.fetchContent(this.cidPath);const e=this,t=new ReadableStream({async start(t){try{const n={customerFallbackURL:e.event.request.url},r=await e.saturn.fetchContentWithFallback(e.cidPath,n);await e._streamContent(r,t)}catch(t){e._debug("Error",t),qt(t)}finally{e._close(t)}},cancel(){e._close()}});return new Response(t,this.responseOptions)}async _streamContent(e,t){const n=Date.now();try{for await(const n of e)this._enqueueChunk(t,n)}finally{const e=Date.now()-n;this._debug(`Done in ${e}ms. Enqueued ${this.numBytesEnqueued}`)}}async _streamFromOrigin(e){this._debug("_streamFromOrigin");const{request:t}=this.event,n=new Request(t,{mode:"cors"}),r=await fetch(n,{credentials:"omit"});for await(const t of(o=r.body,Symbol.asyncIterator in o?o:gg(o)))this._enqueueChunk(e,t);var o}_enqueueChunk(e,t){this.isClosed||(e.enqueue(t),this.numBytesEnqueued+=t.length)}_close(e=null){this.isClosed||(e?.close(),this.isClosed=!0)}_debug(...e){bg(this.event.request.url,...e)}}const wg=["images.studio.metaplex.com"],vg=Wn("sw");console.log,function(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=qn),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Wt.SENTRY_RELEASE&&Wt.SENTRY_RELEASE.id&&(e.release=Wt.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Mn,Array.isArray(n)?Je(...n):n),integrations:Me(e),transport:e.transport||(Ze()?Vn:Hn)};var n;!function(e,t){!0===t.debug&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?we.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=Pe();n.getScope().update(t.initialScope);const r=new e(t);n.bindClient(r)}(Zt,t),e.autoSessionTracking&&function(){if(void 0===Wt.document)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&we.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));const e=Pe();e.captureSession&&(Yn(e),st("history",(({from:e,to:t})=>{void 0!==e&&e!==t&&Yn(Pe())})))}()}({dsn:"https://2a6fc6930efa43dd32d3e56c92c0a7d2@o4504290295349248.ingest.sentry.io/4505902296858624"}),(new class{clientId=null;listenersAdded=!1;constructor(){this.clientId=function(){let e;try{e=new URL(self.location.href).searchParams.get("clientId")}catch{e=pg()}return e}(),this.clientKey=new URL(self.location.href).searchParams.get("clientKey"),this.saturn=new ig({clientKey:this.clientKey,storage:Jp()})}start(){this.listenersAdded||(this.listenersAdded=!0,addEventListener("install",(e=>e.waitUntil(self.skipWaiting()))),addEventListener("activate",(e=>e.waitUntil(self.clients.claim()))),addEventListener("error",(e=>vg("sw err",e))),addEventListener("fetch",(e=>{if(!function(e){try{const{request:n}=e,{url:r,destination:o,mode:s}=n;if("navigate"===s)return function(e){const{searchParams:t}=new URL(e);"1"===t.get("swDebug")&&(Wn.enable("sw"),vg('Enabling debug. gitHash: "8613e45"')),mg.nocache="1"===t.get("nocache"),mg.bypasscache="1"===t.get("cachebypass")}(r),!1;if(t=new URL(r).hostname,wg.some((e=>t===e)))return!1;const i=["video","audio"].includes(o),a=r.includes(".m3u8");if(i&&!a)return!1;const c="same-origin"===s;return!(!self.ReadableStream||"GET"!==n.method||c)}catch(e){return vg("meetsInterceptionPreconditions err %O",e),!1}var t}(e))return;const{url:t}=e.request,n=function(e){const t=e.split("?")[0].split("/");for(const e of t){if(yg.cid(e))return e;const t=e.split(".")[0];if(yg.cid(t))return t}return null}(t);n&&(vg("cid",n,t),e.respondWith(async function(e,t,n,r){let o=null;const{request:s}=r;try{const s=new mg(e,t,n,r);o=await s.fetch()}catch(e){vg(`${s.url}: fetchCID err %O`,e),qt(e),o=await fetch(s)}return o}(n,this.saturn,this.clientId,e)))})))}}).start()})()})();